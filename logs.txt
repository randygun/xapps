
> xapps@0.0.0 start /root/development/xapps/xapps
> node ./bin/www

{"db":{"username":"nugrohopriambodo","password":"ook","server":"127.0.0.1","db":"appku_xapps"},"app":{"name1":"X","name2":"Apps","code":"xapps","complete":"XAPPS Application","port":3009},"email":{"from":"priambodo@goodguyapps.id","host":"goodguyapps.id","username":"priambodo@goodguyapps.id","password":"a0f09784"},"RSA":{"key":null},"path":{"free":{"/user/login":"POST","/user/register":"POST","/user/register/dummy":"POST","/user/socmed":"POST","/user/forget":"POST"},"lifetime":{"/token/renew":"POST"}},"setting":{"token_access_expire":3600000,"language":"en"}}
-----BEGIN RSA PRIVATE KEY-----
MIIEogIBAAKCAQEAwYEquGPZeHxkyosnjsfMwFU3IFaJpi70c5Wu3IRppalJ7FN2
EVXFvyCylZeJQAi/Rip/FvxptNJsjAM5tH/XUjcMgyvCqvloUnD1vLBIlbqQm30s
dpZwZU/oQHgEK1nsq8V+VCYX06kzERM0Kd6/AdrHrbIJ/wECXK2e2YfpK45Fgz60
kZPy44d9dwnhg3Acnshf+A2g2CazyaGyKaUt84nr952AywSZYn8smdXySW8mPMgi
rniTriZGObca+bDM14WzM6kD/W5A7EAgXGgDV6F0BlGi8jxIHfqlLPEodGH2we9/
d01ti2WO8l7GLu9Jyx7qYwaOKoWzAmPcxtQ2FQIDAQABAoIBADDP+IrTBUTTfElr
mOr3k7rgxCswKUD2j0uo8pdF/7B+Z9tpolr1HBD+mo4Jz+GLU1TL24tc2P14J1Ga
brANn69pm4prO4wNpjdFr3eNsIG0sk3G4bR4dpnX8mpw2/xjjsQ16Ywon9IQ2ITy
JzJ4sg4xtjUmuEbPZl0invOYyUTnCkTkX0jgGHJiKQUCwJvceHsc78k+fg1vvI9K
PF8CIM5wUI78w5Qgtw8Dshg93wpVuqGt/vIn6Vtm+KECEdqfTFvHXuverIfbnPGX
BR0fhi4vVTwo5ZTxHJxrhggW/pTtQYJJhJjv54+fMrKiK9bLFfSA+K3nhwBpYGXH
JijG5wECgYEA6w4XmZpIe0Rk6YsGg5LRJa5/2zAhfj653r1PTeKWTZ+A4hMD/0O5
5DhyKDCaJGVJ++u6SVjxMh+nbY1KnCHX46ZNf5rN912+TNnCeU0xGIRTfynT3Hko
sGNwEwNMYz0BHfo522RKAneq8iUOSJIutWZSbEumkHUW3X2YdbSo/DECgYEA0r9B
LfZgEq6kSll3K6ps+SzG9MwpOCfcS069na1YVy7qZMU8vchjAD2E+pBBsyE04hpp
sm7hU4G7DVLBD9XJEebFcisyQVuczSeszzHUUZ7BbCqgjxHXjF6udV3IGNZR8YBe
ggfrEWUDmrrH36YvEeQ6G98BhI3Y3Rar4DpKMyUCgYBD7w25EhMStUCpEsouKreR
uW4wbiev8fcMPhB2hR9FjezU6gQEuZE3OW0c2nciP7fzPDzZx//lqapdCjHfEBTy
MXVChP40GP7P/TusjTe8SzpKjU8y8D1nRUX16MUiBVaWUGR6WPDe57EbTMRlCwK+
4LS/odmg9IZIO21dz3nrcQKBgEE4gzlwOAdQGPQRf/n5gkQTAXec/1yrqVd9BN2Z
We+RS2ToTYYGT+0xHMhWgJ6pNi6LMg7Qldc8HOFgrPLznIh3vL86cxEbAwnSr35n
02d3FDEfeBUO1oBQhPk5jsVw/mcY7SacwLjfZCAskdK7IXIOCZW6jEOzilvRulto
brIpAoGATICXAJrVwxX1ev9L7M/TktyqYigv19/AmEp/CO/L+jJ1lyZ1vB+iY+wQ
vrEBsifmjtFMSlf18QrqFkNzg4gr+aH1vDRiWZmxietfbXQDoZj+oQDpTLsBXiiU
nI9fX4rsnoERpmyB5He2qw7N3HZw6AhkOrLynFmIvsPON9sHrBQ=
-----END RSA PRIVATE KEY-----

encrypted:  D4V/Jcbxr/bFVvuNJmr0wdj2X0Mn92Cwnw0T6k8XJD84XTAwMN7K1Cs2K8vZR4/JwM199UqeWdPB8xh+s7rJQQOKJN4rIAIhrgasH0ipU3vnlp78xm0SuXCS/KoNtIni6Wl1d5ixyh3/OXuIV2VVz/ZrdDd6BUwP4HTEXEFD0rVOazuozOCnJehNNFp9XEhjuljoFIOLjvOqs3cp8l89gWKqnQxI6McZ48pTFuBm+o1IvoMmFhp28cN+R8zfCVgJXLIzhONcNlCltgV0CjqgojN+mxBS8lRIkMU3oWKt4BIM08BkFGtfmLvbjv0EPoPpqsPQ5yo4D9UxGP8QneWQqg==
decrypted:  {}
DB:OK;SELECT tablename FROM pg_catalog.pg_tables WHERE schemaname='public' AND position('constant' IN tablename)=1;undefined
DB:OK;SELECT id,code FROM constant_role;undefined
ID: constant_role;1
CODE: constant_role;admin
ID: constant_role;3
CODE: constant_role;buyer
ID: constant_role;4
CODE: constant_role;employee
ID: constant_role;2
CODE: constant_role;seller
Before Max: {"role":{"1":"admin","2":"seller","3":"buyer","4":"employee","admin":"1","buyer":"3","employee":"4","seller":"2"}};[{"id":"1","code":"admin"},{"id":"3","code":"buyer"},{"id":"4","code":"employee"},{"id":"2","code":"seller"}]
i: 1 of max: 6
DB:OK;SELECT id,code FROM constant_payment;undefined
ID: constant_payment;1
CODE: constant_payment;cash
ID: constant_payment;2
CODE: constant_payment;debit
Before Max: {"role":{"1":"admin","2":"seller","3":"buyer","4":"employee","admin":"1","buyer":"3","employee":"4","seller":"2"},"payment":{"1":"cash","2":"debit","cash":"1","debit":"2"}};[{"id":"1","code":"cash"},{"id":"2","code":"debit"}]
i: 2 of max: 6
DB:OK;SELECT id,code FROM constant_language;undefined
ID: constant_language;1
CODE: constant_language;id
ID: constant_language;2
CODE: constant_language;en
ID: constant_language;3
CODE: constant_language;zh
Before Max: {"role":{"1":"admin","2":"seller","3":"buyer","4":"employee","admin":"1","buyer":"3","employee":"4","seller":"2"},"payment":{"1":"cash","2":"debit","cash":"1","debit":"2"},"language":{"1":"id","2":"en","3":"zh","id":"1","en":"2","zh":"3"}};[{"id":"1","code":"id"},{"id":"2","code":"en"},{"id":"3","code":"zh"}]
i: 3 of max: 6
DB:OK;SELECT id,code FROM constant_socmed;undefined
ID: constant_socmed;1
CODE: constant_socmed;facebook
ID: constant_socmed;2
CODE: constant_socmed;gplus
Before Max: {"role":{"1":"admin","2":"seller","3":"buyer","4":"employee","admin":"1","buyer":"3","employee":"4","seller":"2"},"payment":{"1":"cash","2":"debit","cash":"1","debit":"2"},"language":{"1":"id","2":"en","3":"zh","id":"1","en":"2","zh":"3"},"socmed":{"1":"facebook","2":"gplus","facebook":"1","gplus":"2"}};[{"id":"1","code":"facebook"},{"id":"2","code":"gplus"}]
i: 4 of max: 6
DB:OK;SELECT id,code FROM constant_setting;undefined
ID: constant_setting;1
CODE: constant_setting;page_pagination
ID: constant_setting;2
CODE: constant_setting;token_access_expire
ID: constant_setting;3
CODE: constant_setting;language
ID: constant_setting;6
CODE: constant_setting;time_max_delivery
ID: constant_setting;7
CODE: constant_setting;money_max_topup
ID: constant_setting;8
CODE: constant_setting;money_max_cashout
ID: constant_setting;5
CODE: constant_setting;timer_auto_complete
ID: constant_setting;4
CODE: constant_setting;is_discount_shipment
ID: constant_setting;9
CODE: constant_setting;is_maintenance
ID: constant_setting;10
CODE: constant_setting;worker_special
ID: constant_setting;11
CODE: constant_setting;distance_max
ID: constant_setting;12
CODE: constant_setting;fee_delivery
ID: constant_setting;13
CODE: constant_setting;key_googlemaps
Before Max: {"role":{"1":"admin","2":"seller","3":"buyer","4":"employee","admin":"1","buyer":"3","employee":"4","seller":"2"},"payment":{"1":"cash","2":"debit","cash":"1","debit":"2"},"language":{"1":"id","2":"en","3":"zh","id":"1","en":"2","zh":"3"},"socmed":{"1":"facebook","2":"gplus","facebook":"1","gplus":"2"},"setting":{"1":"page_pagination","2":"token_access_expire","3":"language","4":"is_discount_shipment","5":"timer_auto_complete","6":"time_max_delivery","7":"money_max_topup","8":"money_max_cashout","9":"is_maintenance","10":"worker_special","11":"distance_max","12":"fee_delivery","13":"key_googlemaps","page_pagination":"1","token_access_expire":"2","language":"3","time_max_delivery":"6","money_max_topup":"7","money_max_cashout":"8","timer_auto_complete":"5","is_discount_shipment":"4","is_maintenance":"9","worker_special":"10","distance_max":"11","fee_delivery":"12","key_googlemaps":"13"}};[{"id":"1","code":"page_pagination"},{"id":"2","code":"token_access_expire"},{"id":"3","code":"language"},{"id":"6","code":"time_max_delivery"},{"id":"7","code":"money_max_topup"},{"id":"8","code":"money_max_cashout"},{"id":"5","code":"timer_auto_complete"},{"id":"4","code":"is_discount_shipment"},{"id":"9","code":"is_maintenance"},{"id":"10","code":"worker_special"},{"id":"11","code":"distance_max"},{"id":"12","code":"fee_delivery"},{"id":"13","code":"key_googlemaps"}]
i: 5 of max: 6
DB:OK;SELECT id,code FROM constant_provider;undefined
ID: constant_provider;1
CODE: constant_provider;veritrans
Before Max: {"role":{"1":"admin","2":"seller","3":"buyer","4":"employee","admin":"1","buyer":"3","employee":"4","seller":"2"},"payment":{"1":"cash","2":"debit","cash":"1","debit":"2"},"language":{"1":"id","2":"en","3":"zh","id":"1","en":"2","zh":"3"},"socmed":{"1":"facebook","2":"gplus","facebook":"1","gplus":"2"},"setting":{"1":"page_pagination","2":"token_access_expire","3":"language","4":"is_discount_shipment","5":"timer_auto_complete","6":"time_max_delivery","7":"money_max_topup","8":"money_max_cashout","9":"is_maintenance","10":"worker_special","11":"distance_max","12":"fee_delivery","13":"key_googlemaps","page_pagination":"1","token_access_expire":"2","language":"3","time_max_delivery":"6","money_max_topup":"7","money_max_cashout":"8","timer_auto_complete":"5","is_discount_shipment":"4","is_maintenance":"9","worker_special":"10","distance_max":"11","fee_delivery":"12","key_googlemaps":"13"},"provider":{"1":"veritrans","veritrans":"1"}};[{"id":"1","code":"veritrans"}]
i: 6 of max: 6
Dynamic {"role":{"1":"admin","2":"seller","3":"buyer","4":"employee","admin":"1","buyer":"3","employee":"4","seller":"2"},"payment":{"1":"cash","2":"debit","cash":"1","debit":"2"},"language":{"1":"id","2":"en","3":"zh","id":"1","en":"2","zh":"3"},"socmed":{"1":"facebook","2":"gplus","facebook":"1","gplus":"2"},"setting":{"1":"page_pagination","2":"token_access_expire","3":"language","4":"is_discount_shipment","5":"timer_auto_complete","6":"time_max_delivery","7":"money_max_topup","8":"money_max_cashout","9":"is_maintenance","10":"worker_special","11":"distance_max","12":"fee_delivery","13":"key_googlemaps","page_pagination":"1","token_access_expire":"2","language":"3","time_max_delivery":"6","money_max_topup":"7","money_max_cashout":"8","timer_auto_complete":"5","is_discount_shipment":"4","is_maintenance":"9","worker_special":"10","distance_max":"11","fee_delivery":"12","key_googlemaps":"13"},"provider":{"1":"veritrans","veritrans":"1"}}
DB:OK;SELECT csetting.code, settings.value FROM table_settings settings LEFT JOIN constant_setting csetting ON csetting.id=settings.id_setting LEFT JOIN (SELECT MAX(id) AS maxid FROM table_settings GROUP BY id_setting) maxsettings ON maxsettings.maxid=settings.id WHERE maxsettings.maxid IS NOT NULL;undefined
Worker 11078 is online
Worker 11079 is online
{"db":{"username":"nugrohopriambodo","password":"ook","server":"127.0.0.1","db":"appku_xapps"},"app":{"name1":"X","name2":"Apps","code":"xapps","complete":"XAPPS Application","port":3009},"email":{"from":"priambodo@goodguyapps.id","host":"goodguyapps.id","username":"priambodo@goodguyapps.id","password":"a0f09784"},"RSA":{"key":null},"path":{"free":{"/user/login":"POST","/user/register":"POST","/user/register/dummy":"POST","/user/socmed":"POST","/user/forget":"POST"},"lifetime":{"/token/renew":"POST"}},"setting":{"token_access_expire":3600000,"language":"en"}}
{"db":{"username":"nugrohopriambodo","password":"ook","server":"127.0.0.1","db":"appku_xapps"},"app":{"name1":"X","name2":"Apps","code":"xapps","complete":"XAPPS Application","port":3009},"email":{"from":"priambodo@goodguyapps.id","host":"goodguyapps.id","username":"priambodo@goodguyapps.id","password":"a0f09784"},"RSA":{"key":null},"path":{"free":{"/user/login":"POST","/user/register":"POST","/user/register/dummy":"POST","/user/socmed":"POST","/user/forget":"POST"},"lifetime":{"/token/renew":"POST"}},"setting":{"token_access_expire":3600000,"language":"en"}}
REGISTERING ALL
["all_all.js","all_api.js","all_cms.js","api_home.js","api_location.js","api_product.js","api_settings.js","api_store.js","api_string.js","api_token_renew.js","api_token_update.js","api_trolley.js","api_upload.js","api_user.js","index.js","users.js"]
APPLICATION:ROUTERHOOK: get;/ads;
Registering api/home: api_home.js
APPLICATION:ROUTERHOOK: get;/history;
APPLICATION:ROUTERHOOK: put;/;
APPLICATION:ROUTERHOOK: post;/history;
Registering api/location: api_location.js
APPLICATION:ROUTERHOOK: get;/:id_product;
APPLICATION:ROUTERHOOK: get;/:id_product/related;
Registering api/product: api_product.js
APPLICATION:ROUTERHOOK: get;/;
Registering api/settings: api_settings.js
APPLICATION:ROUTERHOOK: get;/nearby/product;
APPLICATION:ROUTERHOOK: get;/:id_store/product;
APPLICATION:ROUTERHOOK: get;/nearby;
Registering api/store: api_store.js
APPLICATION:ROUTERHOOK: get;/faq;
APPLICATION:ROUTERHOOK: get;/tos;
APPLICATION:ROUTERHOOK: get;/help;
Registering api/string: api_string.js
APPLICATION:ROUTERHOOK: post;/;
Registering api/token/renew: api_token_renew.js
APPLICATION:ROUTERHOOK: post;/;
Registering api/token/update: api_token_update.js
APPLICATION:ROUTERHOOK: get;/;
APPLICATION:ROUTERHOOK: post;/confirm;
APPLICATION:ROUTERHOOK: put;/:id_product;
APPLICATION:ROUTERHOOK: delete;/:id_product;
APPLICATION:ROUTERHOOK: delete;/;
Registering api/trolley: api_trolley.js
APPLICATION:ROUTERHOOK: post;/;
Registering api/upload: api_upload.js
APPLICATION:ROUTERHOOK: post;/login;
APPLICATION:ROUTERHOOK: post;/forget;
APPLICATION:ROUTERHOOK: get;/logout;
APPLICATION:ROUTERHOOK: post;/register/dummy;
APPLICATION:ROUTERHOOK: post;/register;
APPLICATION:ROUTERHOOK: post;/socmed;
APPLICATION:ROUTERHOOK: post;/;
APPLICATION:ROUTERHOOK: patch;/avatar;
APPLICATION:ROUTERHOOK: patch;/name;
APPLICATION:ROUTERHOOK: patch;/username;
APPLICATION:ROUTERHOOK: patch;/phone;
APPLICATION:ROUTERHOOK: patch;/address;
APPLICATION:ROUTERHOOK: patch;/password;
APPLICATION:ROUTERHOOK: patch;/pin;
APPLICATION:ROUTERHOOK: patch;/bank;
Registering api/user: api_user.js
Cluster blank
Incoming message from master
INCOMING {"privateRSA":"-----BEGIN RSA PRIVATE KEY-----\nMIIEogIBAAKCAQEAwYEquGPZeHxkyosnjsfMwFU3IFaJpi70c5Wu3IRppalJ7FN2\nEVXFvyCylZeJQAi/Rip/FvxptNJsjAM5tH/XUjcMgyvCqvloUnD1vLBIlbqQm30s\ndpZwZU/oQHgEK1nsq8V+VCYX06kzERM0Kd6/AdrHrbIJ/wECXK2e2YfpK45Fgz60\nkZPy44d9dwnhg3Acnshf+A2g2CazyaGyKaUt84nr952AywSZYn8smdXySW8mPMgi\nrniTriZGObca+bDM14WzM6kD/W5A7EAgXGgDV6F0BlGi8jxIHfqlLPEodGH2we9/\nd01ti2WO8l7GLu9Jyx7qYwaOKoWzAmPcxtQ2FQIDAQABAoIBADDP+IrTBUTTfElr\nmOr3k7rgxCswKUD2j0uo8pdF/7B+Z9tpolr1HBD+mo4Jz+GLU1TL24tc2P14J1Ga\nbrANn69pm4prO4wNpjdFr3eNsIG0sk3G4bR4dpnX8mpw2/xjjsQ16Ywon9IQ2ITy\nJzJ4sg4xtjUmuEbPZl0invOYyUTnCkTkX0jgGHJiKQUCwJvceHsc78k+fg1vvI9K\nPF8CIM5wUI78w5Qgtw8Dshg93wpVuqGt/vIn6Vtm+KECEdqfTFvHXuverIfbnPGX\nBR0fhi4vVTwo5ZTxHJxrhggW/pTtQYJJhJjv54+fMrKiK9bLFfSA+K3nhwBpYGXH\nJijG5wECgYEA6w4XmZpIe0Rk6YsGg5LRJa5/2zAhfj653r1PTeKWTZ+A4hMD/0O5\n5DhyKDCaJGVJ++u6SVjxMh+nbY1KnCHX46ZNf5rN912+TNnCeU0xGIRTfynT3Hko\nsGNwEwNMYz0BHfo522RKAneq8iUOSJIutWZSbEumkHUW3X2YdbSo/DECgYEA0r9B\nLfZgEq6kSll3K6ps+SzG9MwpOCfcS069na1YVy7qZMU8vchjAD2E+pBBsyE04hpp\nsm7hU4G7DVLBD9XJEebFcisyQVuczSeszzHUUZ7BbCqgjxHXjF6udV3IGNZR8YBe\nggfrEWUDmrrH36YvEeQ6G98BhI3Y3Rar4DpKMyUCgYBD7w25EhMStUCpEsouKreR\nuW4wbiev8fcMPhB2hR9FjezU6gQEuZE3OW0c2nciP7fzPDzZx//lqapdCjHfEBTy\nMXVChP40GP7P/TusjTe8SzpKjU8y8D1nRUX16MUiBVaWUGR6WPDe57EbTMRlCwK+\n4LS/odmg9IZIO21dz3nrcQKBgEE4gzlwOAdQGPQRf/n5gkQTAXec/1yrqVd9BN2Z\nWe+RS2ToTYYGT+0xHMhWgJ6pNi6LMg7Qldc8HOFgrPLznIh3vL86cxEbAwnSr35n\n02d3FDEfeBUO1oBQhPk5jsVw/mcY7SacwLjfZCAskdK7IXIOCZW6jEOzilvRulto\nbrIpAoGATICXAJrVwxX1ev9L7M/TktyqYigv19/AmEp/CO/L+jJ1lyZ1vB+iY+wQ\nvrEBsifmjtFMSlf18QrqFkNzg4gr+aH1vDRiWZmxietfbXQDoZj+oQDpTLsBXiiU\nnI9fX4rsnoERpmyB5He2qw7N3HZw6AhkOrLynFmIvsPON9sHrBQ=\n-----END RSA PRIVATE KEY-----\n","dynamic":{"role":{"1":"admin","2":"seller","3":"buyer","4":"employee","admin":"1","buyer":"3","employee":"4","seller":"2"},"payment":{"1":"cash","2":"debit","cash":"1","debit":"2"},"language":{"1":"id","2":"en","3":"zh","id":"1","en":"2","zh":"3"},"socmed":{"1":"facebook","2":"gplus","facebook":"1","gplus":"2"},"setting":{"1":"page_pagination","2":"token_access_expire","3":"language","4":"is_discount_shipment","5":"timer_auto_complete","6":"time_max_delivery","7":"money_max_topup","8":"money_max_cashout","9":"is_maintenance","10":"worker_special","11":"distance_max","12":"fee_delivery","13":"key_googlemaps","page_pagination":"1","token_access_expire":"2","language":"3","time_max_delivery":"6","money_max_topup":"7","money_max_cashout":"8","timer_auto_complete":"5","is_discount_shipment":"4","is_maintenance":"9","worker_special":"10","distance_max":"11","fee_delivery":"12","key_googlemaps":"13"},"provider":{"1":"veritrans","veritrans":"1"}},"setting":{"money_max_cashout":"10000000","is_discount_shipment":"TRUE","page_pagination":"25","key_googlemaps":"AIzaSyDnL8pHV_HPAmrSgzFuQm__trcIZ3atIqI","timer_auto_complete":"3","distance_max":"3000","language":"en","fee_delivery":"[ { \"id\": 5, \"distance\": 5000, \"price\": 5000 }, { \"id\": 4, \"distance\": 4000, \"price\": 4000 }, { \"id\": 3, \"distance\": 3000, \"price\": 3000 }, { \"id\": 2, \"distance\": 2000, \"price\": 2000 }, { \"id\": 1, \"distance\": 1000, \"price\": 1000 }, { \"id\": 6, \"distance\": 0, \"price\": 0 } ]","worker_special":"[1]","is_maintenance":"FALSE","time_max_delivery":"3","token_access_expire":"30000","money_max_topup":"10000000"}}
REGISTERING ALL
["all_all.js","all_api.js","all_cms.js","api_home.js","api_location.js","api_product.js","api_settings.js","api_store.js","api_string.js","api_token_renew.js","api_token_update.js","api_trolley.js","api_upload.js","api_user.js","index.js","users.js"]
APPLICATION:ROUTERHOOK: get;/ads;
Registering api/home: api_home.js
APPLICATION:ROUTERHOOK: get;/history;
APPLICATION:ROUTERHOOK: put;/;
APPLICATION:ROUTERHOOK: post;/history;
Registering api/location: api_location.js
APPLICATION:ROUTERHOOK: get;/:id_product;
APPLICATION:ROUTERHOOK: get;/:id_product/related;
Registering api/product: api_product.js
APPLICATION:ROUTERHOOK: get;/;
Registering api/settings: api_settings.js
APPLICATION:ROUTERHOOK: get;/nearby/product;
APPLICATION:ROUTERHOOK: get;/:id_store/product;
APPLICATION:ROUTERHOOK: get;/nearby;
Registering api/store: api_store.js
APPLICATION:ROUTERHOOK: get;/faq;
APPLICATION:ROUTERHOOK: get;/tos;
APPLICATION:ROUTERHOOK: get;/help;
Registering api/string: api_string.js
APPLICATION:ROUTERHOOK: post;/;
Registering api/token/renew: api_token_renew.js
Worker 1
APPLICATION:ROUTERHOOK: post;/;
Registering api/token/update: api_token_update.js
APPLICATION:ROUTERHOOK: get;/;
APPLICATION:ROUTERHOOK: post;/confirm;
APPLICATION:ROUTERHOOK: put;/:id_product;
APPLICATION:ROUTERHOOK: delete;/:id_product;
APPLICATION:ROUTERHOOK: delete;/;
Registering api/trolley: api_trolley.js
APPLICATION:ROUTERHOOK: post;/;
Registering api/upload: api_upload.js
APPLICATION:ROUTERHOOK: post;/login;
APPLICATION:ROUTERHOOK: post;/forget;
APPLICATION:ROUTERHOOK: get;/logout;
APPLICATION:ROUTERHOOK: post;/register/dummy;
APPLICATION:ROUTERHOOK: post;/register;
APPLICATION:ROUTERHOOK: post;/socmed;
APPLICATION:ROUTERHOOK: post;/;
APPLICATION:ROUTERHOOK: patch;/avatar;
APPLICATION:ROUTERHOOK: patch;/name;
APPLICATION:ROUTERHOOK: patch;/username;
APPLICATION:ROUTERHOOK: patch;/phone;
APPLICATION:ROUTERHOOK: patch;/address;
APPLICATION:ROUTERHOOK: patch;/password;
APPLICATION:ROUTERHOOK: patch;/pin;
APPLICATION:ROUTERHOOK: patch;/bank;
Registering api/user: api_user.js
Cluster blank
Incoming message from master
INCOMING {"privateRSA":"-----BEGIN RSA PRIVATE KEY-----\nMIIEogIBAAKCAQEAwYEquGPZeHxkyosnjsfMwFU3IFaJpi70c5Wu3IRppalJ7FN2\nEVXFvyCylZeJQAi/Rip/FvxptNJsjAM5tH/XUjcMgyvCqvloUnD1vLBIlbqQm30s\ndpZwZU/oQHgEK1nsq8V+VCYX06kzERM0Kd6/AdrHrbIJ/wECXK2e2YfpK45Fgz60\nkZPy44d9dwnhg3Acnshf+A2g2CazyaGyKaUt84nr952AywSZYn8smdXySW8mPMgi\nrniTriZGObca+bDM14WzM6kD/W5A7EAgXGgDV6F0BlGi8jxIHfqlLPEodGH2we9/\nd01ti2WO8l7GLu9Jyx7qYwaOKoWzAmPcxtQ2FQIDAQABAoIBADDP+IrTBUTTfElr\nmOr3k7rgxCswKUD2j0uo8pdF/7B+Z9tpolr1HBD+mo4Jz+GLU1TL24tc2P14J1Ga\nbrANn69pm4prO4wNpjdFr3eNsIG0sk3G4bR4dpnX8mpw2/xjjsQ16Ywon9IQ2ITy\nJzJ4sg4xtjUmuEbPZl0invOYyUTnCkTkX0jgGHJiKQUCwJvceHsc78k+fg1vvI9K\nPF8CIM5wUI78w5Qgtw8Dshg93wpVuqGt/vIn6Vtm+KECEdqfTFvHXuverIfbnPGX\nBR0fhi4vVTwo5ZTxHJxrhggW/pTtQYJJhJjv54+fMrKiK9bLFfSA+K3nhwBpYGXH\nJijG5wECgYEA6w4XmZpIe0Rk6YsGg5LRJa5/2zAhfj653r1PTeKWTZ+A4hMD/0O5\n5DhyKDCaJGVJ++u6SVjxMh+nbY1KnCHX46ZNf5rN912+TNnCeU0xGIRTfynT3Hko\nsGNwEwNMYz0BHfo522RKAneq8iUOSJIutWZSbEumkHUW3X2YdbSo/DECgYEA0r9B\nLfZgEq6kSll3K6ps+SzG9MwpOCfcS069na1YVy7qZMU8vchjAD2E+pBBsyE04hpp\nsm7hU4G7DVLBD9XJEebFcisyQVuczSeszzHUUZ7BbCqgjxHXjF6udV3IGNZR8YBe\nggfrEWUDmrrH36YvEeQ6G98BhI3Y3Rar4DpKMyUCgYBD7w25EhMStUCpEsouKreR\nuW4wbiev8fcMPhB2hR9FjezU6gQEuZE3OW0c2nciP7fzPDzZx//lqapdCjHfEBTy\nMXVChP40GP7P/TusjTe8SzpKjU8y8D1nRUX16MUiBVaWUGR6WPDe57EbTMRlCwK+\n4LS/odmg9IZIO21dz3nrcQKBgEE4gzlwOAdQGPQRf/n5gkQTAXec/1yrqVd9BN2Z\nWe+RS2ToTYYGT+0xHMhWgJ6pNi6LMg7Qldc8HOFgrPLznIh3vL86cxEbAwnSr35n\n02d3FDEfeBUO1oBQhPk5jsVw/mcY7SacwLjfZCAskdK7IXIOCZW6jEOzilvRulto\nbrIpAoGATICXAJrVwxX1ev9L7M/TktyqYigv19/AmEp/CO/L+jJ1lyZ1vB+iY+wQ\nvrEBsifmjtFMSlf18QrqFkNzg4gr+aH1vDRiWZmxietfbXQDoZj+oQDpTLsBXiiU\nnI9fX4rsnoERpmyB5He2qw7N3HZw6AhkOrLynFmIvsPON9sHrBQ=\n-----END RSA PRIVATE KEY-----\n","dynamic":{"role":{"1":"admin","2":"seller","3":"buyer","4":"employee","admin":"1","buyer":"3","employee":"4","seller":"2"},"payment":{"1":"cash","2":"debit","cash":"1","debit":"2"},"language":{"1":"id","2":"en","3":"zh","id":"1","en":"2","zh":"3"},"socmed":{"1":"facebook","2":"gplus","facebook":"1","gplus":"2"},"setting":{"1":"page_pagination","2":"token_access_expire","3":"language","4":"is_discount_shipment","5":"timer_auto_complete","6":"time_max_delivery","7":"money_max_topup","8":"money_max_cashout","9":"is_maintenance","10":"worker_special","11":"distance_max","12":"fee_delivery","13":"key_googlemaps","page_pagination":"1","token_access_expire":"2","language":"3","time_max_delivery":"6","money_max_topup":"7","money_max_cashout":"8","timer_auto_complete":"5","is_discount_shipment":"4","is_maintenance":"9","worker_special":"10","distance_max":"11","fee_delivery":"12","key_googlemaps":"13"},"provider":{"1":"veritrans","veritrans":"1"}},"setting":{"money_max_cashout":"10000000","is_discount_shipment":"TRUE","page_pagination":"25","key_googlemaps":"AIzaSyDnL8pHV_HPAmrSgzFuQm__trcIZ3atIqI","timer_auto_complete":"3","distance_max":"3000","language":"en","fee_delivery":"[ { \"id\": 5, \"distance\": 5000, \"price\": 5000 }, { \"id\": 4, \"distance\": 4000, \"price\": 4000 }, { \"id\": 3, \"distance\": 3000, \"price\": 3000 }, { \"id\": 2, \"distance\": 2000, \"price\": 2000 }, { \"id\": 1, \"distance\": 1000, \"price\": 1000 }, { \"id\": 6, \"distance\": 0, \"price\": 0 } ]","worker_special":"[1]","is_maintenance":"FALSE","time_max_delivery":"3","token_access_expire":"30000","money_max_topup":"10000000"}}
Worker 2
API Cluster worker id: 2
REQUESTING PATH /home/ads;GET;1477290074932
CHECKING API TOKEN Jgs7nXSTRlGKxwioPy+Dpy4SaklEj/wfqS5YoA/G0gRO/MeATJpBRJkWeDaWBUIqbyeRgXsMcp8MmfxZX55jjDyrxq+ZOyxHzAgbe1LQk4QuVaZ3aEETCVUp5LoGwChyvigauo9S/HC0gGWQwp5TT/M13sFDR8Zl0HN6GkubgwVlDd0UHP7zPcDhhpWCcsVb7+ZAOvZNn9DJE0DWnCucgAcmd/jT3gak19IEXHUxpbfnhkSOgohcr/Zq4U1OC02ThqceLNx0D2+PFnkajSOFvAijKo7+KrE4qf618/CTxo5aXFjaaWqIUwpXtzK8RrgHL/gAhoBDQJYJjNz5eQiuWg==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477289414961,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477289414961,"lang":2}; TAG START 1477290074932
TOKEN EXPIRED
PAGE NOT IN EXPIRED TOKEN
RESULT 403.
[0mGET /api/home/ads [33m403 [0m28.308 ms - 2[0m
API Cluster worker id: 2
REQUESTING PATH /token/renew;POST;1477290075183
CHECKING API TOKEN Jgs7nXSTRlGKxwioPy+Dpy4SaklEj/wfqS5YoA/G0gRO/MeATJpBRJkWeDaWBUIqbyeRgXsMcp8MmfxZX55jjDyrxq+ZOyxHzAgbe1LQk4QuVaZ3aEETCVUp5LoGwChyvigauo9S/HC0gGWQwp5TT/M13sFDR8Zl0HN6GkubgwVlDd0UHP7zPcDhhpWCcsVb7+ZAOvZNn9DJE0DWnCucgAcmd/jT3gak19IEXHUxpbfnhkSOgohcr/Zq4U1OC02ThqceLNx0D2+PFnkajSOFvAijKo7+KrE4qf618/CTxo5aXFjaaWqIUwpXtzK8RrgHL/gAhoBDQJYJjNz5eQiuWg==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477289414961,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477289414961,"lang":2}; TAG START 1477290075183
TOKEN EXPIRED
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:POST;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_session
IS_ERR false
NO COOKIES
COOKIES NOT AVAILABLE
DB:OK;SELECT token_session FROM table_user WHERE id=$1;55
TOKEN SESSION 
dEklv2b+PG5+TUbW5SFf0dZ42qbXRg62CjvwUYlnmb/E0GKPZLs6Yx3Wgu9aEuXi9bIpOtzyyt/xxkNsbx5p+NoIyCUNgg7S/FhxD3jDzkApLjuWQZotYlO5TyATcW1ffU0V8Ee4U9ZAfuYEVS8Bej1jXQAlnZ5m6HHyuBSQYulaBSFVL87G5vCxZTv/+EEnIw6Jq/wZLeB7GBuaqby+/tFzSCb80aYY3UKe9UmPoZ4O0eH/gmj/CmKlZWOkO41x1uT2gn2hzmdd5qfZix9hbFOyf1lew2mWWPvLqIIaWmjW4CBgDthS/w53r08kxsO2xfLXtJyFl/JIHIYPZhPnZA==
dEklv2b+PG5+TUbW5SFf0dZ42qbXRg62CjvwUYlnmb/E0GKPZLs6Yx3Wgu9aEuXi9bIpOtzyyt/xxkNsbx5p+NoIyCUNgg7S/FhxD3jDzkApLjuWQZotYlO5TyATcW1ffU0V8Ee4U9ZAfuYEVS8Bej1jXQAlnZ5m6HHyuBSQYulaBSFVL87G5vCxZTv/+EEnIw6Jq/wZLeB7GBuaqby+/tFzSCb80aYY3UKe9UmPoZ4O0eH/gmj/CmKlZWOkO41x1uT2gn2hzmdd5qfZix9hbFOyf1lew2mWWPvLqIIaWmjW4CBgDthS/w53r08kxsO2xfLXtJyFl/JIHIYPZhPnZA==
CREATE TOKEN 1477290075183;30000
DB:OK;UPDATE table_user SET token_session=${token_session}, token_access=${token_access} WHERE id=${id_user} RETURNING token_session,token_access;{"token_access":"EnZGYPEzP4m9CASxlO94UaVwKpJ59pDBuS03DjaAyITrm9RPobjJOryE07ju+Kjmyzhozlb6TKTsQTQl/E5yIbb8XcS4wKtKjxrqi8Jth4ouPsSAZco6aN+kit0Y8aJSwfH/6unHODmFF3485bJ9EifjXnfRGht1cG4czjjDjSXq2zkmyJoo3s/LOl02Idn3+y/pLZTHpD0dpkVmWnN7On0qUE6IXbHRGQdPc5rQOINlbyfdNzA4vVOcWYcQFxefDmr2W68IwPCvE2jTHWNluRt8Bf86kIqtDPc1RpDOFFXt8AmUM/Fbn5KiySosbINRkhBtXO1BZm1DWbqEuvr6Aw==","token_session":"mpsxf+l+bSzMprQ8wY6E/wIM6lWrCfbUurm0iqfgbX7dEt0K0ngvvDbhjn/EPr5i6ScQ4S4qPlgvOA1MPPtL613mla1aaAhQ8v6Vn1vkuTk1ke9xl5y8prcOy15kl4wdC+h+63iQlSl/nr/tL6YGa6LgaT/6M7FKJYac6dAvpvtOR1tNKg/qvqyUFC09d+x362kp6yDZwsAFmV3IO6+wtkITdpSU0MXX1J39Ujo1txH45PZ2LB5vYXkT9xKIVhlO/jGWIi7vPiY5MXDrQTWsmes2Jc3xynJfSMdwg0DehAFEUnv7k91pahQlx6cTNQPGa+Hv1XFFf7w10xznDr7hfA==","id_user":55}
RESULT 200: {"token":{"token_access":"EnZGYPEzP4m9CASxlO94UaVwKpJ59pDBuS03DjaAyITrm9RPobjJOryE07ju+Kjmyzhozlb6TKTsQTQl/E5yIbb8XcS4wKtKjxrqi8Jth4ouPsSAZco6aN+kit0Y8aJSwfH/6unHODmFF3485bJ9EifjXnfRGht1cG4czjjDjSXq2zkmyJoo3s/LOl02Idn3+y/pLZTHpD0dpkVmWnN7On0qUE6IXbHRGQdPc5rQOINlbyfdNzA4vVOcWYcQFxefDmr2W68IwPCvE2jTHWNluRt8Bf86kIqtDPc1RpDOFFXt8AmUM/Fbn5KiySosbINRkhBtXO1BZm1DWbqEuvr6Aw==","token_session":"mpsxf+l+bSzMprQ8wY6E/wIM6lWrCfbUurm0iqfgbX7dEt0K0ngvvDbhjn/EPr5i6ScQ4S4qPlgvOA1MPPtL613mla1aaAhQ8v6Vn1vkuTk1ke9xl5y8prcOy15kl4wdC+h+63iQlSl/nr/tL6YGa6LgaT/6M7FKJYac6dAvpvtOR1tNKg/qvqyUFC09d+x362kp6yDZwsAFmV3IO6+wtkITdpSU0MXX1J39Ujo1txH45PZ2LB5vYXkT9xKIVhlO/jGWIi7vPiY5MXDrQTWsmes2Jc3xynJfSMdwg0DehAFEUnv7k91pahQlx6cTNQPGa+Hv1XFFf7w10xznDr7hfA=="}}
API END token renew /
[0mPOST /api/token/renew [32m200 [0m83.642 ms - 736[0m
API Cluster worker id: 2
REQUESTING PATH /home/ads;GET;1477290075446
CHECKING API TOKEN EnZGYPEzP4m9CASxlO94UaVwKpJ59pDBuS03DjaAyITrm9RPobjJOryE07ju+Kjmyzhozlb6TKTsQTQl/E5yIbb8XcS4wKtKjxrqi8Jth4ouPsSAZco6aN+kit0Y8aJSwfH/6unHODmFF3485bJ9EifjXnfRGht1cG4czjjDjSXq2zkmyJoo3s/LOl02Idn3+y/pLZTHpD0dpkVmWnN7On0qUE6IXbHRGQdPc5rQOINlbyfdNzA4vVOcWYcQFxefDmr2W68IwPCvE2jTHWNluRt8Bf86kIqtDPc1RpDOFFXt8AmUM/Fbn5KiySosbINRkhBtXO1BZm1DWbqEuvr6Aw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290105183,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290105183,"lang":2}; TAG START 1477290075446
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
DB:OK;SELECT * FROM table_ads WHERE is_active=TRUE ORDER BY id ASC;undefined
RESULT 200: {"home_ads":[{"id":"1","id_user":null,"time_create":"2016-10-23T08:04:04.099Z","ads":[{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"}],"is_active":true},{"id":"2","id_user":null,"time_create":"2016-10-23T08:04:04.100Z","ads":[{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"}],"is_active":true},{"id":"3","id_user":null,"time_create":"2016-10-23T08:04:04.101Z","ads":[{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"}],"is_active":true}]}
[0mGET /api/home/ads [32m200 [0m24.951 ms - 3170[0m
API Cluster worker id: 2
REQUESTING PATH /trolley;GET;1477290084013
CHECKING API TOKEN EnZGYPEzP4m9CASxlO94UaVwKpJ59pDBuS03DjaAyITrm9RPobjJOryE07ju+Kjmyzhozlb6TKTsQTQl/E5yIbb8XcS4wKtKjxrqi8Jth4ouPsSAZco6aN+kit0Y8aJSwfH/6unHODmFF3485bJ9EifjXnfRGht1cG4czjjDjSXq2zkmyJoo3s/LOl02Idn3+y/pLZTHpD0dpkVmWnN7On0qUE6IXbHRGQdPc5rQOINlbyfdNzA4vVOcWYcQFxefDmr2W68IwPCvE2jTHWNluRt8Bf86kIqtDPc1RpDOFFXt8AmUM/Fbn5KiySosbINRkhBtXO1BZm1DWbqEuvr6Aw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290105183,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290105183,"lang":2}; TAG START 1477290084013
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;SELECT product.*,trolley.qty AS trolley_qty FROM table_trolley trolley LEFT JOIN table_product product ON product.id=trolley.id_product WHERE trolley.id_user=${id_user};{"id_user":55}
DB:OK;SELECT store.*,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category LEFT JOIN table_store store ON store.id=category.id_store LEFT JOIN table_location_gps location ON location.id=store.id_location WHERE product.id=$1;"3"
[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"1"}]
{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.681350751547,"location_latitude":-6.3160017712992}
[ { "id": 5, "distance": 5000, "price": 5000 }, { "id": 4, "distance": 4000, "price": 4000 }, { "id": 3, "distance": 3000, "price": 3000 }, { "id": 2, "distance": 2000, "price": 2000 }, { "id": 1, "distance": 1000, "price": 1000 }, { "id": 6, "distance": 0, "price": 0 } ]
RESULT 200: {"trolley":[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"1"}],"store":{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.681350751547,"location_latitude":-6.3160017712992},"fee_delivery":[{"id":5,"distance":5000,"price":5000},{"id":4,"distance":4000,"price":4000},{"id":3,"distance":3000,"price":3000},{"id":2,"distance":2000,"price":2000},{"id":1,"distance":1000,"price":1000},{"id":6,"distance":0,"price":0}]}
[0mGET /api/trolley [32m200 [0m24.375 ms - 792[0m
API Cluster worker id: 2
REQUESTING PATH /trolley;GET;1477290086049
CHECKING API TOKEN EnZGYPEzP4m9CASxlO94UaVwKpJ59pDBuS03DjaAyITrm9RPobjJOryE07ju+Kjmyzhozlb6TKTsQTQl/E5yIbb8XcS4wKtKjxrqi8Jth4ouPsSAZco6aN+kit0Y8aJSwfH/6unHODmFF3485bJ9EifjXnfRGht1cG4czjjDjSXq2zkmyJoo3s/LOl02Idn3+y/pLZTHpD0dpkVmWnN7On0qUE6IXbHRGQdPc5rQOINlbyfdNzA4vVOcWYcQFxefDmr2W68IwPCvE2jTHWNluRt8Bf86kIqtDPc1RpDOFFXt8AmUM/Fbn5KiySosbINRkhBtXO1BZm1DWbqEuvr6Aw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290105183,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290105183,"lang":2}; TAG START 1477290086049
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;SELECT product.*,trolley.qty AS trolley_qty FROM table_trolley trolley LEFT JOIN table_product product ON product.id=trolley.id_product WHERE trolley.id_user=${id_user};{"id_user":55}
DB:OK;SELECT store.*,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category LEFT JOIN table_store store ON store.id=category.id_store LEFT JOIN table_location_gps location ON location.id=store.id_location WHERE product.id=$1;"3"
[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"1"}]
{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.681350751547,"location_latitude":-6.3160017712992}
[ { "id": 5, "distance": 5000, "price": 5000 }, { "id": 4, "distance": 4000, "price": 4000 }, { "id": 3, "distance": 3000, "price": 3000 }, { "id": 2, "distance": 2000, "price": 2000 }, { "id": 1, "distance": 1000, "price": 1000 }, { "id": 6, "distance": 0, "price": 0 } ]
RESULT 200: {"trolley":[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"1"}],"store":{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.681350751547,"location_latitude":-6.3160017712992},"fee_delivery":[{"id":5,"distance":5000,"price":5000},{"id":4,"distance":4000,"price":4000},{"id":3,"distance":3000,"price":3000},{"id":2,"distance":2000,"price":2000},{"id":1,"distance":1000,"price":1000},{"id":6,"distance":0,"price":0}]}
[0mGET /api/trolley [32m200 [0m15.846 ms - 792[0m
API Cluster worker id: 2
REQUESTING PATH /token/update;POST;1477290089090
CHECKING API TOKEN EnZGYPEzP4m9CASxlO94UaVwKpJ59pDBuS03DjaAyITrm9RPobjJOryE07ju+Kjmyzhozlb6TKTsQTQl/E5yIbb8XcS4wKtKjxrqi8Jth4ouPsSAZco6aN+kit0Y8aJSwfH/6unHODmFF3485bJ9EifjXnfRGht1cG4czjjDjSXq2zkmyJoo3s/LOl02Idn3+y/pLZTHpD0dpkVmWnN7On0qUE6IXbHRGQdPc5rQOINlbyfdNzA4vVOcWYcQFxefDmr2W68IwPCvE2jTHWNluRt8Bf86kIqtDPc1RpDOFFXt8AmUM/Fbn5KiySosbINRkhBtXO1BZm1DWbqEuvr6Aw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290105183,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290105183,"lang":2}; TAG START 1477290089090
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_fcm
CHECKING imsi
CHECKING longitude
CHECKING latitude
IS_ERR false
DB:OK;SELECT device.id_location,usr.id_device FROM table_user usr LEFT JOIN table_device device ON device.id=usr.id_device WHERE usr.id=${id_user};{"token_fcm":"-","imsi":"-","longitude":"106.67463395744562","latitude":"-6.299352685094847","id_user":55}
DB:OK;SELECT id_location,(random()/10)-(random()/10)+${longitude} AS random_longitude,(random()/10)-(random()/10)+${latitude} AS random_latitude FROM table_store;{"token_fcm":"-","imsi":"-","longitude":"106.67463395744562","latitude":"-6.299352685094847","id_user":55,"id_location":"162","id_device":"25"}
RESULT 200: {"data":[{"id_location":"10","random_longitude":106.758543668082,"random_latitude":-6.33012120426915},{"id_location":"20","random_longitude":106.630916034151,"random_latitude":-6.31937731701232},{"id_location":"30","random_longitude":106.670378029346,"random_latitude":-6.34417486550569},{"id_location":"40","random_longitude":106.665396926412,"random_latitude":-6.37865118460081},{"id_location":"50","random_longitude":106.577390315663,"random_latitude":-6.34314002391234},{"id_location":"60","random_longitude":106.676901576202,"random_latitude":-6.33585008416608},{"id_location":"70","random_longitude":106.673569076648,"random_latitude":-6.25088951435223},{"id_location":"80","random_longitude":106.658110140124,"random_latitude":-6.31917344128065},{"id_location":"90","random_longitude":106.715386488987,"random_latitude":-6.29127209285557},{"id_location":"100","random_longitude":106.72029844257,"random_latitude":-6.30922203521527}]}
[0mPOST /api/token/update [32m200 [0m16.656 ms - 940[0m
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.758543668082 -6.33012120426915)') WHERE id=${id_location};{"id_location":"10","random_longitude":106.758543668082,"random_latitude":-6.33012120426915}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.630916034151 -6.31937731701232)') WHERE id=${id_location};{"id_location":"20","random_longitude":106.630916034151,"random_latitude":-6.31937731701232}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.670378029346 -6.34417486550569)') WHERE id=${id_location};{"id_location":"30","random_longitude":106.670378029346,"random_latitude":-6.34417486550569}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.665396926412 -6.37865118460081)') WHERE id=${id_location};{"id_location":"40","random_longitude":106.665396926412,"random_latitude":-6.37865118460081}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.72029844257 -6.30922203521527)') WHERE id=${id_location};{"id_location":"100","random_longitude":106.72029844257,"random_latitude":-6.30922203521527}
DB:OK;UPDATE table_device SET token_fcm=${token_fcm}, imsi=${imsi} WHERE id=${id_device};{"token_fcm":"-","imsi":"-","longitude":"106.67463395744562","latitude":"-6.299352685094847","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.67463395744562 -6.299352685094847)') WHERE id=${id_location};{"token_fcm":"-","imsi":"-","longitude":"106.67463395744562","latitude":"-6.299352685094847","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.715386488987 -6.29127209285557)') WHERE id=${id_location};{"id_location":"90","random_longitude":106.715386488987,"random_latitude":-6.29127209285557}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.676901576202 -6.33585008416608)') WHERE id=${id_location};{"id_location":"60","random_longitude":106.676901576202,"random_latitude":-6.33585008416608}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.673569076648 -6.25088951435223)') WHERE id=${id_location};{"id_location":"70","random_longitude":106.673569076648,"random_latitude":-6.25088951435223}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.658110140124 -6.31917344128065)') WHERE id=${id_location};{"id_location":"80","random_longitude":106.658110140124,"random_latitude":-6.31917344128065}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.577390315663 -6.34314002391234)') WHERE id=${id_location};{"id_location":"50","random_longitude":106.577390315663,"random_latitude":-6.34314002391234}
API Cluster worker id: 2
REQUESTING PATH /store/nearby;GET;1477290089295
CHECKING API TOKEN EnZGYPEzP4m9CASxlO94UaVwKpJ59pDBuS03DjaAyITrm9RPobjJOryE07ju+Kjmyzhozlb6TKTsQTQl/E5yIbb8XcS4wKtKjxrqi8Jth4ouPsSAZco6aN+kit0Y8aJSwfH/6unHODmFF3485bJ9EifjXnfRGht1cG4czjjDjSXq2zkmyJoo3s/LOl02Idn3+y/pLZTHpD0dpkVmWnN7On0qUE6IXbHRGQdPc5rQOINlbyfdNzA4vVOcWYcQFxefDmr2W68IwPCvE2jTHWNluRt8Bf86kIqtDPc1RpDOFFXt8AmUM/Fbn5KiySosbINRkhBtXO1BZm1DWbqEuvr6Aw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290105183,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290105183,"lang":2}; TAG START 1477290089295
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING longitude
CHECKING latitude
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT store.*,rating.counted AS rating,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude,ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67463395744562 -6.299352685094847)')) AS distance_db,${distance} AS distance_max_meter 
		FROM table_store grouping
		LEFT JOIN table_store store ON store.id=grouping.id
		LEFT JOIN table_location_gps location ON location.id=store.id_location
		LEFT JOIN (SELECT AVG(rating) AS counted, id_store FROM table_store_rating GROUP BY id_store) rating ON rating.id_store=store.id
		WHERE ST_DWithin(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67463395744562 -6.299352685094847)'), ${distance})
		ORDER BY ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67463395744562 -6.299352685094847)')) ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		;{"longitude":"106.67463395744562","latitude":"-6.299352685094847","distance":"3000","page_go":0,"page_max":null,"id_user":55}
PAGINATION DATA: [{"no":"1","total":"1","id":"8","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 8","address":"Store Address 8","phone":"Store Phone 8","is_delete":false,"id_location":"80","id_schedule":"8","rating":null,"location_longitude":106.658110140124,"location_latitude":-6.31917344128065,"distance_db":2854.373665244,"distance_max_meter":"3000","maxno":"1"}]
HALO {"store_nearby":[{"id":"8","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 8","address":"Store Address 8","phone":"Store Phone 8","is_delete":false,"id_location":"80","id_schedule":"8","rating":null,"location_longitude":106.658110140124,"location_latitude":-6.31917344128065,"distance_db":2854.373665244,"distance_max_meter":"3000"}],"pagination":{"page_go":"#"}}
ERR:null
DONE:{"status":200,"headers":{"content-type":"application/json; charset=UTF-8","date":"Mon, 24 Oct 2016 06:21:29 GMT","expires":"Tue, 25 Oct 2016 06:21:29 GMT","cache-control":"public, max-age=86400","server":"mafe","x-xss-protection":"1; mode=block","x-frame-options":"SAMEORIGIN","alt-svc":"quic=\":443\"; ma=2592000; v=\"36,35,34\"","accept-ranges":"none","vary":"Accept-Encoding","connection":"close"},"json":{"destination_addresses":["Jl. Anggrek Jingga I Blok Av No.18, Rw. Buntu, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia"],"origin_addresses":["Unnamed Road, Sampora, Cisauk, Tangerang, Banten 15345, Indonesia"],"rows":[{"elements":[{"distance":{"text":"5.5 km","value":5545},"duration":{"text":"16 mins","value":960},"status":"OK"}]}],"status":"OK"}}
ELEMENTS:[{"distance":{"text":"5.5 km","value":5545},"duration":{"text":"16 mins","value":960},"status":"OK"}]
RESULT 200: {"store_nearby":[{"id":"8","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 8","address":"Store Address 8","phone":"Store Phone 8","is_delete":false,"id_location":"80","id_schedule":"8","rating":null,"location_longitude":106.658110140124,"location_latitude":-6.31917344128065,"distance_db":2854.373665244,"distance_max_meter":"3000","distance_google":5545}],"pagination":{"page_go":"#"}}
[0mGET /api/store/nearby?longitude=106.67463395744562&latitude=-6.299352685094847 [32m200 [0m147.029 ms - 398[0m
API Cluster worker id: 2
REQUESTING PATH /token/update;POST;1477290091505
CHECKING API TOKEN EnZGYPEzP4m9CASxlO94UaVwKpJ59pDBuS03DjaAyITrm9RPobjJOryE07ju+Kjmyzhozlb6TKTsQTQl/E5yIbb8XcS4wKtKjxrqi8Jth4ouPsSAZco6aN+kit0Y8aJSwfH/6unHODmFF3485bJ9EifjXnfRGht1cG4czjjDjSXq2zkmyJoo3s/LOl02Idn3+y/pLZTHpD0dpkVmWnN7On0qUE6IXbHRGQdPc5rQOINlbyfdNzA4vVOcWYcQFxefDmr2W68IwPCvE2jTHWNluRt8Bf86kIqtDPc1RpDOFFXt8AmUM/Fbn5KiySosbINRkhBtXO1BZm1DWbqEuvr6Aw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290105183,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290105183,"lang":2}; TAG START 1477290091505
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_fcm
CHECKING imsi
CHECKING longitude
CHECKING latitude
IS_ERR false
DB:OK;SELECT device.id_location,usr.id_device FROM table_user usr LEFT JOIN table_device device ON device.id=usr.id_device WHERE usr.id=${id_user};{"token_fcm":"-","imsi":"-","longitude":"106.67957525700331","latitude":"-6.317103704625768","id_user":55}
DB:OK;SELECT id_location,(random()/10)-(random()/10)+${longitude} AS random_longitude,(random()/10)-(random()/10)+${latitude} AS random_latitude FROM table_store;{"token_fcm":"-","imsi":"-","longitude":"106.67957525700331","latitude":"-6.317103704625768","id_user":55,"id_location":"162","id_device":"25"}
RESULT 200: {"data":[{"id_location":"10","random_longitude":106.645122119039,"random_latitude":-6.27672756631116},{"id_location":"20","random_longitude":106.678206239501,"random_latitude":-6.35098362150791},{"id_location":"30","random_longitude":106.725201063557,"random_latitude":-6.34911559801738},{"id_location":"40","random_longitude":106.655779745802,"random_latitude":-6.31999647668752},{"id_location":"50","random_longitude":106.714301535953,"random_latitude":-6.31911559258777},{"id_location":"60","random_longitude":106.617246459238,"random_latitude":-6.3824380210154},{"id_location":"70","random_longitude":106.694333823584,"random_latitude":-6.27450821525606},{"id_location":"80","random_longitude":106.670470926538,"random_latitude":-6.38920651180859},{"id_location":"90","random_longitude":106.638079212513,"random_latitude":-6.31538519868816},{"id_location":"100","random_longitude":106.709841950377,"random_latitude":-6.31100669959749}]}
[0mPOST /api/token/update [32m200 [0m39.351 ms - 940[0m
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.645122119039 -6.27672756631116)') WHERE id=${id_location};{"id_location":"10","random_longitude":106.645122119039,"random_latitude":-6.27672756631116}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.678206239501 -6.35098362150791)') WHERE id=${id_location};{"id_location":"20","random_longitude":106.678206239501,"random_latitude":-6.35098362150791}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.725201063557 -6.34911559801738)') WHERE id=${id_location};{"id_location":"30","random_longitude":106.725201063557,"random_latitude":-6.34911559801738}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.655779745802 -6.31999647668752)') WHERE id=${id_location};{"id_location":"40","random_longitude":106.655779745802,"random_latitude":-6.31999647668752}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.714301535953 -6.31911559258777)') WHERE id=${id_location};{"id_location":"50","random_longitude":106.714301535953,"random_latitude":-6.31911559258777}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.617246459238 -6.3824380210154)') WHERE id=${id_location};{"id_location":"60","random_longitude":106.617246459238,"random_latitude":-6.3824380210154}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.694333823584 -6.27450821525606)') WHERE id=${id_location};{"id_location":"70","random_longitude":106.694333823584,"random_latitude":-6.27450821525606}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.670470926538 -6.38920651180859)') WHERE id=${id_location};{"id_location":"80","random_longitude":106.670470926538,"random_latitude":-6.38920651180859}
DB:OK;UPDATE table_device SET token_fcm=${token_fcm}, imsi=${imsi} WHERE id=${id_device};{"token_fcm":"-","imsi":"-","longitude":"106.67957525700331","latitude":"-6.317103704625768","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)') WHERE id=${id_location};{"token_fcm":"-","imsi":"-","longitude":"106.67957525700331","latitude":"-6.317103704625768","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.709841950377 -6.31100669959749)') WHERE id=${id_location};{"id_location":"100","random_longitude":106.709841950377,"random_latitude":-6.31100669959749}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.638079212513 -6.31538519868816)') WHERE id=${id_location};{"id_location":"90","random_longitude":106.638079212513,"random_latitude":-6.31538519868816}
API Cluster worker id: 2
REQUESTING PATH /store/nearby;GET;1477290091639
CHECKING API TOKEN EnZGYPEzP4m9CASxlO94UaVwKpJ59pDBuS03DjaAyITrm9RPobjJOryE07ju+Kjmyzhozlb6TKTsQTQl/E5yIbb8XcS4wKtKjxrqi8Jth4ouPsSAZco6aN+kit0Y8aJSwfH/6unHODmFF3485bJ9EifjXnfRGht1cG4czjjDjSXq2zkmyJoo3s/LOl02Idn3+y/pLZTHpD0dpkVmWnN7On0qUE6IXbHRGQdPc5rQOINlbyfdNzA4vVOcWYcQFxefDmr2W68IwPCvE2jTHWNluRt8Bf86kIqtDPc1RpDOFFXt8AmUM/Fbn5KiySosbINRkhBtXO1BZm1DWbqEuvr6Aw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290105183,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290105183,"lang":2}; TAG START 1477290091639
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING longitude
CHECKING latitude
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT store.*,rating.counted AS rating,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude,ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)')) AS distance_db,${distance} AS distance_max_meter 
		FROM table_store grouping
		LEFT JOIN table_store store ON store.id=grouping.id
		LEFT JOIN table_location_gps location ON location.id=store.id_location
		LEFT JOIN (SELECT AVG(rating) AS counted, id_store FROM table_store_rating GROUP BY id_store) rating ON rating.id_store=store.id
		WHERE ST_DWithin(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)'), ${distance})
		ORDER BY ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)')) ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		;{"longitude":"106.67957525700331","latitude":"-6.317103704625768","distance":"3000","page_go":0,"page_max":null,"id_user":55}
PAGINATION DATA: [{"no":"1","total":"1","id":"4","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 4","address":"Store Address 4","phone":"Store Phone 4","is_delete":false,"id_location":"40","id_schedule":"4","rating":null,"location_longitude":106.655779745802,"location_latitude":-6.31999647668752,"distance_db":2652.283193594,"distance_max_meter":"3000","maxno":"1"}]
HALO {"store_nearby":[{"id":"4","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 4","address":"Store Address 4","phone":"Store Phone 4","is_delete":false,"id_location":"40","id_schedule":"4","rating":null,"location_longitude":106.655779745802,"location_latitude":-6.31999647668752,"distance_db":2652.283193594,"distance_max_meter":"3000"}],"pagination":{"page_go":"#"}}
ERR:null
DONE:{"status":200,"headers":{"content-type":"application/json; charset=UTF-8","date":"Mon, 24 Oct 2016 06:21:31 GMT","expires":"Tue, 25 Oct 2016 06:21:31 GMT","cache-control":"public, max-age=86400","server":"mafe","x-xss-protection":"1; mode=block","x-frame-options":"SAMEORIGIN","alt-svc":"quic=\":443\"; ma=2592000; v=\"36,35,34\"","accept-ranges":"none","vary":"Accept-Encoding","connection":"close"},"json":{"destination_addresses":["Jl. Raya Rawa Buntu No.1, Rw. Buntu, Serpong, Kota Tangerang Selatan, Banten 15318, Indonesia"],"origin_addresses":["Sampora, Cisauk, Tangerang, Banten, Indonesia"],"rows":[{"elements":[{"distance":{"text":"7.0 km","value":7047},"duration":{"text":"17 mins","value":1002},"status":"OK"}]}],"status":"OK"}}
ELEMENTS:[{"distance":{"text":"7.0 km","value":7047},"duration":{"text":"17 mins","value":1002},"status":"OK"}]
RESULT 200: {"store_nearby":[{"id":"4","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 4","address":"Store Address 4","phone":"Store Phone 4","is_delete":false,"id_location":"40","id_schedule":"4","rating":null,"location_longitude":106.655779745802,"location_latitude":-6.31999647668752,"distance_db":2652.283193594,"distance_max_meter":"3000","distance_google":7047}],"pagination":{"page_go":"#"}}
[0mGET /api/store/nearby?longitude=106.67957525700331&latitude=-6.317103704625768 [32m200 [0m70.772 ms - 398[0m
API Cluster worker id: 2
REQUESTING PATH /location;PUT;1477290094236
CHECKING API TOKEN EnZGYPEzP4m9CASxlO94UaVwKpJ59pDBuS03DjaAyITrm9RPobjJOryE07ju+Kjmyzhozlb6TKTsQTQl/E5yIbb8XcS4wKtKjxrqi8Jth4ouPsSAZco6aN+kit0Y8aJSwfH/6unHODmFF3485bJ9EifjXnfRGht1cG4czjjDjSXq2zkmyJoo3s/LOl02Idn3+y/pLZTHpD0dpkVmWnN7On0qUE6IXbHRGQdPc5rQOINlbyfdNzA4vVOcWYcQFxefDmr2W68IwPCvE2jTHWNluRt8Bf86kIqtDPc1RpDOFFXt8AmUM/Fbn5KiySosbINRkhBtXO1BZm1DWbqEuvr6Aw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290105183,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290105183,"lang":2}; TAG START 1477290094236
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;PUT
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING address
CHECKING longitude
CHECKING latitude
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;INSERT INTO table_location_gps (name,id_user,geom_location) VALUES (${address},${id_user},ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)')) RETURNING id;{"address":"Jalan Raya Rawa Buntu No.1, Banten, Indonesia, 15318","latitude":"-6.317103704625768","longitude":"106.67957525700331","id_user":55}
RESULT 200: {"location":{"id":"165"}}
[0mPUT /api/location?address=Jalan%20Raya%20Rawa%20Buntu%20No.1,%20Banten,%20Indonesia,%2015318&latitude=-6.317103704625768&longitude=106.67957525700331 [32m200 [0m9.998 ms - 25[0m
API Cluster worker id: 2
REQUESTING PATH /location/history;GET;1477290094357
CHECKING API TOKEN EnZGYPEzP4m9CASxlO94UaVwKpJ59pDBuS03DjaAyITrm9RPobjJOryE07ju+Kjmyzhozlb6TKTsQTQl/E5yIbb8XcS4wKtKjxrqi8Jth4ouPsSAZco6aN+kit0Y8aJSwfH/6unHODmFF3485bJ9EifjXnfRGht1cG4czjjDjSXq2zkmyJoo3s/LOl02Idn3+y/pLZTHpD0dpkVmWnN7On0qUE6IXbHRGQdPc5rQOINlbyfdNzA4vVOcWYcQFxefDmr2W68IwPCvE2jTHWNluRt8Bf86kIqtDPc1RpDOFFXt8AmUM/Fbn5KiySosbINRkhBtXO1BZm1DWbqEuvr6Aw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290105183,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290105183,"lang":2}; TAG START 1477290094357
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;SELECT location.*, ST_X(location.geom_location::geometry) AS longitude, ST_Y(location.geom_location::geometry) AS latitude FROM table_location_history history LEFT JOIN table_location_gps location ON location.id=history.id_location WHERE history.id_user=${id_user} ORDER BY history.id DESC LIMIT 10 OFFSET 0;{"id_user":55}
RESULT 200: {"location_history":[]}
[0mGET /api/location/history [32m200 [0m11.670 ms - 23[0m
API Cluster worker id: 2
REQUESTING PATH /store/nearby/product;GET;1477290097984
CHECKING API TOKEN EnZGYPEzP4m9CASxlO94UaVwKpJ59pDBuS03DjaAyITrm9RPobjJOryE07ju+Kjmyzhozlb6TKTsQTQl/E5yIbb8XcS4wKtKjxrqi8Jth4ouPsSAZco6aN+kit0Y8aJSwfH/6unHODmFF3485bJ9EifjXnfRGht1cG4czjjDjSXq2zkmyJoo3s/LOl02Idn3+y/pLZTHpD0dpkVmWnN7On0qUE6IXbHRGQdPc5rQOINlbyfdNzA4vVOcWYcQFxefDmr2W68IwPCvE2jTHWNluRt8Bf86kIqtDPc1RpDOFFXt8AmUM/Fbn5KiySosbINRkhBtXO1BZm1DWbqEuvr6Aw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290105183,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290105183,"lang":2}; TAG START 1477290097984
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING search
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT store.*,rating.counted AS rating,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude,ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)')) AS distance_db,${distance} AS distance_max_meter 
		FROM 
		(SELECT 
		category.id_store AS id 
		FROM table_product_category category 
		LEFT JOIN table_product product ON product.id_category=category.id 
		WHERE to_tsvector(category.name || ' ' || category.description)@@to_tsquery('simple','genteng')
		OR to_tsvector(product.name || ' ' || product.description)@@to_tsquery('simple','genteng')
		GROUP BY category.id_store) grouping
		LEFT JOIN table_store store ON store.id=grouping.id
		LEFT JOIN table_location_gps location ON location.id=store.id_location
		LEFT JOIN (SELECT AVG(rating) AS counted, id_store FROM table_store_rating GROUP BY id_store) rating ON rating.id_store=store.id
		WHERE ST_DWithin(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)'), ${distance})
		ORDER BY ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)')) ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		LIMIT ${page_max} OFFSET 0;{"longitude":"106.67957525700331","latitude":"-6.317103704625768","search":"genteng","page_go":0,"distance":"3000","page_max":25,"id_user":55}
PAGINATION DATA: [{"no":"1","total":"1","id":"4","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 4","address":"Store Address 4","phone":"Store Phone 4","is_delete":false,"id_location":"40","id_schedule":"4","rating":null,"location_longitude":106.655779745802,"location_latitude":-6.31999647668752,"distance_db":2652.283193594,"distance_max_meter":"3000","maxno":"1"}]
Register search store 4
product query 
Full text search AND (to_tsvector(category.name || ' ' || category.description)@@to_tsquery('simple','genteng')
		OR to_tsvector(product.name || ' ' || product.description)@@to_tsquery('simple','genteng'))
HALO {"store_nearby":[{"id":"4","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 4","address":"Store Address 4","phone":"Store Phone 4","is_delete":false,"id_location":"40","id_schedule":"4","rating":null,"location_longitude":106.655779745802,"location_latitude":-6.31999647668752,"distance_db":2652.283193594,"distance_max_meter":"3000"}],"pagination":{"page_go":"#"}}
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT product.*,trolley.qty AS trolley_qty 
		FROM table_product_category category
		LEFT JOIN table_product product ON product.id_category=category.id
		LEFT JOIN (SELECT * FROM table_trolley WHERE id_user=55) trolley ON trolley.id_product=product.id
		WHERE category.id_store=4 AND (to_tsvector(category.name || ' ' || category.description)@@to_tsquery('simple','genteng')
		OR to_tsvector(product.name || ' ' || product.description)@@to_tsquery('simple','genteng')) 
		ORDER BY product.id ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		LIMIT ${page_max} OFFSET 0;{"longitude":"106.67957525700331","latitude":"-6.317103704625768","search":"genteng","page_go":0,"distance":"3000","page_max":25,"id_user":55}
PAGINATION DATA: [{"no":"1","total":"2","id":"26","id_category":"32","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"32","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null,"maxno":"2"},{"no":"2","total":"2","id":"34","id_category":"33","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"33","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null,"maxno":"2"}]
TERIMA DATA {"products":[{"id":"26","id_category":"32","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"32","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"34","id_category":"33","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"33","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null}],"pagination":{"page_go":"#"}}
ERR:null
DONE:{"status":200,"headers":{"content-type":"application/json; charset=UTF-8","date":"Mon, 24 Oct 2016 06:21:31 GMT","expires":"Tue, 25 Oct 2016 06:21:31 GMT","server":"mafe","x-xss-protection":"1; mode=block","x-frame-options":"SAMEORIGIN","cache-control":"public, max-age=86400","age":"6","alt-svc":"quic=\":443\"; ma=2592000; v=\"36,35,34\"","accept-ranges":"none","vary":"Accept-Encoding","connection":"close"},"json":{"destination_addresses":["Jl. Raya Rawa Buntu No.1, Rw. Buntu, Serpong, Kota Tangerang Selatan, Banten 15318, Indonesia"],"origin_addresses":["Sampora, Cisauk, Tangerang, Banten, Indonesia"],"rows":[{"elements":[{"distance":{"text":"7.0 km","value":7047},"duration":{"text":"17 mins","value":1002},"status":"OK"}]}],"status":"OK"}}
ELEMENTS:[{"distance":{"text":"7.0 km","value":7047},"duration":{"text":"17 mins","value":1002},"status":"OK"}]
RESULT 200: {"store_nearby":[{"id":"4","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 4","address":"Store Address 4","phone":"Store Phone 4","is_delete":false,"id_location":"40","id_schedule":"4","rating":null,"location_longitude":106.655779745802,"location_latitude":-6.31999647668752,"distance_db":2652.283193594,"distance_max_meter":"3000","products":[{"id":"26","id_category":"32","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"32","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"34","id_category":"33","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"33","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null}],"distance_google":7047}],"pagination":{"page_go":"#"}}
[0mGET /api/store/nearby/product?longitude=106.67957525700331&latitude=-6.317103704625768&search=genteng&page_go= [32m200 [0m46.604 ms - 1008[0m
API Cluster worker id: 2
REQUESTING PATH /trolley/26;PUT;1477290099304
CHECKING API TOKEN EnZGYPEzP4m9CASxlO94UaVwKpJ59pDBuS03DjaAyITrm9RPobjJOryE07ju+Kjmyzhozlb6TKTsQTQl/E5yIbb8XcS4wKtKjxrqi8Jth4ouPsSAZco6aN+kit0Y8aJSwfH/6unHODmFF3485bJ9EifjXnfRGht1cG4czjjDjSXq2zkmyJoo3s/LOl02Idn3+y/pLZTHpD0dpkVmWnN7On0qUE6IXbHRGQdPc5rQOINlbyfdNzA4vVOcWYcQFxefDmr2W68IwPCvE2jTHWNluRt8Bf86kIqtDPc1RpDOFFXt8AmUM/Fbn5KiySosbINRkhBtXO1BZm1DWbqEuvr6Aw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290105183,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290105183,"lang":2}; TAG START 1477290099304
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;PUT
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT 
		trolley.id 
		FROM table_trolley trolley
		LEFT JOIN table_product product ON product.id=trolley.id_product
		LEFT JOIN table_product_category category ON category.id=product.id_category
		LEFT JOIN (SELECT category.id_store FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category WHERE product.id=${id_product}) wtadd ON wtadd.id_store!=category.id_store
		WHERE trolley.id_user=${id_user} AND wtadd.id_store IS NOT NULL;{"id_product":"26","id_user":55}
RESULT 422: {"id":"Tidak bisa memasukkan barang dari toko berbeda. Silahkan kosongkan troli","en":"Unable add product from different store. Please empty the trolley","cn":"n/a"}
LANGUAGE: {"money_max_cashout":"10000000","is_discount_shipment":"TRUE","page_pagination":"25","key_googlemaps":"AIzaSyDnL8pHV_HPAmrSgzFuQm__trcIZ3atIqI","timer_auto_complete":"3","distance_max":"3000","language":"en","fee_delivery":"[ { \"id\": 5, \"distance\": 5000, \"price\": 5000 }, { \"id\": 4, \"distance\": 4000, \"price\": 4000 }, { \"id\": 3, \"distance\": 3000, \"price\": 3000 }, { \"id\": 2, \"distance\": 2000, \"price\": 2000 }, { \"id\": 1, \"distance\": 1000, \"price\": 1000 }, { \"id\": 6, \"distance\": 0, \"price\": 0 } ]","worker_special":"[1]","is_maintenance":"FALSE","time_max_delivery":"3","token_access_expire":"30000","money_max_topup":"10000000"}
[0mPUT /api/trolley/26 [33m422 [0m9.893 ms - 90[0m
API Cluster worker id: 2
REQUESTING PATH /trolley/34;PUT;1477290100885
CHECKING API TOKEN EnZGYPEzP4m9CASxlO94UaVwKpJ59pDBuS03DjaAyITrm9RPobjJOryE07ju+Kjmyzhozlb6TKTsQTQl/E5yIbb8XcS4wKtKjxrqi8Jth4ouPsSAZco6aN+kit0Y8aJSwfH/6unHODmFF3485bJ9EifjXnfRGht1cG4czjjDjSXq2zkmyJoo3s/LOl02Idn3+y/pLZTHpD0dpkVmWnN7On0qUE6IXbHRGQdPc5rQOINlbyfdNzA4vVOcWYcQFxefDmr2W68IwPCvE2jTHWNluRt8Bf86kIqtDPc1RpDOFFXt8AmUM/Fbn5KiySosbINRkhBtXO1BZm1DWbqEuvr6Aw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290105183,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290105183,"lang":2}; TAG START 1477290100885
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;PUT
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT 
		trolley.id 
		FROM table_trolley trolley
		LEFT JOIN table_product product ON product.id=trolley.id_product
		LEFT JOIN table_product_category category ON category.id=product.id_category
		LEFT JOIN (SELECT category.id_store FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category WHERE product.id=${id_product}) wtadd ON wtadd.id_store!=category.id_store
		WHERE trolley.id_user=${id_user} AND wtadd.id_store IS NOT NULL;{"id_product":"34","id_user":55}
RESULT 422: {"id":"Tidak bisa memasukkan barang dari toko berbeda. Silahkan kosongkan troli","en":"Unable add product from different store. Please empty the trolley","cn":"n/a"}
LANGUAGE: {"money_max_cashout":"10000000","is_discount_shipment":"TRUE","page_pagination":"25","key_googlemaps":"AIzaSyDnL8pHV_HPAmrSgzFuQm__trcIZ3atIqI","timer_auto_complete":"3","distance_max":"3000","language":"en","fee_delivery":"[ { \"id\": 5, \"distance\": 5000, \"price\": 5000 }, { \"id\": 4, \"distance\": 4000, \"price\": 4000 }, { \"id\": 3, \"distance\": 3000, \"price\": 3000 }, { \"id\": 2, \"distance\": 2000, \"price\": 2000 }, { \"id\": 1, \"distance\": 1000, \"price\": 1000 }, { \"id\": 6, \"distance\": 0, \"price\": 0 } ]","worker_special":"[1]","is_maintenance":"FALSE","time_max_delivery":"3","token_access_expire":"30000","money_max_topup":"10000000"}
[0mPUT /api/trolley/34 [33m422 [0m10.318 ms - 90[0m
API Cluster worker id: 2
REQUESTING PATH /trolley;GET;1477290102144
CHECKING API TOKEN EnZGYPEzP4m9CASxlO94UaVwKpJ59pDBuS03DjaAyITrm9RPobjJOryE07ju+Kjmyzhozlb6TKTsQTQl/E5yIbb8XcS4wKtKjxrqi8Jth4ouPsSAZco6aN+kit0Y8aJSwfH/6unHODmFF3485bJ9EifjXnfRGht1cG4czjjDjSXq2zkmyJoo3s/LOl02Idn3+y/pLZTHpD0dpkVmWnN7On0qUE6IXbHRGQdPc5rQOINlbyfdNzA4vVOcWYcQFxefDmr2W68IwPCvE2jTHWNluRt8Bf86kIqtDPc1RpDOFFXt8AmUM/Fbn5KiySosbINRkhBtXO1BZm1DWbqEuvr6Aw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290105183,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290105183,"lang":2}; TAG START 1477290102144
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;SELECT product.*,trolley.qty AS trolley_qty FROM table_trolley trolley LEFT JOIN table_product product ON product.id=trolley.id_product WHERE trolley.id_user=${id_user};{"id_user":55}
DB:OK;SELECT store.*,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category LEFT JOIN table_store store ON store.id=category.id_store LEFT JOIN table_location_gps location ON location.id=store.id_location WHERE product.id=$1;"3"
[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"1"}]
{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.714301535953,"location_latitude":-6.31911559258777}
[ { "id": 5, "distance": 5000, "price": 5000 }, { "id": 4, "distance": 4000, "price": 4000 }, { "id": 3, "distance": 3000, "price": 3000 }, { "id": 2, "distance": 2000, "price": 2000 }, { "id": 1, "distance": 1000, "price": 1000 }, { "id": 6, "distance": 0, "price": 0 } ]
RESULT 200: {"trolley":[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"1"}],"store":{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.714301535953,"location_latitude":-6.31911559258777},"fee_delivery":[{"id":5,"distance":5000,"price":5000},{"id":4,"distance":4000,"price":4000},{"id":3,"distance":3000,"price":3000},{"id":2,"distance":2000,"price":2000},{"id":1,"distance":1000,"price":1000},{"id":6,"distance":0,"price":0}]}
[0mGET /api/trolley [32m200 [0m14.394 ms - 793[0m
API Cluster worker id: 2
REQUESTING PATH /store/nearby/product;GET;1477290104459
CHECKING API TOKEN EnZGYPEzP4m9CASxlO94UaVwKpJ59pDBuS03DjaAyITrm9RPobjJOryE07ju+Kjmyzhozlb6TKTsQTQl/E5yIbb8XcS4wKtKjxrqi8Jth4ouPsSAZco6aN+kit0Y8aJSwfH/6unHODmFF3485bJ9EifjXnfRGht1cG4czjjDjSXq2zkmyJoo3s/LOl02Idn3+y/pLZTHpD0dpkVmWnN7On0qUE6IXbHRGQdPc5rQOINlbyfdNzA4vVOcWYcQFxefDmr2W68IwPCvE2jTHWNluRt8Bf86kIqtDPc1RpDOFFXt8AmUM/Fbn5KiySosbINRkhBtXO1BZm1DWbqEuvr6Aw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290105183,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290105183,"lang":2}; TAG START 1477290104459
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING search
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT store.*,rating.counted AS rating,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude,ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)')) AS distance_db,${distance} AS distance_max_meter 
		FROM 
		(SELECT 
		category.id_store AS id 
		FROM table_product_category category 
		LEFT JOIN table_product product ON product.id_category=category.id 
		WHERE to_tsvector(category.name || ' ' || category.description)@@to_tsquery('simple','genteng')
		OR to_tsvector(product.name || ' ' || product.description)@@to_tsquery('simple','genteng')
		GROUP BY category.id_store) grouping
		LEFT JOIN table_store store ON store.id=grouping.id
		LEFT JOIN table_location_gps location ON location.id=store.id_location
		LEFT JOIN (SELECT AVG(rating) AS counted, id_store FROM table_store_rating GROUP BY id_store) rating ON rating.id_store=store.id
		WHERE ST_DWithin(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)'), ${distance})
		ORDER BY ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)')) ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		LIMIT ${page_max} OFFSET 0;{"longitude":"106.67957525700331","latitude":"-6.317103704625768","search":"genteng","page_go":0,"distance":"3000","page_max":25,"id_user":55}
PAGINATION DATA: [{"no":"1","total":"1","id":"4","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 4","address":"Store Address 4","phone":"Store Phone 4","is_delete":false,"id_location":"40","id_schedule":"4","rating":null,"location_longitude":106.655779745802,"location_latitude":-6.31999647668752,"distance_db":2652.283193594,"distance_max_meter":"3000","maxno":"1"}]
Register search store 4
product query 
Full text search AND (to_tsvector(category.name || ' ' || category.description)@@to_tsquery('simple','genteng')
		OR to_tsvector(product.name || ' ' || product.description)@@to_tsquery('simple','genteng'))
HALO {"store_nearby":[{"id":"4","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 4","address":"Store Address 4","phone":"Store Phone 4","is_delete":false,"id_location":"40","id_schedule":"4","rating":null,"location_longitude":106.655779745802,"location_latitude":-6.31999647668752,"distance_db":2652.283193594,"distance_max_meter":"3000"}],"pagination":{"page_go":"#"}}
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT product.*,trolley.qty AS trolley_qty 
		FROM table_product_category category
		LEFT JOIN table_product product ON product.id_category=category.id
		LEFT JOIN (SELECT * FROM table_trolley WHERE id_user=55) trolley ON trolley.id_product=product.id
		WHERE category.id_store=4 AND (to_tsvector(category.name || ' ' || category.description)@@to_tsquery('simple','genteng')
		OR to_tsvector(product.name || ' ' || product.description)@@to_tsquery('simple','genteng')) 
		ORDER BY product.id ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		LIMIT ${page_max} OFFSET 0;{"longitude":"106.67957525700331","latitude":"-6.317103704625768","search":"genteng","page_go":0,"distance":"3000","page_max":25,"id_user":55}
PAGINATION DATA: [{"no":"1","total":"2","id":"26","id_category":"32","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"32","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null,"maxno":"2"},{"no":"2","total":"2","id":"34","id_category":"33","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"33","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null,"maxno":"2"}]
TERIMA DATA {"products":[{"id":"26","id_category":"32","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"32","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"34","id_category":"33","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"33","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null}],"pagination":{"page_go":"#"}}
ERR:null
DONE:{"status":200,"headers":{"content-type":"application/json; charset=UTF-8","date":"Mon, 24 Oct 2016 06:21:31 GMT","expires":"Tue, 25 Oct 2016 06:21:31 GMT","server":"mafe","x-xss-protection":"1; mode=block","x-frame-options":"SAMEORIGIN","cache-control":"public, max-age=86400","age":"13","alt-svc":"quic=\":443\"; ma=2592000; v=\"36,35,34,33,32\"","accept-ranges":"none","vary":"Accept-Encoding","connection":"close"},"json":{"destination_addresses":["Jl. Raya Rawa Buntu No.1, Rw. Buntu, Serpong, Kota Tangerang Selatan, Banten 15318, Indonesia"],"origin_addresses":["Sampora, Cisauk, Tangerang, Banten, Indonesia"],"rows":[{"elements":[{"distance":{"text":"7.0 km","value":7047},"duration":{"text":"17 mins","value":1002},"status":"OK"}]}],"status":"OK"}}
ELEMENTS:[{"distance":{"text":"7.0 km","value":7047},"duration":{"text":"17 mins","value":1002},"status":"OK"}]
RESULT 200: {"store_nearby":[{"id":"4","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 4","address":"Store Address 4","phone":"Store Phone 4","is_delete":false,"id_location":"40","id_schedule":"4","rating":null,"location_longitude":106.655779745802,"location_latitude":-6.31999647668752,"distance_db":2652.283193594,"distance_max_meter":"3000","products":[{"id":"26","id_category":"32","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"32","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"34","id_category":"33","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"33","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null}],"distance_google":7047}],"pagination":{"page_go":"#"}}
[0mGET /api/store/nearby/product?longitude=106.67957525700331&latitude=-6.317103704625768&search=genteng&page_go= [32m200 [0m32.755 ms - 1008[0m
API Cluster worker id: 2
REQUESTING PATH /location/history;GET;1477290109954
CHECKING API TOKEN EnZGYPEzP4m9CASxlO94UaVwKpJ59pDBuS03DjaAyITrm9RPobjJOryE07ju+Kjmyzhozlb6TKTsQTQl/E5yIbb8XcS4wKtKjxrqi8Jth4ouPsSAZco6aN+kit0Y8aJSwfH/6unHODmFF3485bJ9EifjXnfRGht1cG4czjjDjSXq2zkmyJoo3s/LOl02Idn3+y/pLZTHpD0dpkVmWnN7On0qUE6IXbHRGQdPc5rQOINlbyfdNzA4vVOcWYcQFxefDmr2W68IwPCvE2jTHWNluRt8Bf86kIqtDPc1RpDOFFXt8AmUM/Fbn5KiySosbINRkhBtXO1BZm1DWbqEuvr6Aw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290105183,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290105183,"lang":2}; TAG START 1477290109954
TOKEN EXPIRED
PAGE NOT IN EXPIRED TOKEN
RESULT 403.
[0mGET /api/location/history [33m403 [0m4.420 ms - 2[0m
API Cluster worker id: 2
REQUESTING PATH /token/renew;POST;1477290110086
CHECKING API TOKEN EnZGYPEzP4m9CASxlO94UaVwKpJ59pDBuS03DjaAyITrm9RPobjJOryE07ju+Kjmyzhozlb6TKTsQTQl/E5yIbb8XcS4wKtKjxrqi8Jth4ouPsSAZco6aN+kit0Y8aJSwfH/6unHODmFF3485bJ9EifjXnfRGht1cG4czjjDjSXq2zkmyJoo3s/LOl02Idn3+y/pLZTHpD0dpkVmWnN7On0qUE6IXbHRGQdPc5rQOINlbyfdNzA4vVOcWYcQFxefDmr2W68IwPCvE2jTHWNluRt8Bf86kIqtDPc1RpDOFFXt8AmUM/Fbn5KiySosbINRkhBtXO1BZm1DWbqEuvr6Aw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290105183,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290105183,"lang":2}; TAG START 1477290110086
TOKEN EXPIRED
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:POST;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_session
IS_ERR false
NO COOKIES
COOKIES NOT AVAILABLE
DB:OK;SELECT token_session FROM table_user WHERE id=$1;55
TOKEN SESSION 
mpsxf+l+bSzMprQ8wY6E/wIM6lWrCfbUurm0iqfgbX7dEt0K0ngvvDbhjn/EPr5i6ScQ4S4qPlgvOA1MPPtL613mla1aaAhQ8v6Vn1vkuTk1ke9xl5y8prcOy15kl4wdC+h+63iQlSl/nr/tL6YGa6LgaT/6M7FKJYac6dAvpvtOR1tNKg/qvqyUFC09d+x362kp6yDZwsAFmV3IO6+wtkITdpSU0MXX1J39Ujo1txH45PZ2LB5vYXkT9xKIVhlO/jGWIi7vPiY5MXDrQTWsmes2Jc3xynJfSMdwg0DehAFEUnv7k91pahQlx6cTNQPGa+Hv1XFFf7w10xznDr7hfA==
mpsxf+l+bSzMprQ8wY6E/wIM6lWrCfbUurm0iqfgbX7dEt0K0ngvvDbhjn/EPr5i6ScQ4S4qPlgvOA1MPPtL613mla1aaAhQ8v6Vn1vkuTk1ke9xl5y8prcOy15kl4wdC+h+63iQlSl/nr/tL6YGa6LgaT/6M7FKJYac6dAvpvtOR1tNKg/qvqyUFC09d+x362kp6yDZwsAFmV3IO6+wtkITdpSU0MXX1J39Ujo1txH45PZ2LB5vYXkT9xKIVhlO/jGWIi7vPiY5MXDrQTWsmes2Jc3xynJfSMdwg0DehAFEUnv7k91pahQlx6cTNQPGa+Hv1XFFf7w10xznDr7hfA==
CREATE TOKEN 1477290110086;30000
DB:OK;UPDATE table_user SET token_session=${token_session}, token_access=${token_access} WHERE id=${id_user} RETURNING token_session,token_access;{"token_access":"r8Ug/2p85muFvGMC8WphWEZnRvHM3MI22UCwc4tCyvSmpDKEnYYKFwb9nVeG3LlSj7uZqg+kHUQVMA/fzn6xJeqyEKz2ARLgYuIiJazlqQgiTowVKrysIlz8FY+deNvphRntPIwDIqgEDjRCQvuh8ujD8NrYvYc7yzk39R0QtZytYnQxSF1Me8X+Ob7tghJy+EUSpbLTHe2Xh8cZx+2p81z31eUQIOiPlipMgU2ynMHjJpRAmmCfMC0/eP/Njf0P/dgOyQCEwf2WNNnhV3gUXGx9NKkTsu9WnS4Aj6mOowh0fYDvLIL9n8+gDPeb0L8g34kZksLGlV4EjkQIxFfMKQ==","token_session":"UniMiyc7CjPwZerTlQccY1G9fQloLgljM5/hfftzQV4UoYqnaBQxk7tuF+DfxdltzB0vNMgsq6uX5dp0msq2dvw4NfCdIf9ysOScdO3AbaFltUxLRuF+ty5TZD5J375LxDhJtqRhlU2ZbrsO73b6o+co6KPP2Be7GVxHMdCUWXvQJMlBUnxaEXT2yM4sOIgx+xmEEhqkWHmjLNdZEXexfoAKQ3+WBGTQvpc0JgQ4Y1ASEqrrbCckfN0A8qI4mPImX2YzENPyR9oBmL3YWZ2VHUlV8js0b4iSW23sf1dMz8HlNKt0LX50ln/ozrHJ9DRvLIpgjZ/UinkZmD2H81i4cg==","id_user":55}
RESULT 200: {"token":{"token_access":"r8Ug/2p85muFvGMC8WphWEZnRvHM3MI22UCwc4tCyvSmpDKEnYYKFwb9nVeG3LlSj7uZqg+kHUQVMA/fzn6xJeqyEKz2ARLgYuIiJazlqQgiTowVKrysIlz8FY+deNvphRntPIwDIqgEDjRCQvuh8ujD8NrYvYc7yzk39R0QtZytYnQxSF1Me8X+Ob7tghJy+EUSpbLTHe2Xh8cZx+2p81z31eUQIOiPlipMgU2ynMHjJpRAmmCfMC0/eP/Njf0P/dgOyQCEwf2WNNnhV3gUXGx9NKkTsu9WnS4Aj6mOowh0fYDvLIL9n8+gDPeb0L8g34kZksLGlV4EjkQIxFfMKQ==","token_session":"UniMiyc7CjPwZerTlQccY1G9fQloLgljM5/hfftzQV4UoYqnaBQxk7tuF+DfxdltzB0vNMgsq6uX5dp0msq2dvw4NfCdIf9ysOScdO3AbaFltUxLRuF+ty5TZD5J375LxDhJtqRhlU2ZbrsO73b6o+co6KPP2Be7GVxHMdCUWXvQJMlBUnxaEXT2yM4sOIgx+xmEEhqkWHmjLNdZEXexfoAKQ3+WBGTQvpc0JgQ4Y1ASEqrrbCckfN0A8qI4mPImX2YzENPyR9oBmL3YWZ2VHUlV8js0b4iSW23sf1dMz8HlNKt0LX50ln/ozrHJ9DRvLIpgjZ/UinkZmD2H81i4cg=="}}
API END token renew /
[0mPOST /api/token/renew [32m200 [0m22.661 ms - 736[0m
API Cluster worker id: 2
REQUESTING PATH /token/update;POST;1477290110184
CHECKING API TOKEN EnZGYPEzP4m9CASxlO94UaVwKpJ59pDBuS03DjaAyITrm9RPobjJOryE07ju+Kjmyzhozlb6TKTsQTQl/E5yIbb8XcS4wKtKjxrqi8Jth4ouPsSAZco6aN+kit0Y8aJSwfH/6unHODmFF3485bJ9EifjXnfRGht1cG4czjjDjSXq2zkmyJoo3s/LOl02Idn3+y/pLZTHpD0dpkVmWnN7On0qUE6IXbHRGQdPc5rQOINlbyfdNzA4vVOcWYcQFxefDmr2W68IwPCvE2jTHWNluRt8Bf86kIqtDPc1RpDOFFXt8AmUM/Fbn5KiySosbINRkhBtXO1BZm1DWbqEuvr6Aw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290105183,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290105183,"lang":2}; TAG START 1477290110184
TOKEN EXPIRED
PAGE NOT IN EXPIRED TOKEN
RESULT 403.
[0mPOST /api/token/update [33m403 [0m4.018 ms - 2[0m
API Cluster worker id: 2
REQUESTING PATH /location/history;GET;1477290110344
CHECKING API TOKEN r8Ug/2p85muFvGMC8WphWEZnRvHM3MI22UCwc4tCyvSmpDKEnYYKFwb9nVeG3LlSj7uZqg+kHUQVMA/fzn6xJeqyEKz2ARLgYuIiJazlqQgiTowVKrysIlz8FY+deNvphRntPIwDIqgEDjRCQvuh8ujD8NrYvYc7yzk39R0QtZytYnQxSF1Me8X+Ob7tghJy+EUSpbLTHe2Xh8cZx+2p81z31eUQIOiPlipMgU2ynMHjJpRAmmCfMC0/eP/Njf0P/dgOyQCEwf2WNNnhV3gUXGx9NKkTsu9WnS4Aj6mOowh0fYDvLIL9n8+gDPeb0L8g34kZksLGlV4EjkQIxFfMKQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290140086,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290140086,"lang":2}; TAG START 1477290110344
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;SELECT location.*, ST_X(location.geom_location::geometry) AS longitude, ST_Y(location.geom_location::geometry) AS latitude FROM table_location_history history LEFT JOIN table_location_gps location ON location.id=history.id_location WHERE history.id_user=${id_user} ORDER BY history.id DESC LIMIT 10 OFFSET 0;{"id_user":55}
RESULT 200: {"location_history":[]}
[0mGET /api/location/history [32m200 [0m6.729 ms - 23[0m
API Cluster worker id: 2
REQUESTING PATH /token/renew;POST;1477290110398
CHECKING API TOKEN r8Ug/2p85muFvGMC8WphWEZnRvHM3MI22UCwc4tCyvSmpDKEnYYKFwb9nVeG3LlSj7uZqg+kHUQVMA/fzn6xJeqyEKz2ARLgYuIiJazlqQgiTowVKrysIlz8FY+deNvphRntPIwDIqgEDjRCQvuh8ujD8NrYvYc7yzk39R0QtZytYnQxSF1Me8X+Ob7tghJy+EUSpbLTHe2Xh8cZx+2p81z31eUQIOiPlipMgU2ynMHjJpRAmmCfMC0/eP/Njf0P/dgOyQCEwf2WNNnhV3gUXGx9NKkTsu9WnS4Aj6mOowh0fYDvLIL9n8+gDPeb0L8g34kZksLGlV4EjkQIxFfMKQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290140086,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290140086,"lang":2}; TAG START 1477290110398
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:POST;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_session
IS_ERR false
NO COOKIES
COOKIES NOT AVAILABLE
DB:OK;SELECT token_session FROM table_user WHERE id=$1;55
TOKEN SESSION 
UniMiyc7CjPwZerTlQccY1G9fQloLgljM5/hfftzQV4UoYqnaBQxk7tuF+DfxdltzB0vNMgsq6uX5dp0msq2dvw4NfCdIf9ysOScdO3AbaFltUxLRuF+ty5TZD5J375LxDhJtqRhlU2ZbrsO73b6o+co6KPP2Be7GVxHMdCUWXvQJMlBUnxaEXT2yM4sOIgx+xmEEhqkWHmjLNdZEXexfoAKQ3+WBGTQvpc0JgQ4Y1ASEqrrbCckfN0A8qI4mPImX2YzENPyR9oBmL3YWZ2VHUlV8js0b4iSW23sf1dMz8HlNKt0LX50ln/ozrHJ9DRvLIpgjZ/UinkZmD2H81i4cg==
UniMiyc7CjPwZerTlQccY1G9fQloLgljM5/hfftzQV4UoYqnaBQxk7tuF+DfxdltzB0vNMgsq6uX5dp0msq2dvw4NfCdIf9ysOScdO3AbaFltUxLRuF+ty5TZD5J375LxDhJtqRhlU2ZbrsO73b6o+co6KPP2Be7GVxHMdCUWXvQJMlBUnxaEXT2yM4sOIgx+xmEEhqkWHmjLNdZEXexfoAKQ3+WBGTQvpc0JgQ4Y1ASEqrrbCckfN0A8qI4mPImX2YzENPyR9oBmL3YWZ2VHUlV8js0b4iSW23sf1dMz8HlNKt0LX50ln/ozrHJ9DRvLIpgjZ/UinkZmD2H81i4cg==
CREATE TOKEN 1477290110398;30000
DB:OK;UPDATE table_user SET token_session=${token_session}, token_access=${token_access} WHERE id=${id_user} RETURNING token_session,token_access;{"token_access":"GIzopV/tSnBGsRpdIeK9bGgpCgxqa40biHFaxlGYRY4if+Pr97QUK8yuNpm4qggivaBl8O6ryqg3x6e7Q7T7YQDBlxiGPJbkQR/5Los5FV5tEu062hwfSINUB49IMk1gPtJOPK5ROBIGyZo84FJ0pP1rDu3pHP1c3MtDJFH12rY+DHXTBSr5zF7tOl/DQNSnF+QaAGMFZnmUHmHl2HBo7GFRmSLt6kPStUiQR2XR/PK10Xee5G6v/DmQN215Z4HwXqhXlsWQ9LKDM8B47D6sUxJH81pyL66cYdyAfRKVmssROwT5avB6e49gTDo/SbkEqmS56IIrpuI/WNLMiJ1Jfw==","token_session":"t2ggKr4ag/NJvZsVuJh2OSfjOA7NrRhHhRGU/xDT6R5sR+T1g4KDJnDAqAnxRTmKxIbtP82mVgissK2c5Q0J0nCuTK58RjMe1/TQr0amJJfOWVNGHZy6VWbVPYJ5hxmL19iktqrY5EOe3Mi2XOISlV8tC5jIn8YAFvJBEIAhwKWiM5C8nVeiePyvErAvor/8mfHZXyA2Yvj8rWVqDF7Pz1+E8Y5cKsQViBZYsXQVVUOC74f+7dd/cDL+zkxFX30b6XxXthODD0xJWd5ucPlua/IpnbDRnfZUxizFPCIewVzrvwhDsW0G4MBzRdcoOc9QrBoqOXVut55Lol83VahW1g==","id_user":55}
RESULT 200: {"token":{"token_access":"GIzopV/tSnBGsRpdIeK9bGgpCgxqa40biHFaxlGYRY4if+Pr97QUK8yuNpm4qggivaBl8O6ryqg3x6e7Q7T7YQDBlxiGPJbkQR/5Los5FV5tEu062hwfSINUB49IMk1gPtJOPK5ROBIGyZo84FJ0pP1rDu3pHP1c3MtDJFH12rY+DHXTBSr5zF7tOl/DQNSnF+QaAGMFZnmUHmHl2HBo7GFRmSLt6kPStUiQR2XR/PK10Xee5G6v/DmQN215Z4HwXqhXlsWQ9LKDM8B47D6sUxJH81pyL66cYdyAfRKVmssROwT5avB6e49gTDo/SbkEqmS56IIrpuI/WNLMiJ1Jfw==","token_session":"t2ggKr4ag/NJvZsVuJh2OSfjOA7NrRhHhRGU/xDT6R5sR+T1g4KDJnDAqAnxRTmKxIbtP82mVgissK2c5Q0J0nCuTK58RjMe1/TQr0amJJfOWVNGHZy6VWbVPYJ5hxmL19iktqrY5EOe3Mi2XOISlV8tC5jIn8YAFvJBEIAhwKWiM5C8nVeiePyvErAvor/8mfHZXyA2Yvj8rWVqDF7Pz1+E8Y5cKsQViBZYsXQVVUOC74f+7dd/cDL+zkxFX30b6XxXthODD0xJWd5ucPlua/IpnbDRnfZUxizFPCIewVzrvwhDsW0G4MBzRdcoOc9QrBoqOXVut55Lol83VahW1g=="}}
API END token renew /
[0mPOST /api/token/renew [32m200 [0m19.637 ms - 736[0m
API Cluster worker id: 2
REQUESTING PATH /token/update;POST;1477290110577
CHECKING API TOKEN GIzopV/tSnBGsRpdIeK9bGgpCgxqa40biHFaxlGYRY4if+Pr97QUK8yuNpm4qggivaBl8O6ryqg3x6e7Q7T7YQDBlxiGPJbkQR/5Los5FV5tEu062hwfSINUB49IMk1gPtJOPK5ROBIGyZo84FJ0pP1rDu3pHP1c3MtDJFH12rY+DHXTBSr5zF7tOl/DQNSnF+QaAGMFZnmUHmHl2HBo7GFRmSLt6kPStUiQR2XR/PK10Xee5G6v/DmQN215Z4HwXqhXlsWQ9LKDM8B47D6sUxJH81pyL66cYdyAfRKVmssROwT5avB6e49gTDo/SbkEqmS56IIrpuI/WNLMiJ1Jfw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290140398,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290140398,"lang":2}; TAG START 1477290110577
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_fcm
CHECKING imsi
CHECKING longitude
CHECKING latitude
IS_ERR false
DB:OK;SELECT device.id_location,usr.id_device FROM table_user usr LEFT JOIN table_device device ON device.id=usr.id_device WHERE usr.id=${id_user};{"token_fcm":"-","imsi":"-","longitude":"106.67463395744562","latitude":"-6.299352685094847","id_user":55}
DB:OK;SELECT id_location,(random()/10)-(random()/10)+${longitude} AS random_longitude,(random()/10)-(random()/10)+${latitude} AS random_latitude FROM table_store;{"token_fcm":"-","imsi":"-","longitude":"106.67463395744562","latitude":"-6.299352685094847","id_user":55,"id_location":"162","id_device":"25"}
RESULT 200: {"data":[{"id_location":"10","random_longitude":106.720743757812,"random_latitude":-6.26258704314291},{"id_location":"20","random_longitude":106.736270797672,"random_latitude":-6.20712289890557},{"id_location":"30","random_longitude":106.745508706477,"random_latitude":-6.29706960158706},{"id_location":"40","random_longitude":106.694365277328,"random_latitude":-6.22735126569219},{"id_location":"50","random_longitude":106.636397177726,"random_latitude":-6.31533752196751},{"id_location":"60","random_longitude":106.599464241741,"random_latitude":-6.26288799910158},{"id_location":"70","random_longitude":106.687647674978,"random_latitude":-6.33171631685741},{"id_location":"80","random_longitude":106.640295243869,"random_latitude":-6.29439140550144},{"id_location":"90","random_longitude":106.678898881469,"random_latitude":-6.31871514470599},{"id_location":"100","random_longitude":106.635232255002,"random_latitude":-6.22046014225393}]}
[0mPOST /api/token/update [32m200 [0m19.080 ms - 941[0m
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.635232255002 -6.22046014225393)') WHERE id=${id_location};{"id_location":"100","random_longitude":106.635232255002,"random_latitude":-6.22046014225393}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.720743757812 -6.26258704314291)') WHERE id=${id_location};{"id_location":"10","random_longitude":106.720743757812,"random_latitude":-6.26258704314291}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.736270797672 -6.20712289890557)') WHERE id=${id_location};{"id_location":"20","random_longitude":106.736270797672,"random_latitude":-6.20712289890557}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.745508706477 -6.29706960158706)') WHERE id=${id_location};{"id_location":"30","random_longitude":106.745508706477,"random_latitude":-6.29706960158706}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.694365277328 -6.22735126569219)') WHERE id=${id_location};{"id_location":"40","random_longitude":106.694365277328,"random_latitude":-6.22735126569219}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.636397177726 -6.31533752196751)') WHERE id=${id_location};{"id_location":"50","random_longitude":106.636397177726,"random_latitude":-6.31533752196751}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.599464241741 -6.26288799910158)') WHERE id=${id_location};{"id_location":"60","random_longitude":106.599464241741,"random_latitude":-6.26288799910158}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.687647674978 -6.33171631685741)') WHERE id=${id_location};{"id_location":"70","random_longitude":106.687647674978,"random_latitude":-6.33171631685741}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.640295243869 -6.29439140550144)') WHERE id=${id_location};{"id_location":"80","random_longitude":106.640295243869,"random_latitude":-6.29439140550144}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.678898881469 -6.31871514470599)') WHERE id=${id_location};{"id_location":"90","random_longitude":106.678898881469,"random_latitude":-6.31871514470599}
DB:OK;UPDATE table_device SET token_fcm=${token_fcm}, imsi=${imsi} WHERE id=${id_device};{"token_fcm":"-","imsi":"-","longitude":"106.67463395744562","latitude":"-6.299352685094847","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.67463395744562 -6.299352685094847)') WHERE id=${id_location};{"token_fcm":"-","imsi":"-","longitude":"106.67463395744562","latitude":"-6.299352685094847","id_user":55,"id_location":"162","id_device":"25"}
API Cluster worker id: 2
REQUESTING PATH /store/nearby;GET;1477290110650
CHECKING API TOKEN GIzopV/tSnBGsRpdIeK9bGgpCgxqa40biHFaxlGYRY4if+Pr97QUK8yuNpm4qggivaBl8O6ryqg3x6e7Q7T7YQDBlxiGPJbkQR/5Los5FV5tEu062hwfSINUB49IMk1gPtJOPK5ROBIGyZo84FJ0pP1rDu3pHP1c3MtDJFH12rY+DHXTBSr5zF7tOl/DQNSnF+QaAGMFZnmUHmHl2HBo7GFRmSLt6kPStUiQR2XR/PK10Xee5G6v/DmQN215Z4HwXqhXlsWQ9LKDM8B47D6sUxJH81pyL66cYdyAfRKVmssROwT5avB6e49gTDo/SbkEqmS56IIrpuI/WNLMiJ1Jfw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290140398,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290140398,"lang":2}; TAG START 1477290110650
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING longitude
CHECKING latitude
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT store.*,rating.counted AS rating,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude,ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67463395744562 -6.299352685094847)')) AS distance_db,${distance} AS distance_max_meter 
		FROM table_store grouping
		LEFT JOIN table_store store ON store.id=grouping.id
		LEFT JOIN table_location_gps location ON location.id=store.id_location
		LEFT JOIN (SELECT AVG(rating) AS counted, id_store FROM table_store_rating GROUP BY id_store) rating ON rating.id_store=store.id
		WHERE ST_DWithin(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67463395744562 -6.299352685094847)'), ${distance})
		ORDER BY ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67463395744562 -6.299352685094847)')) ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		;{"longitude":"106.67463395744562","latitude":"-6.299352685094847","distance":"3000","page_go":0,"page_max":null,"id_user":55}
PAGINATION DATA: [{"no":"1","total":"1","id":"9","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 9","address":"Store Address 9","phone":"Store Phone 9","is_delete":false,"id_location":"90","id_schedule":"9","rating":null,"location_longitude":106.678898881469,"location_latitude":-6.31871514470599,"distance_db":2192.63576484,"distance_max_meter":"3000","maxno":"1"}]
HALO {"store_nearby":[{"id":"9","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 9","address":"Store Address 9","phone":"Store Phone 9","is_delete":false,"id_location":"90","id_schedule":"9","rating":null,"location_longitude":106.678898881469,"location_latitude":-6.31871514470599,"distance_db":2192.63576484,"distance_max_meter":"3000"}],"pagination":{"page_go":"#"}}
ERR:null
DONE:{"status":200,"headers":{"content-type":"application/json; charset=UTF-8","date":"Mon, 24 Oct 2016 06:21:50 GMT","expires":"Tue, 25 Oct 2016 06:21:50 GMT","cache-control":"public, max-age=86400","server":"mafe","x-xss-protection":"1; mode=block","x-frame-options":"SAMEORIGIN","alt-svc":"quic=\":443\"; ma=2592000; v=\"36,35,34\"","accept-ranges":"none","vary":"Accept-Encoding","connection":"close"},"json":{"destination_addresses":["Jl. Anggrek Jingga I Blok Av No.18, Rw. Buntu, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia"],"origin_addresses":["Jl. De Latinos, Rw. Buntu, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia"],"rows":[{"elements":[{"distance":{"text":"4.8 km","value":4761},"duration":{"text":"13 mins","value":770},"status":"OK"}]}],"status":"OK"}}
ELEMENTS:[{"distance":{"text":"4.8 km","value":4761},"duration":{"text":"13 mins","value":770},"status":"OK"}]
RESULT 200: {"store_nearby":[{"id":"9","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 9","address":"Store Address 9","phone":"Store Phone 9","is_delete":false,"id_location":"90","id_schedule":"9","rating":null,"location_longitude":106.678898881469,"location_latitude":-6.31871514470599,"distance_db":2192.63576484,"distance_max_meter":"3000","distance_google":4761}],"pagination":{"page_go":"#"}}
[0mGET /api/store/nearby?longitude=106.67463395744562&latitude=-6.299352685094847 [32m200 [0m64.219 ms - 397[0m
API Cluster worker id: 2
REQUESTING PATH /token/update;POST;1477290112815
CHECKING API TOKEN GIzopV/tSnBGsRpdIeK9bGgpCgxqa40biHFaxlGYRY4if+Pr97QUK8yuNpm4qggivaBl8O6ryqg3x6e7Q7T7YQDBlxiGPJbkQR/5Los5FV5tEu062hwfSINUB49IMk1gPtJOPK5ROBIGyZo84FJ0pP1rDu3pHP1c3MtDJFH12rY+DHXTBSr5zF7tOl/DQNSnF+QaAGMFZnmUHmHl2HBo7GFRmSLt6kPStUiQR2XR/PK10Xee5G6v/DmQN215Z4HwXqhXlsWQ9LKDM8B47D6sUxJH81pyL66cYdyAfRKVmssROwT5avB6e49gTDo/SbkEqmS56IIrpuI/WNLMiJ1Jfw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290140398,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290140398,"lang":2}; TAG START 1477290112815
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_fcm
CHECKING imsi
CHECKING longitude
CHECKING latitude
IS_ERR false
DB:OK;SELECT device.id_location,usr.id_device FROM table_user usr LEFT JOIN table_device device ON device.id=usr.id_device WHERE usr.id=${id_user};{"token_fcm":"-","imsi":"-","longitude":"106.67957525700331","latitude":"-6.317103704625768","id_user":55}
DB:OK;SELECT id_location,(random()/10)-(random()/10)+${longitude} AS random_longitude,(random()/10)-(random()/10)+${latitude} AS random_latitude FROM table_store;{"token_fcm":"-","imsi":"-","longitude":"106.67957525700331","latitude":"-6.317103704625768","id_user":55,"id_location":"162","id_device":"25"}
RESULT 200: {"data":[{"id_location":"10","random_longitude":106.75984959756,"random_latitude":-6.32628740379776},{"id_location":"20","random_longitude":106.685590685764,"random_latitude":-6.28706351388435},{"id_location":"30","random_longitude":106.691545149963,"random_latitude":-6.27820026041198},{"id_location":"40","random_longitude":106.625307811145,"random_latitude":-6.26403826927024},{"id_location":"50","random_longitude":106.677089996543,"random_latitude":-6.29240591372552},{"id_location":"60","random_longitude":106.653949248139,"random_latitude":-6.29239657293263},{"id_location":"70","random_longitude":106.660562656401,"random_latitude":-6.28953564199808},{"id_location":"80","random_longitude":106.671419167193,"random_latitude":-6.31014457619938},{"id_location":"90","random_longitude":106.584947669413,"random_latitude":-6.24170112414475},{"id_location":"100","random_longitude":106.612180617265,"random_latitude":-6.2816383620743}]}
[0mPOST /api/token/update [32m200 [0m11.301 ms - 939[0m
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.612180617265 -6.2816383620743)') WHERE id=${id_location};{"id_location":"100","random_longitude":106.612180617265,"random_latitude":-6.2816383620743}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.75984959756 -6.32628740379776)') WHERE id=${id_location};{"id_location":"10","random_longitude":106.75984959756,"random_latitude":-6.32628740379776}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.685590685764 -6.28706351388435)') WHERE id=${id_location};{"id_location":"20","random_longitude":106.685590685764,"random_latitude":-6.28706351388435}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.677089996543 -6.29240591372552)') WHERE id=${id_location};{"id_location":"50","random_longitude":106.677089996543,"random_latitude":-6.29240591372552}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.653949248139 -6.29239657293263)') WHERE id=${id_location};{"id_location":"60","random_longitude":106.653949248139,"random_latitude":-6.29239657293263}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.625307811145 -6.26403826927024)') WHERE id=${id_location};{"id_location":"40","random_longitude":106.625307811145,"random_latitude":-6.26403826927024}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.691545149963 -6.27820026041198)') WHERE id=${id_location};{"id_location":"30","random_longitude":106.691545149963,"random_latitude":-6.27820026041198}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.671419167193 -6.31014457619938)') WHERE id=${id_location};{"id_location":"80","random_longitude":106.671419167193,"random_latitude":-6.31014457619938}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.584947669413 -6.24170112414475)') WHERE id=${id_location};{"id_location":"90","random_longitude":106.584947669413,"random_latitude":-6.24170112414475}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.660562656401 -6.28953564199808)') WHERE id=${id_location};{"id_location":"70","random_longitude":106.660562656401,"random_latitude":-6.28953564199808}
DB:OK;UPDATE table_device SET token_fcm=${token_fcm}, imsi=${imsi} WHERE id=${id_device};{"token_fcm":"-","imsi":"-","longitude":"106.67957525700331","latitude":"-6.317103704625768","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)') WHERE id=${id_location};{"token_fcm":"-","imsi":"-","longitude":"106.67957525700331","latitude":"-6.317103704625768","id_user":55,"id_location":"162","id_device":"25"}
API Cluster worker id: 2
REQUESTING PATH /store/nearby;GET;1477290112895
CHECKING API TOKEN GIzopV/tSnBGsRpdIeK9bGgpCgxqa40biHFaxlGYRY4if+Pr97QUK8yuNpm4qggivaBl8O6ryqg3x6e7Q7T7YQDBlxiGPJbkQR/5Los5FV5tEu062hwfSINUB49IMk1gPtJOPK5ROBIGyZo84FJ0pP1rDu3pHP1c3MtDJFH12rY+DHXTBSr5zF7tOl/DQNSnF+QaAGMFZnmUHmHl2HBo7GFRmSLt6kPStUiQR2XR/PK10Xee5G6v/DmQN215Z4HwXqhXlsWQ9LKDM8B47D6sUxJH81pyL66cYdyAfRKVmssROwT5avB6e49gTDo/SbkEqmS56IIrpuI/WNLMiJ1Jfw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290140398,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290140398,"lang":2}; TAG START 1477290112895
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING longitude
CHECKING latitude
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT store.*,rating.counted AS rating,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude,ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)')) AS distance_db,${distance} AS distance_max_meter 
		FROM table_store grouping
		LEFT JOIN table_store store ON store.id=grouping.id
		LEFT JOIN table_location_gps location ON location.id=store.id_location
		LEFT JOIN (SELECT AVG(rating) AS counted, id_store FROM table_store_rating GROUP BY id_store) rating ON rating.id_store=store.id
		WHERE ST_DWithin(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)'), ${distance})
		ORDER BY ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)')) ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		;{"longitude":"106.67957525700331","latitude":"-6.317103704625768","distance":"3000","page_go":0,"page_max":null,"id_user":55}
PAGINATION DATA: [{"no":"1","total":"2","id":"8","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 8","address":"Store Address 8","phone":"Store Phone 8","is_delete":false,"id_location":"80","id_schedule":"8","rating":null,"location_longitude":106.671419167193,"location_latitude":-6.31014457619938,"distance_db":1186.048826623,"distance_max_meter":"3000","maxno":"2"},{"no":"2","total":"2","id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","rating":null,"location_longitude":106.677089996543,"location_latitude":-6.29240591372552,"distance_db":2745.080041475,"distance_max_meter":"3000","maxno":"2"}]
HALO {"store_nearby":[{"id":"8","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 8","address":"Store Address 8","phone":"Store Phone 8","is_delete":false,"id_location":"80","id_schedule":"8","rating":null,"location_longitude":106.671419167193,"location_latitude":-6.31014457619938,"distance_db":1186.048826623,"distance_max_meter":"3000"},{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","rating":null,"location_longitude":106.677089996543,"location_latitude":-6.29240591372552,"distance_db":2745.080041475,"distance_max_meter":"3000"}],"pagination":{"page_go":"#"}}
ERR:null
DONE:{"status":200,"headers":{"content-type":"application/json; charset=UTF-8","date":"Mon, 24 Oct 2016 06:21:52 GMT","expires":"Tue, 25 Oct 2016 06:21:52 GMT","cache-control":"public, max-age=86400","server":"mafe","x-xss-protection":"1; mode=block","x-frame-options":"SAMEORIGIN","alt-svc":"quic=\":443\"; ma=2592000; v=\"36,35,34\"","accept-ranges":"none","vary":"Accept-Encoding","connection":"close"},"json":{"destination_addresses":["Jl. Raya Rawa Buntu No.1, Rw. Buntu, Serpong, Kota Tangerang Selatan, Banten 15318, Indonesia"],"origin_addresses":["Jl. Cilenggang I No.3, Cilenggang, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia","Jl. Kasturi Blok B2 No.40, Lengkong Gudang Tim., Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia"],"rows":[{"elements":[{"distance":{"text":"2.2 km","value":2210},"duration":{"text":"5 mins","value":312},"status":"OK"}]},{"elements":[{"distance":{"text":"4.5 km","value":4539},"duration":{"text":"10 mins","value":608},"status":"OK"}]}],"status":"OK"}}
ELEMENTS:[{"distance":{"text":"2.2 km","value":2210},"duration":{"text":"5 mins","value":312},"status":"OK"}]
RESULT 200: {"store_nearby":[{"id":"8","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 8","address":"Store Address 8","phone":"Store Phone 8","is_delete":false,"id_location":"80","id_schedule":"8","rating":null,"location_longitude":106.671419167193,"location_latitude":-6.31014457619938,"distance_db":1186.048826623,"distance_max_meter":"3000","distance_google":2210},{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","rating":null,"location_longitude":106.677089996543,"location_latitude":-6.29240591372552,"distance_db":2745.080041475,"distance_max_meter":"3000","distance_google":4539}],"pagination":{"page_go":"#"}}
[0mGET /api/store/nearby?longitude=106.67957525700331&latitude=-6.317103704625768 [32m200 [0m75.335 ms - 749[0m
API Cluster worker id: 2
REQUESTING PATH /token/update;POST;1477290114424
CHECKING API TOKEN GIzopV/tSnBGsRpdIeK9bGgpCgxqa40biHFaxlGYRY4if+Pr97QUK8yuNpm4qggivaBl8O6ryqg3x6e7Q7T7YQDBlxiGPJbkQR/5Los5FV5tEu062hwfSINUB49IMk1gPtJOPK5ROBIGyZo84FJ0pP1rDu3pHP1c3MtDJFH12rY+DHXTBSr5zF7tOl/DQNSnF+QaAGMFZnmUHmHl2HBo7GFRmSLt6kPStUiQR2XR/PK10Xee5G6v/DmQN215Z4HwXqhXlsWQ9LKDM8B47D6sUxJH81pyL66cYdyAfRKVmssROwT5avB6e49gTDo/SbkEqmS56IIrpuI/WNLMiJ1Jfw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290140398,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290140398,"lang":2}; TAG START 1477290114424
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_fcm
CHECKING imsi
CHECKING longitude
CHECKING latitude
IS_ERR false
DB:OK;SELECT device.id_location,usr.id_device FROM table_user usr LEFT JOIN table_device device ON device.id=usr.id_device WHERE usr.id=${id_user};{"token_fcm":"-","imsi":"-","longitude":"106.67760618031026","latitude":"-6.314511087963012","id_user":55}
DB:OK;SELECT id_location,(random()/10)-(random()/10)+${longitude} AS random_longitude,(random()/10)-(random()/10)+${latitude} AS random_latitude FROM table_store;{"token_fcm":"-","imsi":"-","longitude":"106.67760618031026","latitude":"-6.314511087963012","id_user":55,"id_location":"162","id_device":"25"}
RESULT 200: {"data":[{"id_location":"10","random_longitude":106.713583364571,"random_latitude":-6.29290979528579},{"id_location":"20","random_longitude":106.716319045983,"random_latitude":-6.29212417458895},{"id_location":"30","random_longitude":106.683391179843,"random_latitude":-6.33807763979549},{"id_location":"40","random_longitude":106.626572279958,"random_latitude":-6.27454277696799},{"id_location":"50","random_longitude":106.671546087461,"random_latitude":-6.26834052378091},{"id_location":"60","random_longitude":106.634130692296,"random_latitude":-6.34313880755345},{"id_location":"70","random_longitude":106.670464945678,"random_latitude":-6.2878198877048},{"id_location":"80","random_longitude":106.702483327687,"random_latitude":-6.32958097840439},{"id_location":"90","random_longitude":106.664365549851,"random_latitude":-6.39794825213741},{"id_location":"100","random_longitude":106.677740294579,"random_latitude":-6.28856276679563}]}
[0mPOST /api/token/update [32m200 [0m11.071 ms - 940[0m
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.713583364571 -6.29290979528579)') WHERE id=${id_location};{"id_location":"10","random_longitude":106.713583364571,"random_latitude":-6.29290979528579}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.716319045983 -6.29212417458895)') WHERE id=${id_location};{"id_location":"20","random_longitude":106.716319045983,"random_latitude":-6.29212417458895}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.683391179843 -6.33807763979549)') WHERE id=${id_location};{"id_location":"30","random_longitude":106.683391179843,"random_latitude":-6.33807763979549}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.626572279958 -6.27454277696799)') WHERE id=${id_location};{"id_location":"40","random_longitude":106.626572279958,"random_latitude":-6.27454277696799}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.671546087461 -6.26834052378091)') WHERE id=${id_location};{"id_location":"50","random_longitude":106.671546087461,"random_latitude":-6.26834052378091}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.634130692296 -6.34313880755345)') WHERE id=${id_location};{"id_location":"60","random_longitude":106.634130692296,"random_latitude":-6.34313880755345}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.670464945678 -6.2878198877048)') WHERE id=${id_location};{"id_location":"70","random_longitude":106.670464945678,"random_latitude":-6.2878198877048}
DB:OK;UPDATE table_device SET token_fcm=${token_fcm}, imsi=${imsi} WHERE id=${id_device};{"token_fcm":"-","imsi":"-","longitude":"106.67760618031026","latitude":"-6.314511087963012","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.67760618031026 -6.314511087963012)') WHERE id=${id_location};{"token_fcm":"-","imsi":"-","longitude":"106.67760618031026","latitude":"-6.314511087963012","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.702483327687 -6.32958097840439)') WHERE id=${id_location};{"id_location":"80","random_longitude":106.702483327687,"random_latitude":-6.32958097840439}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.677740294579 -6.28856276679563)') WHERE id=${id_location};{"id_location":"100","random_longitude":106.677740294579,"random_latitude":-6.28856276679563}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.664365549851 -6.39794825213741)') WHERE id=${id_location};{"id_location":"90","random_longitude":106.664365549851,"random_latitude":-6.39794825213741}
API Cluster worker id: 2
REQUESTING PATH /store/nearby;GET;1477290114520
CHECKING API TOKEN GIzopV/tSnBGsRpdIeK9bGgpCgxqa40biHFaxlGYRY4if+Pr97QUK8yuNpm4qggivaBl8O6ryqg3x6e7Q7T7YQDBlxiGPJbkQR/5Los5FV5tEu062hwfSINUB49IMk1gPtJOPK5ROBIGyZo84FJ0pP1rDu3pHP1c3MtDJFH12rY+DHXTBSr5zF7tOl/DQNSnF+QaAGMFZnmUHmHl2HBo7GFRmSLt6kPStUiQR2XR/PK10Xee5G6v/DmQN215Z4HwXqhXlsWQ9LKDM8B47D6sUxJH81pyL66cYdyAfRKVmssROwT5avB6e49gTDo/SbkEqmS56IIrpuI/WNLMiJ1Jfw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290140398,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290140398,"lang":2}; TAG START 1477290114520
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING longitude
CHECKING latitude
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT store.*,rating.counted AS rating,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude,ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67760618031026 -6.314511087963012)')) AS distance_db,${distance} AS distance_max_meter 
		FROM table_store grouping
		LEFT JOIN table_store store ON store.id=grouping.id
		LEFT JOIN table_location_gps location ON location.id=store.id_location
		LEFT JOIN (SELECT AVG(rating) AS counted, id_store FROM table_store_rating GROUP BY id_store) rating ON rating.id_store=store.id
		WHERE ST_DWithin(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67760618031026 -6.314511087963012)'), ${distance})
		ORDER BY ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67760618031026 -6.314511087963012)')) ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		;{"longitude":"106.67760618031026","latitude":"-6.314511087963012","distance":"3000","page_go":0,"page_max":null,"id_user":55}
PAGINATION DATA: [{"no":"1","total":"2","id":"3","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 3","address":"Store Address 3","phone":"Store Phone 3","is_delete":false,"id_location":"30","id_schedule":"3","rating":null,"location_longitude":106.683391179843,"location_latitude":-6.33807763979549,"distance_db":2683.62544141,"distance_max_meter":"3000","maxno":"2"},{"no":"2","total":"2","id":"10","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 10","address":"Store Address 10","phone":"Store Phone 10","is_delete":false,"id_location":"100","id_schedule":"10","rating":null,"location_longitude":106.677740294579,"location_latitude":-6.28856276679563,"distance_db":2869.602334386,"distance_max_meter":"3000","maxno":"2"}]
HALO {"store_nearby":[{"id":"3","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 3","address":"Store Address 3","phone":"Store Phone 3","is_delete":false,"id_location":"30","id_schedule":"3","rating":null,"location_longitude":106.683391179843,"location_latitude":-6.33807763979549,"distance_db":2683.62544141,"distance_max_meter":"3000"},{"id":"10","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 10","address":"Store Address 10","phone":"Store Phone 10","is_delete":false,"id_location":"100","id_schedule":"10","rating":null,"location_longitude":106.677740294579,"location_latitude":-6.28856276679563,"distance_db":2869.602334386,"distance_max_meter":"3000"}],"pagination":{"page_go":"#"}}
ERR:null
DONE:{"status":200,"headers":{"content-type":"application/json; charset=UTF-8","date":"Mon, 24 Oct 2016 06:21:54 GMT","expires":"Tue, 25 Oct 2016 06:21:54 GMT","cache-control":"public, max-age=86400","server":"mafe","x-xss-protection":"1; mode=block","x-frame-options":"SAMEORIGIN","alt-svc":"quic=\":443\"; ma=2592000; v=\"36,35,34\"","accept-ranges":"none","vary":"Accept-Encoding","connection":"close"},"json":{"destination_addresses":["Jl. Kapten Soebijanto Djojohadikusumo No.27, Cilenggang, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia"],"origin_addresses":["Jl. Niban'rimin Blok Niban Rimin No.11, Buaran, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia","Jl. Taman Kerinci 1 Blok C No.18, Lengkong Gudang Tim., Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia"],"rows":[{"elements":[{"distance":{"text":"3.7 km","value":3701},"duration":{"text":"11 mins","value":676},"status":"OK"}]},{"elements":[{"distance":{"text":"5.2 km","value":5244},"duration":{"text":"12 mins","value":746},"status":"OK"}]}],"status":"OK"}}
ELEMENTS:[{"distance":{"text":"3.7 km","value":3701},"duration":{"text":"11 mins","value":676},"status":"OK"}]
RESULT 200: {"store_nearby":[{"id":"3","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 3","address":"Store Address 3","phone":"Store Phone 3","is_delete":false,"id_location":"30","id_schedule":"3","rating":null,"location_longitude":106.683391179843,"location_latitude":-6.33807763979549,"distance_db":2683.62544141,"distance_max_meter":"3000","distance_google":3701},{"id":"10","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 10","address":"Store Address 10","phone":"Store Phone 10","is_delete":false,"id_location":"100","id_schedule":"10","rating":null,"location_longitude":106.677740294579,"location_latitude":-6.28856276679563,"distance_db":2869.602334386,"distance_max_meter":"3000","distance_google":5244}],"pagination":{"page_go":"#"}}
[0mGET /api/store/nearby?longitude=106.67760618031026&latitude=-6.314511087963012 [32m200 [0m90.150 ms - 754[0m
API Cluster worker id: 2
REQUESTING PATH /token/update;POST;1477290115357
CHECKING API TOKEN GIzopV/tSnBGsRpdIeK9bGgpCgxqa40biHFaxlGYRY4if+Pr97QUK8yuNpm4qggivaBl8O6ryqg3x6e7Q7T7YQDBlxiGPJbkQR/5Los5FV5tEu062hwfSINUB49IMk1gPtJOPK5ROBIGyZo84FJ0pP1rDu3pHP1c3MtDJFH12rY+DHXTBSr5zF7tOl/DQNSnF+QaAGMFZnmUHmHl2HBo7GFRmSLt6kPStUiQR2XR/PK10Xee5G6v/DmQN215Z4HwXqhXlsWQ9LKDM8B47D6sUxJH81pyL66cYdyAfRKVmssROwT5avB6e49gTDo/SbkEqmS56IIrpuI/WNLMiJ1Jfw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290140398,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290140398,"lang":2}; TAG START 1477290115357
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_fcm
CHECKING imsi
CHECKING longitude
CHECKING latitude
IS_ERR false
DB:OK;SELECT device.id_location,usr.id_device FROM table_user usr LEFT JOIN table_device device ON device.id=usr.id_device WHERE usr.id=${id_user};{"token_fcm":"-","imsi":"-","longitude":"106.67569041252138","latitude":"-6.308646994400069","id_user":55}
DB:OK;SELECT id_location,(random()/10)-(random()/10)+${longitude} AS random_longitude,(random()/10)-(random()/10)+${latitude} AS random_latitude FROM table_store;{"token_fcm":"-","imsi":"-","longitude":"106.67569041252138","latitude":"-6.308646994400069","id_user":55,"id_location":"162","id_device":"25"}
RESULT 200: {"data":[{"id_location":"10","random_longitude":106.692322997097,"random_latitude":-6.26506345098768},{"id_location":"20","random_longitude":106.676786833257,"random_latitude":-6.31258288136613},{"id_location":"30","random_longitude":106.688278744835,"random_latitude":-6.34015717440215},{"id_location":"40","random_longitude":106.653818884213,"random_latitude":-6.28832505605114},{"id_location":"50","random_longitude":106.686207728228,"random_latitude":-6.26336778461863},{"id_location":"60","random_longitude":106.614054308878,"random_latitude":-6.3507914776348},{"id_location":"70","random_longitude":106.717140146252,"random_latitude":-6.25464420447987},{"id_location":"80","random_longitude":106.703103024373,"random_latitude":-6.36103806732152},{"id_location":"90","random_longitude":106.70987531906,"random_latitude":-6.37176472464506},{"id_location":"100","random_longitude":106.70757365441,"random_latitude":-6.23754296748829}]}
[0mPOST /api/token/update [32m200 [0m14.160 ms - 938[0m
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.692322997097 -6.26506345098768)') WHERE id=${id_location};{"id_location":"10","random_longitude":106.692322997097,"random_latitude":-6.26506345098768}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.676786833257 -6.31258288136613)') WHERE id=${id_location};{"id_location":"20","random_longitude":106.676786833257,"random_latitude":-6.31258288136613}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.688278744835 -6.34015717440215)') WHERE id=${id_location};{"id_location":"30","random_longitude":106.688278744835,"random_latitude":-6.34015717440215}
DB:OK;UPDATE table_device SET token_fcm=${token_fcm}, imsi=${imsi} WHERE id=${id_device};{"token_fcm":"-","imsi":"-","longitude":"106.67569041252138","latitude":"-6.308646994400069","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.653818884213 -6.28832505605114)') WHERE id=${id_location};{"id_location":"40","random_longitude":106.653818884213,"random_latitude":-6.28832505605114}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.70987531906 -6.37176472464506)') WHERE id=${id_location};{"id_location":"90","random_longitude":106.70987531906,"random_latitude":-6.37176472464506}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.70757365441 -6.23754296748829)') WHERE id=${id_location};{"id_location":"100","random_longitude":106.70757365441,"random_latitude":-6.23754296748829}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.717140146252 -6.25464420447987)') WHERE id=${id_location};{"id_location":"70","random_longitude":106.717140146252,"random_latitude":-6.25464420447987}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.703103024373 -6.36103806732152)') WHERE id=${id_location};{"id_location":"80","random_longitude":106.703103024373,"random_latitude":-6.36103806732152}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.614054308878 -6.3507914776348)') WHERE id=${id_location};{"id_location":"60","random_longitude":106.614054308878,"random_latitude":-6.3507914776348}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.686207728228 -6.26336778461863)') WHERE id=${id_location};{"id_location":"50","random_longitude":106.686207728228,"random_latitude":-6.26336778461863}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.67569041252138 -6.308646994400069)') WHERE id=${id_location};{"token_fcm":"-","imsi":"-","longitude":"106.67569041252138","latitude":"-6.308646994400069","id_user":55,"id_location":"162","id_device":"25"}
API Cluster worker id: 2
REQUESTING PATH /store/nearby;GET;1477290115424
CHECKING API TOKEN GIzopV/tSnBGsRpdIeK9bGgpCgxqa40biHFaxlGYRY4if+Pr97QUK8yuNpm4qggivaBl8O6ryqg3x6e7Q7T7YQDBlxiGPJbkQR/5Los5FV5tEu062hwfSINUB49IMk1gPtJOPK5ROBIGyZo84FJ0pP1rDu3pHP1c3MtDJFH12rY+DHXTBSr5zF7tOl/DQNSnF+QaAGMFZnmUHmHl2HBo7GFRmSLt6kPStUiQR2XR/PK10Xee5G6v/DmQN215Z4HwXqhXlsWQ9LKDM8B47D6sUxJH81pyL66cYdyAfRKVmssROwT5avB6e49gTDo/SbkEqmS56IIrpuI/WNLMiJ1Jfw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290140398,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290140398,"lang":2}; TAG START 1477290115424
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING longitude
CHECKING latitude
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT store.*,rating.counted AS rating,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude,ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67569041252138 -6.308646994400069)')) AS distance_db,${distance} AS distance_max_meter 
		FROM table_store grouping
		LEFT JOIN table_store store ON store.id=grouping.id
		LEFT JOIN table_location_gps location ON location.id=store.id_location
		LEFT JOIN (SELECT AVG(rating) AS counted, id_store FROM table_store_rating GROUP BY id_store) rating ON rating.id_store=store.id
		WHERE ST_DWithin(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67569041252138 -6.308646994400069)'), ${distance})
		ORDER BY ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67569041252138 -6.308646994400069)')) ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		;{"longitude":"106.67569041252138","latitude":"-6.308646994400069","distance":"3000","page_go":0,"page_max":null,"id_user":55}
PAGINATION DATA: [{"no":"1","total":"1","id":"2","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 2","address":"Store Address 2","phone":"Store Phone 2","is_delete":false,"id_location":"20","id_schedule":"2","rating":null,"location_longitude":106.676786833257,"location_latitude":-6.31258288136613,"distance_db":451.851721838,"distance_max_meter":"3000","maxno":"1"}]
HALO {"store_nearby":[{"id":"2","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 2","address":"Store Address 2","phone":"Store Phone 2","is_delete":false,"id_location":"20","id_schedule":"2","rating":null,"location_longitude":106.676786833257,"location_latitude":-6.31258288136613,"distance_db":451.851721838,"distance_max_meter":"3000"}],"pagination":{"page_go":"#"}}
ERR:null
DONE:{"status":200,"headers":{"content-type":"application/json; charset=UTF-8","date":"Mon, 24 Oct 2016 06:21:55 GMT","expires":"Tue, 25 Oct 2016 06:21:55 GMT","cache-control":"public, max-age=86400","server":"mafe","x-xss-protection":"1; mode=block","x-frame-options":"SAMEORIGIN","alt-svc":"quic=\":443\"; ma=2592000; v=\"36,35,34\"","accept-ranges":"none","vary":"Accept-Encoding","connection":"close"},"json":{"destination_addresses":["Jl. Wortel IV Blok E3 No.17, Rw. Buntu, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia"],"origin_addresses":["Jl. Kapten Soebijanto Djojohadikusumo, Rw. Buntu, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia"],"rows":[{"elements":[{"distance":{"text":"15.0 km","value":14959},"duration":{"text":"16 mins","value":975},"status":"OK"}]}],"status":"OK"}}
ELEMENTS:[{"distance":{"text":"15.0 km","value":14959},"duration":{"text":"16 mins","value":975},"status":"OK"}]
RESULT 200: {"store_nearby":[{"id":"2","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 2","address":"Store Address 2","phone":"Store Phone 2","is_delete":false,"id_location":"20","id_schedule":"2","rating":null,"location_longitude":106.676786833257,"location_latitude":-6.31258288136613,"distance_db":451.851721838,"distance_max_meter":"3000","distance_google":14959}],"pagination":{"page_go":"#"}}
[0mGET /api/store/nearby?longitude=106.67569041252138&latitude=-6.308646994400069 [32m200 [0m76.130 ms - 398[0m
API Cluster worker id: 2
REQUESTING PATH /token/update;POST;1477290117089
CHECKING API TOKEN GIzopV/tSnBGsRpdIeK9bGgpCgxqa40biHFaxlGYRY4if+Pr97QUK8yuNpm4qggivaBl8O6ryqg3x6e7Q7T7YQDBlxiGPJbkQR/5Los5FV5tEu062hwfSINUB49IMk1gPtJOPK5ROBIGyZo84FJ0pP1rDu3pHP1c3MtDJFH12rY+DHXTBSr5zF7tOl/DQNSnF+QaAGMFZnmUHmHl2HBo7GFRmSLt6kPStUiQR2XR/PK10Xee5G6v/DmQN215Z4HwXqhXlsWQ9LKDM8B47D6sUxJH81pyL66cYdyAfRKVmssROwT5avB6e49gTDo/SbkEqmS56IIrpuI/WNLMiJ1Jfw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290140398,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290140398,"lang":2}; TAG START 1477290117089
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_fcm
CHECKING imsi
CHECKING longitude
CHECKING latitude
IS_ERR false
DB:OK;SELECT device.id_location,usr.id_device FROM table_user usr LEFT JOIN table_device device ON device.id=usr.id_device WHERE usr.id=${id_user};{"token_fcm":"-","imsi":"-","longitude":"106.67763736099005","latitude":"-6.299125074068939","id_user":55}
DB:OK;SELECT id_location,(random()/10)-(random()/10)+${longitude} AS random_longitude,(random()/10)-(random()/10)+${latitude} AS random_latitude FROM table_store;{"token_fcm":"-","imsi":"-","longitude":"106.67763736099005","latitude":"-6.299125074068939","id_user":55,"id_location":"162","id_device":"25"}
RESULT 200: {"data":[{"id_location":"10","random_longitude":106.611279253941,"random_latitude":-6.28887607984703},{"id_location":"20","random_longitude":106.601886750432,"random_latitude":-6.26350777385283},{"id_location":"30","random_longitude":106.730471446179,"random_latitude":-6.32476838215712},{"id_location":"40","random_longitude":106.646440965822,"random_latitude":-6.2663286090688},{"id_location":"50","random_longitude":106.699067029776,"random_latitude":-6.3526916715176},{"id_location":"60","random_longitude":106.679478561832,"random_latitude":-6.35169391449068},{"id_location":"70","random_longitude":106.70747499424,"random_latitude":-6.27825211871873},{"id_location":"80","random_longitude":106.692531324876,"random_latitude":-6.23626130571115},{"id_location":"90","random_longitude":106.653899875563,"random_latitude":-6.35832937973078},{"id_location":"100","random_longitude":106.74989504097,"random_latitude":-6.309752402394}]}
[0mPOST /api/token/update [32m200 [0m10.341 ms - 935[0m
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.611279253941 -6.28887607984703)') WHERE id=${id_location};{"id_location":"10","random_longitude":106.611279253941,"random_latitude":-6.28887607984703}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.601886750432 -6.26350777385283)') WHERE id=${id_location};{"id_location":"20","random_longitude":106.601886750432,"random_latitude":-6.26350777385283}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.730471446179 -6.32476838215712)') WHERE id=${id_location};{"id_location":"30","random_longitude":106.730471446179,"random_latitude":-6.32476838215712}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.646440965822 -6.2663286090688)') WHERE id=${id_location};{"id_location":"40","random_longitude":106.646440965822,"random_latitude":-6.2663286090688}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.699067029776 -6.3526916715176)') WHERE id=${id_location};{"id_location":"50","random_longitude":106.699067029776,"random_latitude":-6.3526916715176}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.679478561832 -6.35169391449068)') WHERE id=${id_location};{"id_location":"60","random_longitude":106.679478561832,"random_latitude":-6.35169391449068}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.70747499424 -6.27825211871873)') WHERE id=${id_location};{"id_location":"70","random_longitude":106.70747499424,"random_latitude":-6.27825211871873}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.692531324876 -6.23626130571115)') WHERE id=${id_location};{"id_location":"80","random_longitude":106.692531324876,"random_latitude":-6.23626130571115}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.653899875563 -6.35832937973078)') WHERE id=${id_location};{"id_location":"90","random_longitude":106.653899875563,"random_latitude":-6.35832937973078}
DB:OK;UPDATE table_device SET token_fcm=${token_fcm}, imsi=${imsi} WHERE id=${id_device};{"token_fcm":"-","imsi":"-","longitude":"106.67763736099005","latitude":"-6.299125074068939","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.67763736099005 -6.299125074068939)') WHERE id=${id_location};{"token_fcm":"-","imsi":"-","longitude":"106.67763736099005","latitude":"-6.299125074068939","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.74989504097 -6.309752402394)') WHERE id=${id_location};{"id_location":"100","random_longitude":106.74989504097,"random_latitude":-6.309752402394}
API Cluster worker id: 2
REQUESTING PATH /store/nearby;GET;1477290117165
CHECKING API TOKEN GIzopV/tSnBGsRpdIeK9bGgpCgxqa40biHFaxlGYRY4if+Pr97QUK8yuNpm4qggivaBl8O6ryqg3x6e7Q7T7YQDBlxiGPJbkQR/5Los5FV5tEu062hwfSINUB49IMk1gPtJOPK5ROBIGyZo84FJ0pP1rDu3pHP1c3MtDJFH12rY+DHXTBSr5zF7tOl/DQNSnF+QaAGMFZnmUHmHl2HBo7GFRmSLt6kPStUiQR2XR/PK10Xee5G6v/DmQN215Z4HwXqhXlsWQ9LKDM8B47D6sUxJH81pyL66cYdyAfRKVmssROwT5avB6e49gTDo/SbkEqmS56IIrpuI/WNLMiJ1Jfw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290140398,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290140398,"lang":2}; TAG START 1477290117165
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING longitude
CHECKING latitude
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT store.*,rating.counted AS rating,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude,ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67763736099005 -6.299125074068939)')) AS distance_db,${distance} AS distance_max_meter 
		FROM table_store grouping
		LEFT JOIN table_store store ON store.id=grouping.id
		LEFT JOIN table_location_gps location ON location.id=store.id_location
		LEFT JOIN (SELECT AVG(rating) AS counted, id_store FROM table_store_rating GROUP BY id_store) rating ON rating.id_store=store.id
		WHERE ST_DWithin(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67763736099005 -6.299125074068939)'), ${distance})
		ORDER BY ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67763736099005 -6.299125074068939)')) ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		;{"longitude":"106.67763736099005","latitude":"-6.299125074068939","distance":"3000","page_go":0,"page_max":null,"id_user":55}
PAGINATION DATA: []
RESULT 200: {"store_nearby":[],"pagination":{"page_go":"#"}}
[0mGET /api/store/nearby?longitude=106.67763736099005&latitude=-6.299125074068939 [32m200 [0m12.146 ms - 48[0m
API Cluster worker id: 2
REQUESTING PATH /token/update;POST;1477290118313
CHECKING API TOKEN GIzopV/tSnBGsRpdIeK9bGgpCgxqa40biHFaxlGYRY4if+Pr97QUK8yuNpm4qggivaBl8O6ryqg3x6e7Q7T7YQDBlxiGPJbkQR/5Los5FV5tEu062hwfSINUB49IMk1gPtJOPK5ROBIGyZo84FJ0pP1rDu3pHP1c3MtDJFH12rY+DHXTBSr5zF7tOl/DQNSnF+QaAGMFZnmUHmHl2HBo7GFRmSLt6kPStUiQR2XR/PK10Xee5G6v/DmQN215Z4HwXqhXlsWQ9LKDM8B47D6sUxJH81pyL66cYdyAfRKVmssROwT5avB6e49gTDo/SbkEqmS56IIrpuI/WNLMiJ1Jfw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290140398,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290140398,"lang":2}; TAG START 1477290118313
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_fcm
CHECKING imsi
CHECKING longitude
CHECKING latitude
IS_ERR false
DB:OK;SELECT device.id_location,usr.id_device FROM table_user usr LEFT JOIN table_device device ON device.id=usr.id_device WHERE usr.id=${id_user};{"token_fcm":"-","imsi":"-","longitude":"106.69576976448298","latitude":"-6.302379935571311","id_user":55}
DB:OK;SELECT id_location,(random()/10)-(random()/10)+${longitude} AS random_longitude,(random()/10)-(random()/10)+${latitude} AS random_latitude FROM table_store;{"token_fcm":"-","imsi":"-","longitude":"106.69576976448298","latitude":"-6.302379935571311","id_user":55,"id_location":"162","id_device":"25"}
RESULT 200: {"data":[{"id_location":"10","random_longitude":106.741121590231,"random_latitude":-6.26584553798786},{"id_location":"20","random_longitude":106.711049667979,"random_latitude":-6.34608219294934},{"id_location":"30","random_longitude":106.67987715234,"random_latitude":-6.23355893135196},{"id_location":"40","random_longitude":106.749369915063,"random_latitude":-6.30095859967297},{"id_location":"50","random_longitude":106.687972869957,"random_latitude":-6.30246395670003},{"id_location":"60","random_longitude":106.729466043785,"random_latitude":-6.32444535108408},{"id_location":"70","random_longitude":106.687147255102,"random_latitude":-6.25645205151415},{"id_location":"80","random_longitude":106.729216934042,"random_latitude":-6.30494921692772},{"id_location":"90","random_longitude":106.670027739089,"random_latitude":-6.32926301491572},{"id_location":"100","random_longitude":106.706237589335,"random_latitude":-6.30362224687016}]}
[0mPOST /api/token/update [32m200 [0m16.746 ms - 940[0m
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.741121590231 -6.26584553798786)') WHERE id=${id_location};{"id_location":"10","random_longitude":106.741121590231,"random_latitude":-6.26584553798786}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.711049667979 -6.34608219294934)') WHERE id=${id_location};{"id_location":"20","random_longitude":106.711049667979,"random_latitude":-6.34608219294934}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.67987715234 -6.23355893135196)') WHERE id=${id_location};{"id_location":"30","random_longitude":106.67987715234,"random_latitude":-6.23355893135196}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.687972869957 -6.30246395670003)') WHERE id=${id_location};{"id_location":"50","random_longitude":106.687972869957,"random_latitude":-6.30246395670003}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.749369915063 -6.30095859967297)') WHERE id=${id_location};{"id_location":"40","random_longitude":106.749369915063,"random_latitude":-6.30095859967297}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.729466043785 -6.32444535108408)') WHERE id=${id_location};{"id_location":"60","random_longitude":106.729466043785,"random_latitude":-6.32444535108408}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.687147255102 -6.25645205151415)') WHERE id=${id_location};{"id_location":"70","random_longitude":106.687147255102,"random_latitude":-6.25645205151415}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.729216934042 -6.30494921692772)') WHERE id=${id_location};{"id_location":"80","random_longitude":106.729216934042,"random_latitude":-6.30494921692772}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.670027739089 -6.32926301491572)') WHERE id=${id_location};{"id_location":"90","random_longitude":106.670027739089,"random_latitude":-6.32926301491572}
DB:OK;UPDATE table_device SET token_fcm=${token_fcm}, imsi=${imsi} WHERE id=${id_device};{"token_fcm":"-","imsi":"-","longitude":"106.69576976448298","latitude":"-6.302379935571311","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.69576976448298 -6.302379935571311)') WHERE id=${id_location};{"token_fcm":"-","imsi":"-","longitude":"106.69576976448298","latitude":"-6.302379935571311","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.706237589335 -6.30362224687016)') WHERE id=${id_location};{"id_location":"100","random_longitude":106.706237589335,"random_latitude":-6.30362224687016}
API Cluster worker id: 2
REQUESTING PATH /store/nearby;GET;1477290118384
CHECKING API TOKEN GIzopV/tSnBGsRpdIeK9bGgpCgxqa40biHFaxlGYRY4if+Pr97QUK8yuNpm4qggivaBl8O6ryqg3x6e7Q7T7YQDBlxiGPJbkQR/5Los5FV5tEu062hwfSINUB49IMk1gPtJOPK5ROBIGyZo84FJ0pP1rDu3pHP1c3MtDJFH12rY+DHXTBSr5zF7tOl/DQNSnF+QaAGMFZnmUHmHl2HBo7GFRmSLt6kPStUiQR2XR/PK10Xee5G6v/DmQN215Z4HwXqhXlsWQ9LKDM8B47D6sUxJH81pyL66cYdyAfRKVmssROwT5avB6e49gTDo/SbkEqmS56IIrpuI/WNLMiJ1Jfw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290140398,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290140398,"lang":2}; TAG START 1477290118384
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING longitude
CHECKING latitude
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT store.*,rating.counted AS rating,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude,ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.69576976448298 -6.302379935571311)')) AS distance_db,${distance} AS distance_max_meter 
		FROM table_store grouping
		LEFT JOIN table_store store ON store.id=grouping.id
		LEFT JOIN table_location_gps location ON location.id=store.id_location
		LEFT JOIN (SELECT AVG(rating) AS counted, id_store FROM table_store_rating GROUP BY id_store) rating ON rating.id_store=store.id
		WHERE ST_DWithin(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.69576976448298 -6.302379935571311)'), ${distance})
		ORDER BY ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.69576976448298 -6.302379935571311)')) ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		;{"longitude":"106.69576976448298","latitude":"-6.302379935571311","distance":"3000","page_go":0,"page_max":null,"id_user":55}
PAGINATION DATA: [{"no":"1","total":"2","id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","rating":null,"location_longitude":106.687972869957,"location_latitude":-6.30246395670003,"distance_db":862.785569904,"distance_max_meter":"3000","maxno":"2"},{"no":"2","total":"2","id":"10","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 10","address":"Store Address 10","phone":"Store Phone 10","is_delete":false,"id_location":"100","id_schedule":"10","rating":null,"location_longitude":106.706237589335,"location_latitude":-6.30362224687016,"distance_db":1166.395018502,"distance_max_meter":"3000","maxno":"2"}]
HALO {"store_nearby":[{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","rating":null,"location_longitude":106.687972869957,"location_latitude":-6.30246395670003,"distance_db":862.785569904,"distance_max_meter":"3000"},{"id":"10","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 10","address":"Store Address 10","phone":"Store Phone 10","is_delete":false,"id_location":"100","id_schedule":"10","rating":null,"location_longitude":106.706237589335,"location_latitude":-6.30362224687016,"distance_db":1166.395018502,"distance_max_meter":"3000"}],"pagination":{"page_go":"#"}}
ERR:null
DONE:{"status":200,"headers":{"content-type":"application/json; charset=UTF-8","date":"Mon, 24 Oct 2016 06:21:58 GMT","expires":"Tue, 25 Oct 2016 06:21:58 GMT","cache-control":"public, max-age=86400","server":"mafe","x-xss-protection":"1; mode=block","x-frame-options":"SAMEORIGIN","alt-svc":"quic=\":443\"; ma=2592000; v=\"36,35,34\"","accept-ranges":"none","vary":"Accept-Encoding","connection":"close"},"json":{"destination_addresses":["Jl. Karimata 1 No.19-34, Rw. Mekar Jaya, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia"],"origin_addresses":["Jl. Samosir Blok D7 No.13, Rw. Mekar Jaya, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia","Gg. Bali, Jombang, Ciputat, Kota Tangerang Selatan, Banten 15414, Indonesia"],"rows":[{"elements":[{"distance":{"text":"1.4 km","value":1442},"duration":{"text":"6 mins","value":332},"status":"OK"}]},{"elements":[{"distance":{"text":"3.4 km","value":3373},"duration":{"text":"15 mins","value":884},"status":"OK"}]}],"status":"OK"}}
ELEMENTS:[{"distance":{"text":"1.4 km","value":1442},"duration":{"text":"6 mins","value":332},"status":"OK"}]
RESULT 200: {"store_nearby":[{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","rating":null,"location_longitude":106.687972869957,"location_latitude":-6.30246395670003,"distance_db":862.785569904,"distance_max_meter":"3000","distance_google":1442},{"id":"10","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 10","address":"Store Address 10","phone":"Store Phone 10","is_delete":false,"id_location":"100","id_schedule":"10","rating":null,"location_longitude":106.706237589335,"location_latitude":-6.30362224687016,"distance_db":1166.395018502,"distance_max_meter":"3000","distance_google":3373}],"pagination":{"page_go":"#"}}
[0mGET /api/store/nearby?longitude=106.69576976448298&latitude=-6.302379935571311 [32m200 [0m72.221 ms - 754[0m
API Cluster worker id: 2
REQUESTING PATH /location;PUT;1477290120629
CHECKING API TOKEN GIzopV/tSnBGsRpdIeK9bGgpCgxqa40biHFaxlGYRY4if+Pr97QUK8yuNpm4qggivaBl8O6ryqg3x6e7Q7T7YQDBlxiGPJbkQR/5Los5FV5tEu062hwfSINUB49IMk1gPtJOPK5ROBIGyZo84FJ0pP1rDu3pHP1c3MtDJFH12rY+DHXTBSr5zF7tOl/DQNSnF+QaAGMFZnmUHmHl2HBo7GFRmSLt6kPStUiQR2XR/PK10Xee5G6v/DmQN215Z4HwXqhXlsWQ9LKDM8B47D6sUxJH81pyL66cYdyAfRKVmssROwT5avB6e49gTDo/SbkEqmS56IIrpuI/WNLMiJ1Jfw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290140398,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290140398,"lang":2}; TAG START 1477290120629
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;PUT
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING address
CHECKING longitude
CHECKING latitude
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;INSERT INTO table_location_gps (name,id_user,geom_location) VALUES (${address},${id_user},ST_GeographyFromText('SRID=4326;POINT(106.69576976448298 -6.302379935571311)')) RETURNING id;{"address":"Jalan Karimata 1 Blok T1 No.21, Serpong, Banten, Indonesia, 15310","latitude":"-6.302379935571311","longitude":"106.69576976448298","id_user":55}
RESULT 200: {"location":{"id":"166"}}
[0mPUT /api/location?address=Jalan%20Karimata%201%20Blok%20T1%20No.21,%20Serpong,%20Banten,%20Indonesia,%2015310&latitude=-6.302379935571311&longitude=106.69576976448298 [32m200 [0m10.431 ms - 25[0m
API Cluster worker id: 2
REQUESTING PATH /store/nearby/product;GET;1477290134614
CHECKING API TOKEN GIzopV/tSnBGsRpdIeK9bGgpCgxqa40biHFaxlGYRY4if+Pr97QUK8yuNpm4qggivaBl8O6ryqg3x6e7Q7T7YQDBlxiGPJbkQR/5Los5FV5tEu062hwfSINUB49IMk1gPtJOPK5ROBIGyZo84FJ0pP1rDu3pHP1c3MtDJFH12rY+DHXTBSr5zF7tOl/DQNSnF+QaAGMFZnmUHmHl2HBo7GFRmSLt6kPStUiQR2XR/PK10Xee5G6v/DmQN215Z4HwXqhXlsWQ9LKDM8B47D6sUxJH81pyL66cYdyAfRKVmssROwT5avB6e49gTDo/SbkEqmS56IIrpuI/WNLMiJ1Jfw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290140398,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290140398,"lang":2}; TAG START 1477290134614
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING search
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT store.*,rating.counted AS rating,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude,ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.69576976448298 -6.302379935571311)')) AS distance_db,${distance} AS distance_max_meter 
		FROM 
		(SELECT 
		category.id_store AS id 
		FROM table_product_category category 
		LEFT JOIN table_product product ON product.id_category=category.id 
		WHERE to_tsvector(category.name || ' ' || category.description)@@to_tsquery('simple','genteng')
		OR to_tsvector(product.name || ' ' || product.description)@@to_tsquery('simple','genteng')
		GROUP BY category.id_store) grouping
		LEFT JOIN table_store store ON store.id=grouping.id
		LEFT JOIN table_location_gps location ON location.id=store.id_location
		LEFT JOIN (SELECT AVG(rating) AS counted, id_store FROM table_store_rating GROUP BY id_store) rating ON rating.id_store=store.id
		WHERE ST_DWithin(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.69576976448298 -6.302379935571311)'), ${distance})
		ORDER BY ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.69576976448298 -6.302379935571311)')) ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		LIMIT ${page_max} OFFSET 0;{"longitude":"106.69576976448298","latitude":"-6.302379935571311","search":"genteng","page_go":0,"distance":"3000","page_max":25,"id_user":55}
PAGINATION DATA: [{"no":"1","total":"2","id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","rating":null,"location_longitude":106.687972869957,"location_latitude":-6.30246395670003,"distance_db":862.785569904,"distance_max_meter":"3000","maxno":"2"},{"no":"2","total":"2","id":"10","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 10","address":"Store Address 10","phone":"Store Phone 10","is_delete":false,"id_location":"100","id_schedule":"10","rating":null,"location_longitude":106.706237589335,"location_latitude":-6.30362224687016,"distance_db":1166.395018502,"distance_max_meter":"3000","maxno":"2"}]
Register search store 5
product query 
Full text search AND (to_tsvector(category.name || ' ' || category.description)@@to_tsquery('simple','genteng')
		OR to_tsvector(product.name || ' ' || product.description)@@to_tsquery('simple','genteng'))
Register search store 10
product query 
Full text search AND (to_tsvector(category.name || ' ' || category.description)@@to_tsquery('simple','genteng')
		OR to_tsvector(product.name || ' ' || product.description)@@to_tsquery('simple','genteng'))
HALO {"store_nearby":[{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","rating":null,"location_longitude":106.687972869957,"location_latitude":-6.30246395670003,"distance_db":862.785569904,"distance_max_meter":"3000"},{"id":"10","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 10","address":"Store Address 10","phone":"Store Phone 10","is_delete":false,"id_location":"100","id_schedule":"10","rating":null,"location_longitude":106.706237589335,"location_latitude":-6.30362224687016,"distance_db":1166.395018502,"distance_max_meter":"3000"}],"pagination":{"page_go":"#"}}
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT product.*,trolley.qty AS trolley_qty 
		FROM table_product_category category
		LEFT JOIN table_product product ON product.id_category=category.id
		LEFT JOIN (SELECT * FROM table_trolley WHERE id_user=55) trolley ON trolley.id_product=product.id
		WHERE category.id_store=10 AND (to_tsvector(category.name || ' ' || category.description)@@to_tsquery('simple','genteng')
		OR to_tsvector(product.name || ' ' || product.description)@@to_tsquery('simple','genteng')) 
		ORDER BY product.id ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		LIMIT ${page_max} OFFSET 0;{"longitude":"106.69576976448298","latitude":"-6.302379935571311","search":"genteng","page_go":0,"distance":"3000","page_max":25,"id_user":55}
PAGINATION DATA: [{"no":"1","total":"2","id":"29","id_category":"92","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"92","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null,"maxno":"2"},{"no":"2","total":"2","id":"40","id_category":"93","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"93","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null,"maxno":"2"}]
TERIMA DATA {"products":[{"id":"29","id_category":"92","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"92","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"40","id_category":"93","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"93","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null}],"pagination":{"page_go":"#"}}
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT product.*,trolley.qty AS trolley_qty 
		FROM table_product_category category
		LEFT JOIN table_product product ON product.id_category=category.id
		LEFT JOIN (SELECT * FROM table_trolley WHERE id_user=55) trolley ON trolley.id_product=product.id
		WHERE category.id_store=5 AND (to_tsvector(category.name || ' ' || category.description)@@to_tsquery('simple','genteng')
		OR to_tsvector(product.name || ' ' || product.description)@@to_tsquery('simple','genteng')) 
		ORDER BY product.id ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		LIMIT ${page_max} OFFSET 0;{"longitude":"106.69576976448298","latitude":"-6.302379935571311","search":"genteng","page_go":0,"distance":"3000","page_max":25,"id_user":55}
PAGINATION DATA: [{"no":"1","total":"2","id":"21","id_category":"42","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"42","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null,"maxno":"2"},{"no":"2","total":"2","id":"35","id_category":"43","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"43","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null,"maxno":"2"}]
TERIMA DATA {"products":[{"id":"21","id_category":"42","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"42","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"35","id_category":"43","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"43","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null}],"pagination":{"page_go":"#"}}
ERR:null
DONE:{"status":200,"headers":{"content-type":"application/json; charset=UTF-8","date":"Mon, 24 Oct 2016 06:21:58 GMT","expires":"Tue, 25 Oct 2016 06:21:58 GMT","server":"mafe","x-xss-protection":"1; mode=block","x-frame-options":"SAMEORIGIN","cache-control":"public, max-age=86400","age":"16","alt-svc":"quic=\":443\"; ma=2592000; v=\"36,35,34\"","accept-ranges":"none","vary":"Accept-Encoding","connection":"close"},"json":{"destination_addresses":["Jl. Karimata 1 No.19-34, Rw. Mekar Jaya, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia"],"origin_addresses":["Jl. Samosir Blok D7 No.13, Rw. Mekar Jaya, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia","Gg. Bali, Jombang, Ciputat, Kota Tangerang Selatan, Banten 15414, Indonesia"],"rows":[{"elements":[{"distance":{"text":"1.4 km","value":1442},"duration":{"text":"6 mins","value":332},"status":"OK"}]},{"elements":[{"distance":{"text":"3.4 km","value":3373},"duration":{"text":"15 mins","value":884},"status":"OK"}]}],"status":"OK"}}
ELEMENTS:[{"distance":{"text":"1.4 km","value":1442},"duration":{"text":"6 mins","value":332},"status":"OK"}]
RESULT 200: {"store_nearby":[{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","rating":null,"location_longitude":106.687972869957,"location_latitude":-6.30246395670003,"distance_db":862.785569904,"distance_max_meter":"3000","products":[{"id":"21","id_category":"42","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"42","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"35","id_category":"43","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"43","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null}],"distance_google":1442},{"id":"10","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 10","address":"Store Address 10","phone":"Store Phone 10","is_delete":false,"id_location":"100","id_schedule":"10","rating":null,"location_longitude":106.706237589335,"location_latitude":-6.30362224687016,"distance_db":1166.395018502,"distance_max_meter":"3000","products":[{"id":"29","id_category":"92","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"92","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"40","id_category":"93","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"93","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null}],"distance_google":3373}],"pagination":{"page_go":"#"}}
[0mGET /api/store/nearby/product?longitude=106.69576976448298&latitude=-6.302379935571311&search=genteng&page_go= [32m200 [0m36.420 ms - 1974[0m
API Cluster worker id: 2
REQUESTING PATH /trolley/29;PUT;1477290135855
CHECKING API TOKEN GIzopV/tSnBGsRpdIeK9bGgpCgxqa40biHFaxlGYRY4if+Pr97QUK8yuNpm4qggivaBl8O6ryqg3x6e7Q7T7YQDBlxiGPJbkQR/5Los5FV5tEu062hwfSINUB49IMk1gPtJOPK5ROBIGyZo84FJ0pP1rDu3pHP1c3MtDJFH12rY+DHXTBSr5zF7tOl/DQNSnF+QaAGMFZnmUHmHl2HBo7GFRmSLt6kPStUiQR2XR/PK10Xee5G6v/DmQN215Z4HwXqhXlsWQ9LKDM8B47D6sUxJH81pyL66cYdyAfRKVmssROwT5avB6e49gTDo/SbkEqmS56IIrpuI/WNLMiJ1Jfw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290140398,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290140398,"lang":2}; TAG START 1477290135855
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;PUT
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT 
		trolley.id 
		FROM table_trolley trolley
		LEFT JOIN table_product product ON product.id=trolley.id_product
		LEFT JOIN table_product_category category ON category.id=product.id_category
		LEFT JOIN (SELECT category.id_store FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category WHERE product.id=${id_product}) wtadd ON wtadd.id_store!=category.id_store
		WHERE trolley.id_user=${id_user} AND wtadd.id_store IS NOT NULL;{"id_product":"29","id_user":55}
RESULT 422: {"id":"Tidak bisa memasukkan barang dari toko berbeda. Silahkan kosongkan troli","en":"Unable add product from different store. Please empty the trolley","cn":"n/a"}
LANGUAGE: {"money_max_cashout":"10000000","is_discount_shipment":"TRUE","page_pagination":"25","key_googlemaps":"AIzaSyDnL8pHV_HPAmrSgzFuQm__trcIZ3atIqI","timer_auto_complete":"3","distance_max":"3000","language":"en","fee_delivery":"[ { \"id\": 5, \"distance\": 5000, \"price\": 5000 }, { \"id\": 4, \"distance\": 4000, \"price\": 4000 }, { \"id\": 3, \"distance\": 3000, \"price\": 3000 }, { \"id\": 2, \"distance\": 2000, \"price\": 2000 }, { \"id\": 1, \"distance\": 1000, \"price\": 1000 }, { \"id\": 6, \"distance\": 0, \"price\": 0 } ]","worker_special":"[1]","is_maintenance":"FALSE","time_max_delivery":"3","token_access_expire":"30000","money_max_topup":"10000000"}
[0mPUT /api/trolley/29 [33m422 [0m7.958 ms - 90[0m
API Cluster worker id: 2
REQUESTING PATH /trolley/40;PUT;1477290137297
CHECKING API TOKEN GIzopV/tSnBGsRpdIeK9bGgpCgxqa40biHFaxlGYRY4if+Pr97QUK8yuNpm4qggivaBl8O6ryqg3x6e7Q7T7YQDBlxiGPJbkQR/5Los5FV5tEu062hwfSINUB49IMk1gPtJOPK5ROBIGyZo84FJ0pP1rDu3pHP1c3MtDJFH12rY+DHXTBSr5zF7tOl/DQNSnF+QaAGMFZnmUHmHl2HBo7GFRmSLt6kPStUiQR2XR/PK10Xee5G6v/DmQN215Z4HwXqhXlsWQ9LKDM8B47D6sUxJH81pyL66cYdyAfRKVmssROwT5avB6e49gTDo/SbkEqmS56IIrpuI/WNLMiJ1Jfw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290140398,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290140398,"lang":2}; TAG START 1477290137297
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;PUT
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT 
		trolley.id 
		FROM table_trolley trolley
		LEFT JOIN table_product product ON product.id=trolley.id_product
		LEFT JOIN table_product_category category ON category.id=product.id_category
		LEFT JOIN (SELECT category.id_store FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category WHERE product.id=${id_product}) wtadd ON wtadd.id_store!=category.id_store
		WHERE trolley.id_user=${id_user} AND wtadd.id_store IS NOT NULL;{"id_product":"40","id_user":55}
RESULT 422: {"id":"Tidak bisa memasukkan barang dari toko berbeda. Silahkan kosongkan troli","en":"Unable add product from different store. Please empty the trolley","cn":"n/a"}
LANGUAGE: {"money_max_cashout":"10000000","is_discount_shipment":"TRUE","page_pagination":"25","key_googlemaps":"AIzaSyDnL8pHV_HPAmrSgzFuQm__trcIZ3atIqI","timer_auto_complete":"3","distance_max":"3000","language":"en","fee_delivery":"[ { \"id\": 5, \"distance\": 5000, \"price\": 5000 }, { \"id\": 4, \"distance\": 4000, \"price\": 4000 }, { \"id\": 3, \"distance\": 3000, \"price\": 3000 }, { \"id\": 2, \"distance\": 2000, \"price\": 2000 }, { \"id\": 1, \"distance\": 1000, \"price\": 1000 }, { \"id\": 6, \"distance\": 0, \"price\": 0 } ]","worker_special":"[1]","is_maintenance":"FALSE","time_max_delivery":"3","token_access_expire":"30000","money_max_topup":"10000000"}
[0mPUT /api/trolley/40 [33m422 [0m10.026 ms - 90[0m
API Cluster worker id: 2
REQUESTING PATH /store/4/product;GET;1477290147654
CHECKING API TOKEN GIzopV/tSnBGsRpdIeK9bGgpCgxqa40biHFaxlGYRY4if+Pr97QUK8yuNpm4qggivaBl8O6ryqg3x6e7Q7T7YQDBlxiGPJbkQR/5Los5FV5tEu062hwfSINUB49IMk1gPtJOPK5ROBIGyZo84FJ0pP1rDu3pHP1c3MtDJFH12rY+DHXTBSr5zF7tOl/DQNSnF+QaAGMFZnmUHmHl2HBo7GFRmSLt6kPStUiQR2XR/PK10Xee5G6v/DmQN215Z4HwXqhXlsWQ9LKDM8B47D6sUxJH81pyL66cYdyAfRKVmssROwT5avB6e49gTDo/SbkEqmS56IIrpuI/WNLMiJ1Jfw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290140398,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290140398,"lang":2}; TAG START 1477290147654
TOKEN EXPIRED
PAGE NOT IN EXPIRED TOKEN
RESULT 403.
[0mGET /api/store/4/product?search= [33m403 [0m6.393 ms - 2[0m
API Cluster worker id: 2
REQUESTING PATH /token/renew;POST;1477290147755
CHECKING API TOKEN GIzopV/tSnBGsRpdIeK9bGgpCgxqa40biHFaxlGYRY4if+Pr97QUK8yuNpm4qggivaBl8O6ryqg3x6e7Q7T7YQDBlxiGPJbkQR/5Los5FV5tEu062hwfSINUB49IMk1gPtJOPK5ROBIGyZo84FJ0pP1rDu3pHP1c3MtDJFH12rY+DHXTBSr5zF7tOl/DQNSnF+QaAGMFZnmUHmHl2HBo7GFRmSLt6kPStUiQR2XR/PK10Xee5G6v/DmQN215Z4HwXqhXlsWQ9LKDM8B47D6sUxJH81pyL66cYdyAfRKVmssROwT5avB6e49gTDo/SbkEqmS56IIrpuI/WNLMiJ1Jfw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290140398,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290140398,"lang":2}; TAG START 1477290147755
TOKEN EXPIRED
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:POST;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_session
IS_ERR false
NO COOKIES
COOKIES NOT AVAILABLE
DB:OK;SELECT token_session FROM table_user WHERE id=$1;55
TOKEN SESSION 
t2ggKr4ag/NJvZsVuJh2OSfjOA7NrRhHhRGU/xDT6R5sR+T1g4KDJnDAqAnxRTmKxIbtP82mVgissK2c5Q0J0nCuTK58RjMe1/TQr0amJJfOWVNGHZy6VWbVPYJ5hxmL19iktqrY5EOe3Mi2XOISlV8tC5jIn8YAFvJBEIAhwKWiM5C8nVeiePyvErAvor/8mfHZXyA2Yvj8rWVqDF7Pz1+E8Y5cKsQViBZYsXQVVUOC74f+7dd/cDL+zkxFX30b6XxXthODD0xJWd5ucPlua/IpnbDRnfZUxizFPCIewVzrvwhDsW0G4MBzRdcoOc9QrBoqOXVut55Lol83VahW1g==
t2ggKr4ag/NJvZsVuJh2OSfjOA7NrRhHhRGU/xDT6R5sR+T1g4KDJnDAqAnxRTmKxIbtP82mVgissK2c5Q0J0nCuTK58RjMe1/TQr0amJJfOWVNGHZy6VWbVPYJ5hxmL19iktqrY5EOe3Mi2XOISlV8tC5jIn8YAFvJBEIAhwKWiM5C8nVeiePyvErAvor/8mfHZXyA2Yvj8rWVqDF7Pz1+E8Y5cKsQViBZYsXQVVUOC74f+7dd/cDL+zkxFX30b6XxXthODD0xJWd5ucPlua/IpnbDRnfZUxizFPCIewVzrvwhDsW0G4MBzRdcoOc9QrBoqOXVut55Lol83VahW1g==
CREATE TOKEN 1477290147755;30000
DB:OK;UPDATE table_user SET token_session=${token_session}, token_access=${token_access} WHERE id=${id_user} RETURNING token_session,token_access;{"token_access":"QhKMh3QBDELutBg8O0RHX558KHaGVeMUv72T8aPAva1MqfN4VSbVj0kf25paHCgz0E7GcCX8EQ3G9QG11mVMMVDuH94fTB0Lor3LBZJlSSYL/4+A/Vaz9MYsZM/bqKTE1a7bG8OKsyKQNxubSr3D6sGrEAuSjAnFsII9GBu9SdtZI3Ymh2dn8BDTHhB8PEkuEL/fE84i/HZlc7D+t/7K48b0hTWp1lUqegbsQuISIKgSL0etz6ltmg4bRU5Q/FvLiwMWbzwHooKXdCEqFPSn+TZPy2v4yRYVfzB6umsC24qfGh6n8WjeCB/zIGwJjZM+jVkmgunI6S1ZHZw7LQCy+A==","token_session":"afY8BGjH05VirKhtqi0QTGpHk2m/vjP5v0a0BxLfVwS5BQ7OGwPI+lQTe6x+NQWopwma90hrrLCBfAsrFsiOx2GIpGsYvAYeAyYCkCBpBFyo/mrVc2MXz5da8POZO1gZG/EzbaAXpAwM7xuaI1yRnHPxg3AKmPhtZvOdoomHOWiBMCLU4/Hm4v0PtES+UhRfSjiGjmi+swxuY5lu0UhRee8+4Fflc6l4i63okh8yrScog0zfJokMhOS4QPrCWlKGmMqvEMTnVuydrUSAyno91ow9013u39ZuqxN1TeOMsT1mhS/wMOyhOR2KPhRyQeQsyHyO3L/vYFJmptKrI/LlJg==","id_user":55}
RESULT 200: {"token":{"token_access":"QhKMh3QBDELutBg8O0RHX558KHaGVeMUv72T8aPAva1MqfN4VSbVj0kf25paHCgz0E7GcCX8EQ3G9QG11mVMMVDuH94fTB0Lor3LBZJlSSYL/4+A/Vaz9MYsZM/bqKTE1a7bG8OKsyKQNxubSr3D6sGrEAuSjAnFsII9GBu9SdtZI3Ymh2dn8BDTHhB8PEkuEL/fE84i/HZlc7D+t/7K48b0hTWp1lUqegbsQuISIKgSL0etz6ltmg4bRU5Q/FvLiwMWbzwHooKXdCEqFPSn+TZPy2v4yRYVfzB6umsC24qfGh6n8WjeCB/zIGwJjZM+jVkmgunI6S1ZHZw7LQCy+A==","token_session":"afY8BGjH05VirKhtqi0QTGpHk2m/vjP5v0a0BxLfVwS5BQ7OGwPI+lQTe6x+NQWopwma90hrrLCBfAsrFsiOx2GIpGsYvAYeAyYCkCBpBFyo/mrVc2MXz5da8POZO1gZG/EzbaAXpAwM7xuaI1yRnHPxg3AKmPhtZvOdoomHOWiBMCLU4/Hm4v0PtES+UhRfSjiGjmi+swxuY5lu0UhRee8+4Fflc6l4i63okh8yrScog0zfJokMhOS4QPrCWlKGmMqvEMTnVuydrUSAyno91ow9013u39ZuqxN1TeOMsT1mhS/wMOyhOR2KPhRyQeQsyHyO3L/vYFJmptKrI/LlJg=="}}
API END token renew /
[0mPOST /api/token/renew [32m200 [0m18.730 ms - 736[0m
API Cluster worker id: 2
REQUESTING PATH /store/4/product;GET;1477290147957
CHECKING API TOKEN QhKMh3QBDELutBg8O0RHX558KHaGVeMUv72T8aPAva1MqfN4VSbVj0kf25paHCgz0E7GcCX8EQ3G9QG11mVMMVDuH94fTB0Lor3LBZJlSSYL/4+A/Vaz9MYsZM/bqKTE1a7bG8OKsyKQNxubSr3D6sGrEAuSjAnFsII9GBu9SdtZI3Ymh2dn8BDTHhB8PEkuEL/fE84i/HZlc7D+t/7K48b0hTWp1lUqegbsQuISIKgSL0etz6ltmg4bRU5Q/FvLiwMWbzwHooKXdCEqFPSn+TZPy2v4yRYVfzB6umsC24qfGh6n8WjeCB/zIGwJjZM+jVkmgunI6S1ZHZw7LQCy+A==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290177755,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290177755,"lang":2}; TAG START 1477290147957
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
product query 
Full text search 
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT product.*,trolley.qty AS trolley_qty 
		FROM table_product_category category
		LEFT JOIN table_product product ON product.id_category=category.id
		LEFT JOIN (SELECT * FROM table_trolley WHERE id_user=55) trolley ON trolley.id_product=product.id
		WHERE category.id_store=4  
		ORDER BY product.id ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		LIMIT ${page_max} OFFSET 0;{"search":"","page_go":0,"page_max":25,"id_user":55}
PAGINATION DATA: [{"no":"1","total":"10","id":"1","id_category":"40","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"40","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null,"maxno":"10"},{"no":"2","total":"10","id":"16","id_category":"31","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"31","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null,"maxno":"10"},{"no":"3","total":"10","id":"26","id_category":"32","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"32","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null,"maxno":"10"},{"no":"4","total":"10","id":"34","id_category":"33","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"33","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null,"maxno":"10"},{"no":"5","total":"10","id":"41","id_category":"34","name":"Cat Nippon Paint","description":"Cat Nippon Paint","time_create":"2016-10-23T08:04:04.112Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat1.png","price":"34","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null,"maxno":"10"},{"no":"6","total":"10","id":"54","id_category":"35","name":"Cat Catylac","description":"Cat Catylac","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat2.png","price":"35","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null,"maxno":"10"},{"no":"7","total":"10","id":"70","id_category":"36","name":"Sink Elite","description":"Sink Elite","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink1.jpg","price":"36","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null,"maxno":"10"},{"no":"8","total":"10","id":"74","id_category":"37","name":"Sink American Standard","description":"Sink American Standard","time_create":"2016-10-23T08:04:04.114Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink2.jpg","price":"37","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null,"maxno":"10"},{"no":"9","total":"10","id":"81","id_category":"38","name":"Bata Merah","description":"Bata Merah","time_create":"2016-10-23T08:04:04.115Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata1.jpg","price":"38","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null,"maxno":"10"},{"no":"10","total":"10","id":"91","id_category":"39","name":"Bata Ringan","description":"Bata Ringan","time_create":"2016-10-23T08:04:04.116Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata2.jpg","price":"39","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null,"maxno":"10"}]
TERIMA DATA {"products":[{"id":"1","id_category":"40","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"40","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null},{"id":"16","id_category":"31","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"31","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null},{"id":"26","id_category":"32","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"32","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"34","id_category":"33","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"33","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"41","id_category":"34","name":"Cat Nippon Paint","description":"Cat Nippon Paint","time_create":"2016-10-23T08:04:04.112Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat1.png","price":"34","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"54","id_category":"35","name":"Cat Catylac","description":"Cat Catylac","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat2.png","price":"35","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"70","id_category":"36","name":"Sink Elite","description":"Sink Elite","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink1.jpg","price":"36","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"74","id_category":"37","name":"Sink American Standard","description":"Sink American Standard","time_create":"2016-10-23T08:04:04.114Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink2.jpg","price":"37","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"81","id_category":"38","name":"Bata Merah","description":"Bata Merah","time_create":"2016-10-23T08:04:04.115Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata1.jpg","price":"38","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null},{"id":"91","id_category":"39","name":"Bata Ringan","description":"Bata Ringan","time_create":"2016-10-23T08:04:04.116Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata2.jpg","price":"39","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null}],"pagination":{"page_go":"#"}}
RESULT 200: {"products":[{"id":"1","id_category":"40","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"40","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null},{"id":"16","id_category":"31","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"31","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null},{"id":"26","id_category":"32","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"32","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"34","id_category":"33","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"33","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"41","id_category":"34","name":"Cat Nippon Paint","description":"Cat Nippon Paint","time_create":"2016-10-23T08:04:04.112Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat1.png","price":"34","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"54","id_category":"35","name":"Cat Catylac","description":"Cat Catylac","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat2.png","price":"35","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"70","id_category":"36","name":"Sink Elite","description":"Sink Elite","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink1.jpg","price":"36","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"74","id_category":"37","name":"Sink American Standard","description":"Sink American Standard","time_create":"2016-10-23T08:04:04.114Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink2.jpg","price":"37","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"81","id_category":"38","name":"Bata Merah","description":"Bata Merah","time_create":"2016-10-23T08:04:04.115Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata1.jpg","price":"38","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null},{"id":"91","id_category":"39","name":"Bata Ringan","description":"Bata Ringan","time_create":"2016-10-23T08:04:04.116Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata2.jpg","price":"39","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null}],"pagination":{"page_go":"#"}}
[0mGET /api/store/4/product?search= [32m200 [0m15.407 ms - 2945[0m
API Cluster worker id: 2
REQUESTING PATH /trolley/16;PUT;1477290150553
CHECKING API TOKEN QhKMh3QBDELutBg8O0RHX558KHaGVeMUv72T8aPAva1MqfN4VSbVj0kf25paHCgz0E7GcCX8EQ3G9QG11mVMMVDuH94fTB0Lor3LBZJlSSYL/4+A/Vaz9MYsZM/bqKTE1a7bG8OKsyKQNxubSr3D6sGrEAuSjAnFsII9GBu9SdtZI3Ymh2dn8BDTHhB8PEkuEL/fE84i/HZlc7D+t/7K48b0hTWp1lUqegbsQuISIKgSL0etz6ltmg4bRU5Q/FvLiwMWbzwHooKXdCEqFPSn+TZPy2v4yRYVfzB6umsC24qfGh6n8WjeCB/zIGwJjZM+jVkmgunI6S1ZHZw7LQCy+A==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290177755,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290177755,"lang":2}; TAG START 1477290150553
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;PUT
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT 
		trolley.id 
		FROM table_trolley trolley
		LEFT JOIN table_product product ON product.id=trolley.id_product
		LEFT JOIN table_product_category category ON category.id=product.id_category
		LEFT JOIN (SELECT category.id_store FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category WHERE product.id=${id_product}) wtadd ON wtadd.id_store!=category.id_store
		WHERE trolley.id_user=${id_user} AND wtadd.id_store IS NOT NULL;{"id_product":"16","id_user":55}
RESULT 422: {"id":"Tidak bisa memasukkan barang dari toko berbeda. Silahkan kosongkan troli","en":"Unable add product from different store. Please empty the trolley","cn":"n/a"}
LANGUAGE: {"money_max_cashout":"10000000","is_discount_shipment":"TRUE","page_pagination":"25","key_googlemaps":"AIzaSyDnL8pHV_HPAmrSgzFuQm__trcIZ3atIqI","timer_auto_complete":"3","distance_max":"3000","language":"en","fee_delivery":"[ { \"id\": 5, \"distance\": 5000, \"price\": 5000 }, { \"id\": 4, \"distance\": 4000, \"price\": 4000 }, { \"id\": 3, \"distance\": 3000, \"price\": 3000 }, { \"id\": 2, \"distance\": 2000, \"price\": 2000 }, { \"id\": 1, \"distance\": 1000, \"price\": 1000 }, { \"id\": 6, \"distance\": 0, \"price\": 0 } ]","worker_special":"[1]","is_maintenance":"FALSE","time_max_delivery":"3","token_access_expire":"30000","money_max_topup":"10000000"}
[0mPUT /api/trolley/16 [33m422 [0m8.176 ms - 90[0m
[0mGET /images/sink1.jpg [32m200 [0m2.533 ms - 129188[0m
API Cluster worker id: 2
REQUESTING PATH /trolley;GET;1477290152129
CHECKING API TOKEN QhKMh3QBDELutBg8O0RHX558KHaGVeMUv72T8aPAva1MqfN4VSbVj0kf25paHCgz0E7GcCX8EQ3G9QG11mVMMVDuH94fTB0Lor3LBZJlSSYL/4+A/Vaz9MYsZM/bqKTE1a7bG8OKsyKQNxubSr3D6sGrEAuSjAnFsII9GBu9SdtZI3Ymh2dn8BDTHhB8PEkuEL/fE84i/HZlc7D+t/7K48b0hTWp1lUqegbsQuISIKgSL0etz6ltmg4bRU5Q/FvLiwMWbzwHooKXdCEqFPSn+TZPy2v4yRYVfzB6umsC24qfGh6n8WjeCB/zIGwJjZM+jVkmgunI6S1ZHZw7LQCy+A==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290177755,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290177755,"lang":2}; TAG START 1477290152129
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;SELECT product.*,trolley.qty AS trolley_qty FROM table_trolley trolley LEFT JOIN table_product product ON product.id=trolley.id_product WHERE trolley.id_user=${id_user};{"id_user":55}
DB:OK;SELECT store.*,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category LEFT JOIN table_store store ON store.id=category.id_store LEFT JOIN table_location_gps location ON location.id=store.id_location WHERE product.id=$1;"3"
[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"1"}]
{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.687972869957,"location_latitude":-6.30246395670003}
[ { "id": 5, "distance": 5000, "price": 5000 }, { "id": 4, "distance": 4000, "price": 4000 }, { "id": 3, "distance": 3000, "price": 3000 }, { "id": 2, "distance": 2000, "price": 2000 }, { "id": 1, "distance": 1000, "price": 1000 }, { "id": 6, "distance": 0, "price": 0 } ]
RESULT 200: {"trolley":[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"1"}],"store":{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.687972869957,"location_latitude":-6.30246395670003},"fee_delivery":[{"id":5,"distance":5000,"price":5000},{"id":4,"distance":4000,"price":4000},{"id":3,"distance":3000,"price":3000},{"id":2,"distance":2000,"price":2000},{"id":1,"distance":1000,"price":1000},{"id":6,"distance":0,"price":0}]}
[0mGET /api/trolley [32m200 [0m9.415 ms - 793[0m
[0mGET /images/cat2.png [32m200 [0m10.127 ms - 339175[0m
API Cluster worker id: 2
REQUESTING PATH /home/ads;GET;1477290191101
CHECKING API TOKEN d/ccp9dyM0kfuHoIrxkfqQGJUJTrWvaLwe0EeUvRicVidmer8zVUZMALODt75qGxg7CdXLo1ikEs4d6/x7AG5hTPJIngyShmEQG1D5fxKDLyIL4UnyDLBeNBYaqXe8HaHb7ZYP0MV7eKjRzoDGasbRtSddzSo9g9p3ujHy/d8oTUTjyxgMNKVesyGyFACcSIJX2Q7tvfG7/MBtoNGI60CBY20LrGbk9iz50wW6JFiCPcBQ6wvI5hruOVjWXq4FjqZ8kcoBSaCvtVUhZAXa7eEqm49rdU0TLfiuI6iU8lXDvBUYh3i2yfVOCAAVboTbvBAOJCG6mXPuqkud8gKuPfdA==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477289016189,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477289016189,"lang":1}; TAG START 1477290191101
TOKEN EXPIRED
PAGE NOT IN EXPIRED TOKEN
RESULT 403.
[0mGET /api/home/ads [33m403 [0m3.930 ms - 2[0m
API Cluster worker id: 2
REQUESTING PATH /token/renew;POST;1477290191316
CHECKING API TOKEN d/ccp9dyM0kfuHoIrxkfqQGJUJTrWvaLwe0EeUvRicVidmer8zVUZMALODt75qGxg7CdXLo1ikEs4d6/x7AG5hTPJIngyShmEQG1D5fxKDLyIL4UnyDLBeNBYaqXe8HaHb7ZYP0MV7eKjRzoDGasbRtSddzSo9g9p3ujHy/d8oTUTjyxgMNKVesyGyFACcSIJX2Q7tvfG7/MBtoNGI60CBY20LrGbk9iz50wW6JFiCPcBQ6wvI5hruOVjWXq4FjqZ8kcoBSaCvtVUhZAXa7eEqm49rdU0TLfiuI6iU8lXDvBUYh3i2yfVOCAAVboTbvBAOJCG6mXPuqkud8gKuPfdA==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477289016189,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477289016189,"lang":1}; TAG START 1477290191316
TOKEN EXPIRED
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:POST;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_session
IS_ERR false
NO COOKIES
COOKIES NOT AVAILABLE
DB:OK;SELECT token_session FROM table_user WHERE id=$1;54
TOKEN SESSION 
OCZoXFwX++LvnLpj4RXXc25oEZ1KO2+K0hm3O35WFOeactzhSVHHuyRN5dfQ2w6GRseUew15DKZ9AImwySgkKzOHQbUpAwkPxT9kOcjJGVfQFtpQ/I5g8kSoW8uTsddi7csz58iQ2Wojx2/M+LhPBKtxRLELwXl8GL5StvrBNaLxchRYMlAnNXmZPRJjXwUerImyOiSuxS+O8vvWuhXvwBzwJbzCnL4O2ESZCPXTOZSGjohOHEAcnqABEs6igX/aCemEizZUChIF9CfFTEmTnrGDFPZG84/t63mZJ/XnKcC+kNi+hTBtIJ2ErGJk2gemDFN35HJ3cEEWV7YamieUiA==
OCZoXFwX++LvnLpj4RXXc25oEZ1KO2+K0hm3O35WFOeactzhSVHHuyRN5dfQ2w6GRseUew15DKZ9AImwySgkKzOHQbUpAwkPxT9kOcjJGVfQFtpQ/I5g8kSoW8uTsddi7csz58iQ2Wojx2/M+LhPBKtxRLELwXl8GL5StvrBNaLxchRYMlAnNXmZPRJjXwUerImyOiSuxS+O8vvWuhXvwBzwJbzCnL4O2ESZCPXTOZSGjohOHEAcnqABEs6igX/aCemEizZUChIF9CfFTEmTnrGDFPZG84/t63mZJ/XnKcC+kNi+hTBtIJ2ErGJk2gemDFN35HJ3cEEWV7YamieUiA==
CREATE TOKEN 1477290191316;30000
DB:OK;UPDATE table_user SET token_session=${token_session}, token_access=${token_access} WHERE id=${id_user} RETURNING token_session,token_access;{"token_access":"J82O7fHx9exeIF+4KotIWeF+wndRtntIDYONqqFOadrz725bIBgN1ykxDKFB1Ue+sw1BFtFXTQaTxwg2urmMHX16FI0khyI+xALVI6OfI+B47XkUHfqPJpH4xTyWYRXE2ZF7yWc35YfYJmBEnbyNQWiNlbpNOerCsYqfY7cEjrz6UEPvbNACEX+ZgrqMMCQjTOrT6cN/cmKqiVsJMqYLYszH3l1CXPk326si5r6VBKzwvdITVfExiJaEVrUsq9qVy1fHkdUAXIv4+vOjQxH6NaWgRQvKUE79W3kfG79nKuQjXkw6ofRofUfNNQE2DFK4EB87ajMa2qrhdPhNOYrp8A==","token_session":"cWsE37DtZ1ViAIRO0DlHM+lJcm/1FBLktfN/I1CE5Ld8Q9Rfz0/L2cIezPW3FIdy6TqiFUY94dARiNk0Qo19dMC6YgLhQl+kKUZ6lbPBWBcMA5Oj6OmxEvne3HBzjA8XVVvchovPXhhT8kp+j5ptRUlXHjzjA4sMrXaRFXWpGt582/yzWW6QcrfnmtFfI0Qhvff9j3xwDuC9dPwXstYyuKyTe6ULgipK74lR9U9v8eG4Ro8hAkbo6p6y/iykaMXmMSDhRwEGnuG8lej2BRNskbkZismmVEBBiyl8ScJfX2dSp5n5X/gIDQpmPOaJimdvMM8BFCQrrBxyNxWDdERSTA==","id_user":54}
RESULT 200: {"token":{"token_access":"J82O7fHx9exeIF+4KotIWeF+wndRtntIDYONqqFOadrz725bIBgN1ykxDKFB1Ue+sw1BFtFXTQaTxwg2urmMHX16FI0khyI+xALVI6OfI+B47XkUHfqPJpH4xTyWYRXE2ZF7yWc35YfYJmBEnbyNQWiNlbpNOerCsYqfY7cEjrz6UEPvbNACEX+ZgrqMMCQjTOrT6cN/cmKqiVsJMqYLYszH3l1CXPk326si5r6VBKzwvdITVfExiJaEVrUsq9qVy1fHkdUAXIv4+vOjQxH6NaWgRQvKUE79W3kfG79nKuQjXkw6ofRofUfNNQE2DFK4EB87ajMa2qrhdPhNOYrp8A==","token_session":"cWsE37DtZ1ViAIRO0DlHM+lJcm/1FBLktfN/I1CE5Ld8Q9Rfz0/L2cIezPW3FIdy6TqiFUY94dARiNk0Qo19dMC6YgLhQl+kKUZ6lbPBWBcMA5Oj6OmxEvne3HBzjA8XVVvchovPXhhT8kp+j5ptRUlXHjzjA4sMrXaRFXWpGt582/yzWW6QcrfnmtFfI0Qhvff9j3xwDuC9dPwXstYyuKyTe6ULgipK74lR9U9v8eG4Ro8hAkbo6p6y/iykaMXmMSDhRwEGnuG8lej2BRNskbkZismmVEBBiyl8ScJfX2dSp5n5X/gIDQpmPOaJimdvMM8BFCQrrBxyNxWDdERSTA=="}}
API END token renew /
[0mPOST /api/token/renew [32m200 [0m20.753 ms - 736[0m
API Cluster worker id: 2
REQUESTING PATH /home/ads;GET;1477290191449
CHECKING API TOKEN J82O7fHx9exeIF+4KotIWeF+wndRtntIDYONqqFOadrz725bIBgN1ykxDKFB1Ue+sw1BFtFXTQaTxwg2urmMHX16FI0khyI+xALVI6OfI+B47XkUHfqPJpH4xTyWYRXE2ZF7yWc35YfYJmBEnbyNQWiNlbpNOerCsYqfY7cEjrz6UEPvbNACEX+ZgrqMMCQjTOrT6cN/cmKqiVsJMqYLYszH3l1CXPk326si5r6VBKzwvdITVfExiJaEVrUsq9qVy1fHkdUAXIv4+vOjQxH6NaWgRQvKUE79W3kfG79nKuQjXkw6ofRofUfNNQE2DFK4EB87ajMa2qrhdPhNOYrp8A==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290221316,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290221316,"lang":1}; TAG START 1477290191449
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
DB:OK;SELECT * FROM table_ads WHERE is_active=TRUE ORDER BY id ASC;undefined
RESULT 200: {"home_ads":[{"id":"1","id_user":null,"time_create":"2016-10-23T08:04:04.099Z","ads":[{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"}],"is_active":true},{"id":"2","id_user":null,"time_create":"2016-10-23T08:04:04.100Z","ads":[{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"}],"is_active":true},{"id":"3","id_user":null,"time_create":"2016-10-23T08:04:04.101Z","ads":[{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"}],"is_active":true}]}
[0mGET /api/home/ads [32m200 [0m7.596 ms - 3170[0m
API Cluster worker id: 2
REQUESTING PATH /token/update;POST;1477290196879
CHECKING API TOKEN J82O7fHx9exeIF+4KotIWeF+wndRtntIDYONqqFOadrz725bIBgN1ykxDKFB1Ue+sw1BFtFXTQaTxwg2urmMHX16FI0khyI+xALVI6OfI+B47XkUHfqPJpH4xTyWYRXE2ZF7yWc35YfYJmBEnbyNQWiNlbpNOerCsYqfY7cEjrz6UEPvbNACEX+ZgrqMMCQjTOrT6cN/cmKqiVsJMqYLYszH3l1CXPk326si5r6VBKzwvdITVfExiJaEVrUsq9qVy1fHkdUAXIv4+vOjQxH6NaWgRQvKUE79W3kfG79nKuQjXkw6ofRofUfNNQE2DFK4EB87ajMa2qrhdPhNOYrp8A==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290221316,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290221316,"lang":1}; TAG START 1477290196879
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_fcm
CHECKING imsi
CHECKING longitude
CHECKING latitude
IS_ERR false
DB:OK;SELECT device.id_location,usr.id_device FROM table_user usr LEFT JOIN table_device device ON device.id=usr.id_device WHERE usr.id=${id_user};{"token_fcm":"-","imsi":"-","longitude":"106.82387575507164","latitude":"-6.223644042020981","id_user":54}
DB:OK;SELECT id_location,(random()/10)-(random()/10)+${longitude} AS random_longitude,(random()/10)-(random()/10)+${latitude} AS random_latitude FROM table_store;{"token_fcm":"-","imsi":"-","longitude":"106.82387575507164","latitude":"-6.223644042020981","id_user":54,"id_location":"159","id_device":"24"}
RESULT 200: {"data":[{"id_location":"10","random_longitude":106.773141014157,"random_latitude":-6.22159725735554},{"id_location":"20","random_longitude":106.821603270993,"random_latitude":-6.22699280605311},{"id_location":"30","random_longitude":106.831693709688,"random_latitude":-6.16516223271037},{"id_location":"40","random_longitude":106.882110374002,"random_latitude":-6.20474292580629},{"id_location":"50","random_longitude":106.818876513559,"random_latitude":-6.24783026907252},{"id_location":"60","random_longitude":106.819467926444,"random_latitude":-6.2885129918869},{"id_location":"70","random_longitude":106.88232478681,"random_latitude":-6.15575396279464},{"id_location":"80","random_longitude":106.825326219667,"random_latitude":-6.30279649352314},{"id_location":"90","random_longitude":106.792409899319,"random_latitude":-6.25014679437162},{"id_location":"100","random_longitude":106.809714248776,"random_latitude":-6.21343683289023}]}
[0mPOST /api/token/update [32m200 [0m18.112 ms - 939[0m
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.773141014157 -6.22159725735554)') WHERE id=${id_location};{"id_location":"10","random_longitude":106.773141014157,"random_latitude":-6.22159725735554}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.821603270993 -6.22699280605311)') WHERE id=${id_location};{"id_location":"20","random_longitude":106.821603270993,"random_latitude":-6.22699280605311}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.831693709688 -6.16516223271037)') WHERE id=${id_location};{"id_location":"30","random_longitude":106.831693709688,"random_latitude":-6.16516223271037}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.882110374002 -6.20474292580629)') WHERE id=${id_location};{"id_location":"40","random_longitude":106.882110374002,"random_latitude":-6.20474292580629}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.818876513559 -6.24783026907252)') WHERE id=${id_location};{"id_location":"50","random_longitude":106.818876513559,"random_latitude":-6.24783026907252}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.819467926444 -6.2885129918869)') WHERE id=${id_location};{"id_location":"60","random_longitude":106.819467926444,"random_latitude":-6.2885129918869}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.88232478681 -6.15575396279464)') WHERE id=${id_location};{"id_location":"70","random_longitude":106.88232478681,"random_latitude":-6.15575396279464}
DB:OK;UPDATE table_device SET token_fcm=${token_fcm}, imsi=${imsi} WHERE id=${id_device};{"token_fcm":"-","imsi":"-","longitude":"106.82387575507164","latitude":"-6.223644042020981","id_user":54,"id_location":"159","id_device":"24"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.82387575507164 -6.223644042020981)') WHERE id=${id_location};{"token_fcm":"-","imsi":"-","longitude":"106.82387575507164","latitude":"-6.223644042020981","id_user":54,"id_location":"159","id_device":"24"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.825326219667 -6.30279649352314)') WHERE id=${id_location};{"id_location":"80","random_longitude":106.825326219667,"random_latitude":-6.30279649352314}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.792409899319 -6.25014679437162)') WHERE id=${id_location};{"id_location":"90","random_longitude":106.792409899319,"random_latitude":-6.25014679437162}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.809714248776 -6.21343683289023)') WHERE id=${id_location};{"id_location":"100","random_longitude":106.809714248776,"random_latitude":-6.21343683289023}
API Cluster worker id: 2
REQUESTING PATH /store/nearby;GET;1477290196997
CHECKING API TOKEN J82O7fHx9exeIF+4KotIWeF+wndRtntIDYONqqFOadrz725bIBgN1ykxDKFB1Ue+sw1BFtFXTQaTxwg2urmMHX16FI0khyI+xALVI6OfI+B47XkUHfqPJpH4xTyWYRXE2ZF7yWc35YfYJmBEnbyNQWiNlbpNOerCsYqfY7cEjrz6UEPvbNACEX+ZgrqMMCQjTOrT6cN/cmKqiVsJMqYLYszH3l1CXPk326si5r6VBKzwvdITVfExiJaEVrUsq9qVy1fHkdUAXIv4+vOjQxH6NaWgRQvKUE79W3kfG79nKuQjXkw6ofRofUfNNQE2DFK4EB87ajMa2qrhdPhNOYrp8A==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290221316,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290221316,"lang":1}; TAG START 1477290196997
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING longitude
CHECKING latitude
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT store.*,rating.counted AS rating,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude,ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.82387575507164 -6.223644042020981)')) AS distance_db,${distance} AS distance_max_meter 
		FROM table_store grouping
		LEFT JOIN table_store store ON store.id=grouping.id
		LEFT JOIN table_location_gps location ON location.id=store.id_location
		LEFT JOIN (SELECT AVG(rating) AS counted, id_store FROM table_store_rating GROUP BY id_store) rating ON rating.id_store=store.id
		WHERE ST_DWithin(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.82387575507164 -6.223644042020981)'), ${distance})
		ORDER BY ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.82387575507164 -6.223644042020981)')) ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		;{"longitude":"106.82387575507164","latitude":"-6.223644042020981","distance":"3000","page_go":0,"page_max":null,"id_user":54}
PAGINATION DATA: [{"no":"1","total":"3","id":"2","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 2","address":"Store Address 2","phone":"Store Phone 2","is_delete":false,"id_location":"20","id_schedule":"2","rating":null,"location_longitude":106.821603270993,"location_latitude":-6.22699280605311,"distance_db":447.651817364,"distance_max_meter":"3000","maxno":"3"},{"no":"2","total":"3","id":"10","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 10","address":"Store Address 10","phone":"Store Phone 10","is_delete":false,"id_location":"100","id_schedule":"10","rating":null,"location_longitude":106.809714248776,"location_latitude":-6.21343683289023,"distance_db":1931.422950192,"distance_max_meter":"3000","maxno":"3"},{"no":"3","total":"3","id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","rating":null,"location_longitude":106.818876513559,"location_latitude":-6.24783026907252,"distance_db":2731.30940834,"distance_max_meter":"3000","maxno":"3"}]
HALO {"store_nearby":[{"id":"2","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 2","address":"Store Address 2","phone":"Store Phone 2","is_delete":false,"id_location":"20","id_schedule":"2","rating":null,"location_longitude":106.821603270993,"location_latitude":-6.22699280605311,"distance_db":447.651817364,"distance_max_meter":"3000"},{"id":"10","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 10","address":"Store Address 10","phone":"Store Phone 10","is_delete":false,"id_location":"100","id_schedule":"10","rating":null,"location_longitude":106.809714248776,"location_latitude":-6.21343683289023,"distance_db":1931.422950192,"distance_max_meter":"3000"},{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","rating":null,"location_longitude":106.818876513559,"location_latitude":-6.24783026907252,"distance_db":2731.30940834,"distance_max_meter":"3000"}],"pagination":{"page_go":"#"}}
ERR:null
DONE:{"status":200,"headers":{"content-type":"application/json; charset=UTF-8","date":"Mon, 24 Oct 2016 06:23:17 GMT","expires":"Tue, 25 Oct 2016 06:23:17 GMT","cache-control":"public, max-age=86400","server":"mafe","x-xss-protection":"1; mode=block","x-frame-options":"SAMEORIGIN","alt-svc":"quic=\":443\"; ma=2592000; v=\"36,35,34,33,32\"","accept-ranges":"none","vary":"Accept-Encoding","connection":"close"},"json":{"destination_addresses":["Jl. Prof. DR. Satrio No.3, Karet Kuningan, Kecamatan Setiabudi, Kota Jakarta Selatan, Daerah Khusus Ibukota Jakarta 12940, Indonesia"],"origin_addresses":["Jl. Guru Mughni No.5, Kuningan Tim., Kecamatan Setiabudi, Kota Jakarta Selatan, Daerah Khusus Ibukota Jakarta 12930, Indonesia","Jl. Bendungan Hilir Asahan III No.26, Bend. Hilir, Tanah Abang, Kota Jakarta Pusat, Daerah Khusus Ibukota Jakarta 10210, Indonesia","Jl. Bangka 2G No.26-33, Pela Mampang, Mampang Prpt., Kota Jakarta Selatan, Daerah Khusus Ibukota Jakarta 12720, Indonesia"],"rows":[{"elements":[{"distance":{"text":"1.4 km","value":1418},"duration":{"text":"5 mins","value":329},"status":"OK"}]},{"elements":[{"distance":{"text":"3.7 km","value":3651},"duration":{"text":"12 mins","value":690},"status":"OK"}]},{"elements":[{"distance":{"text":"9.0 km","value":8964},"duration":{"text":"23 mins","value":1395},"status":"OK"}]}],"status":"OK"}}
ELEMENTS:[{"distance":{"text":"1.4 km","value":1418},"duration":{"text":"5 mins","value":329},"status":"OK"}]
RESULT 200: {"store_nearby":[{"id":"2","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 2","address":"Store Address 2","phone":"Store Phone 2","is_delete":false,"id_location":"20","id_schedule":"2","rating":null,"location_longitude":106.821603270993,"location_latitude":-6.22699280605311,"distance_db":447.651817364,"distance_max_meter":"3000","distance_google":1418},{"id":"10","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 10","address":"Store Address 10","phone":"Store Phone 10","is_delete":false,"id_location":"100","id_schedule":"10","rating":null,"location_longitude":106.809714248776,"location_latitude":-6.21343683289023,"distance_db":1931.422950192,"distance_max_meter":"3000","distance_google":3651},{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","rating":null,"location_longitude":106.818876513559,"location_latitude":-6.24783026907252,"distance_db":2731.30940834,"distance_max_meter":"3000","distance_google":8964}],"pagination":{"page_go":"#"}}
[0mGET /api/store/nearby?longitude=106.82387575507164&latitude=-6.223644042020981 [32m200 [0m129.393 ms - 1104[0m
API Cluster worker id: 2
REQUESTING PATH /location;PUT;1477290197848
CHECKING API TOKEN J82O7fHx9exeIF+4KotIWeF+wndRtntIDYONqqFOadrz725bIBgN1ykxDKFB1Ue+sw1BFtFXTQaTxwg2urmMHX16FI0khyI+xALVI6OfI+B47XkUHfqPJpH4xTyWYRXE2ZF7yWc35YfYJmBEnbyNQWiNlbpNOerCsYqfY7cEjrz6UEPvbNACEX+ZgrqMMCQjTOrT6cN/cmKqiVsJMqYLYszH3l1CXPk326si5r6VBKzwvdITVfExiJaEVrUsq9qVy1fHkdUAXIv4+vOjQxH6NaWgRQvKUE79W3kfG79nKuQjXkw6ofRofUfNNQE2DFK4EB87ajMa2qrhdPhNOYrp8A==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290221316,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290221316,"lang":1}; TAG START 1477290197848
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;PUT
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING address
CHECKING longitude
CHECKING latitude
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;INSERT INTO table_location_gps (name,id_user,geom_location) VALUES (${address},${id_user},ST_GeographyFromText('SRID=4326;POINT(106.8238757 -6.223724)')) RETURNING id;{"address":"Jalan Professor Doktor Satrio No.3, Kecamatan Setiabudi, Daerah Khusus Ibukota Jakarta, Indonesia, 12940","latitude":"-6.223724","longitude":"106.8238757","id_user":54}
RESULT 200: {"location":{"id":"167"}}
[0mPUT /api/location?address=Jalan%20Professor%20Doktor%20Satrio%20No.3,%20Kecamatan%20Setiabudi,%20Daerah%20Khusus%20Ibukota%20Jakarta,%20Indonesia,%2012940&latitude=-6.223724&longitude=106.8238757 [32m200 [0m10.763 ms - 25[0m
API Cluster worker id: 2
REQUESTING PATH /trolley;GET;1477290207757
CHECKING API TOKEN J82O7fHx9exeIF+4KotIWeF+wndRtntIDYONqqFOadrz725bIBgN1ykxDKFB1Ue+sw1BFtFXTQaTxwg2urmMHX16FI0khyI+xALVI6OfI+B47XkUHfqPJpH4xTyWYRXE2ZF7yWc35YfYJmBEnbyNQWiNlbpNOerCsYqfY7cEjrz6UEPvbNACEX+ZgrqMMCQjTOrT6cN/cmKqiVsJMqYLYszH3l1CXPk326si5r6VBKzwvdITVfExiJaEVrUsq9qVy1fHkdUAXIv4+vOjQxH6NaWgRQvKUE79W3kfG79nKuQjXkw6ofRofUfNNQE2DFK4EB87ajMa2qrhdPhNOYrp8A==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290221316,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290221316,"lang":1}; TAG START 1477290207757
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;SELECT product.*,trolley.qty AS trolley_qty FROM table_trolley trolley LEFT JOIN table_product product ON product.id=trolley.id_product WHERE trolley.id_user=${id_user};{"id_user":54}
DB:OK;SELECT store.*,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category LEFT JOIN table_store store ON store.id=category.id_store LEFT JOIN table_location_gps location ON location.id=store.id_location WHERE product.id=$1;"21"
[{"id":"21","id_category":"42","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"42","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":"1"}]
{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.818876513559,"location_latitude":-6.24783026907252}
[ { "id": 5, "distance": 5000, "price": 5000 }, { "id": 4, "distance": 4000, "price": 4000 }, { "id": 3, "distance": 3000, "price": 3000 }, { "id": 2, "distance": 2000, "price": 2000 }, { "id": 1, "distance": 1000, "price": 1000 }, { "id": 6, "distance": 0, "price": 0 } ]
RESULT 200: {"trolley":[{"id":"21","id_category":"42","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"42","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":"1"}],"store":{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.818876513559,"location_latitude":-6.24783026907252},"fee_delivery":[{"id":5,"distance":5000,"price":5000},{"id":4,"distance":4000,"price":4000},{"id":3,"distance":3000,"price":3000},{"id":2,"distance":2000,"price":2000},{"id":1,"distance":1000,"price":1000},{"id":6,"distance":0,"price":0}]}
[0mGET /api/trolley [32m200 [0m14.460 ms - 813[0m
API Cluster worker id: 2
REQUESTING PATH /trolley/21;DELETE;1477290209085
CHECKING API TOKEN J82O7fHx9exeIF+4KotIWeF+wndRtntIDYONqqFOadrz725bIBgN1ykxDKFB1Ue+sw1BFtFXTQaTxwg2urmMHX16FI0khyI+xALVI6OfI+B47XkUHfqPJpH4xTyWYRXE2ZF7yWc35YfYJmBEnbyNQWiNlbpNOerCsYqfY7cEjrz6UEPvbNACEX+ZgrqMMCQjTOrT6cN/cmKqiVsJMqYLYszH3l1CXPk326si5r6VBKzwvdITVfExiJaEVrUsq9qVy1fHkdUAXIv4+vOjQxH6NaWgRQvKUE79W3kfG79nKuQjXkw6ofRofUfNNQE2DFK4EB87ajMa2qrhdPhNOYrp8A==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290221316,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290221316,"lang":1}; TAG START 1477290209085
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;DELETE
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;UPDATE table_trolley SET qty=qty-1 WHERE id_product=${id_product} AND id_user=${id_user} AND qty>0 RETURNING *;{"id_product":"21","id_user":54}
RESULT 200: {"trolley":{"id":"118","id_user":"54","id_product":"21","qty":"0","time_create":"2016-10-24T06:03:20.812Z"}}
[0mDELETE /api/trolley/21 [32m200 [0m11.873 ms - 108[0m
DB:OK;DELETE FROM table_trolley WHERE id=${id_trolley};{"id_product":"21","id_user":54,"id_trolley":"118"}
API Cluster worker id: 2
REQUESTING PATH /store/2/product;GET;1477290214922
CHECKING API TOKEN J82O7fHx9exeIF+4KotIWeF+wndRtntIDYONqqFOadrz725bIBgN1ykxDKFB1Ue+sw1BFtFXTQaTxwg2urmMHX16FI0khyI+xALVI6OfI+B47XkUHfqPJpH4xTyWYRXE2ZF7yWc35YfYJmBEnbyNQWiNlbpNOerCsYqfY7cEjrz6UEPvbNACEX+ZgrqMMCQjTOrT6cN/cmKqiVsJMqYLYszH3l1CXPk326si5r6VBKzwvdITVfExiJaEVrUsq9qVy1fHkdUAXIv4+vOjQxH6NaWgRQvKUE79W3kfG79nKuQjXkw6ofRofUfNNQE2DFK4EB87ajMa2qrhdPhNOYrp8A==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290221316,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290221316,"lang":1}; TAG START 1477290214922
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
product query 
Full text search 
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT product.*,trolley.qty AS trolley_qty 
		FROM table_product_category category
		LEFT JOIN table_product product ON product.id_category=category.id
		LEFT JOIN (SELECT * FROM table_trolley WHERE id_user=54) trolley ON trolley.id_product=product.id
		WHERE category.id_store=2  
		ORDER BY product.id ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		LIMIT ${page_max} OFFSET 0;{"search":"","page_go":0,"page_max":25,"id_user":54}
PAGINATION DATA: [{"no":"1","total":"10","id":"2","id_category":"20","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"20","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null,"maxno":"10"},{"no":"2","total":"10","id":"14","id_category":"11","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"11","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null,"maxno":"10"},{"no":"3","total":"10","id":"30","id_category":"12","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"12","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null,"maxno":"10"},{"no":"4","total":"10","id":"31","id_category":"13","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"13","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null,"maxno":"10"},{"no":"5","total":"10","id":"49","id_category":"14","name":"Cat Nippon Paint","description":"Cat Nippon Paint","time_create":"2016-10-23T08:04:04.112Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat1.png","price":"14","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null,"maxno":"10"},{"no":"6","total":"10","id":"52","id_category":"15","name":"Cat Catylac","description":"Cat Catylac","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat2.png","price":"15","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null,"maxno":"10"},{"no":"7","total":"10","id":"61","id_category":"16","name":"Sink Elite","description":"Sink Elite","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink1.jpg","price":"16","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null,"maxno":"10"},{"no":"8","total":"10","id":"72","id_category":"17","name":"Sink American Standard","description":"Sink American Standard","time_create":"2016-10-23T08:04:04.114Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink2.jpg","price":"17","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null,"maxno":"10"},{"no":"9","total":"10","id":"83","id_category":"18","name":"Bata Merah","description":"Bata Merah","time_create":"2016-10-23T08:04:04.115Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata1.jpg","price":"18","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null,"maxno":"10"},{"no":"10","total":"10","id":"94","id_category":"19","name":"Bata Ringan","description":"Bata Ringan","time_create":"2016-10-23T08:04:04.116Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata2.jpg","price":"19","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null,"maxno":"10"}]
TERIMA DATA {"products":[{"id":"2","id_category":"20","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"20","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null},{"id":"14","id_category":"11","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"11","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null},{"id":"30","id_category":"12","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"12","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"31","id_category":"13","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"13","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"49","id_category":"14","name":"Cat Nippon Paint","description":"Cat Nippon Paint","time_create":"2016-10-23T08:04:04.112Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat1.png","price":"14","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"52","id_category":"15","name":"Cat Catylac","description":"Cat Catylac","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat2.png","price":"15","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"61","id_category":"16","name":"Sink Elite","description":"Sink Elite","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink1.jpg","price":"16","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"72","id_category":"17","name":"Sink American Standard","description":"Sink American Standard","time_create":"2016-10-23T08:04:04.114Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink2.jpg","price":"17","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"83","id_category":"18","name":"Bata Merah","description":"Bata Merah","time_create":"2016-10-23T08:04:04.115Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata1.jpg","price":"18","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null},{"id":"94","id_category":"19","name":"Bata Ringan","description":"Bata Ringan","time_create":"2016-10-23T08:04:04.116Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata2.jpg","price":"19","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null}],"pagination":{"page_go":"#"}}
RESULT 200: {"products":[{"id":"2","id_category":"20","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"20","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null},{"id":"14","id_category":"11","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"11","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null},{"id":"30","id_category":"12","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"12","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"31","id_category":"13","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"13","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"49","id_category":"14","name":"Cat Nippon Paint","description":"Cat Nippon Paint","time_create":"2016-10-23T08:04:04.112Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat1.png","price":"14","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"52","id_category":"15","name":"Cat Catylac","description":"Cat Catylac","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat2.png","price":"15","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"61","id_category":"16","name":"Sink Elite","description":"Sink Elite","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink1.jpg","price":"16","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"72","id_category":"17","name":"Sink American Standard","description":"Sink American Standard","time_create":"2016-10-23T08:04:04.114Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink2.jpg","price":"17","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"83","id_category":"18","name":"Bata Merah","description":"Bata Merah","time_create":"2016-10-23T08:04:04.115Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata1.jpg","price":"18","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null},{"id":"94","id_category":"19","name":"Bata Ringan","description":"Bata Ringan","time_create":"2016-10-23T08:04:04.116Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata2.jpg","price":"19","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null}],"pagination":{"page_go":"#"}}
[0mGET /api/store/2/product?search= [32m200 [0m13.321 ms - 2945[0m
API Cluster worker id: 2
REQUESTING PATH /trolley/2;PUT;1477290216038
CHECKING API TOKEN J82O7fHx9exeIF+4KotIWeF+wndRtntIDYONqqFOadrz725bIBgN1ykxDKFB1Ue+sw1BFtFXTQaTxwg2urmMHX16FI0khyI+xALVI6OfI+B47XkUHfqPJpH4xTyWYRXE2ZF7yWc35YfYJmBEnbyNQWiNlbpNOerCsYqfY7cEjrz6UEPvbNACEX+ZgrqMMCQjTOrT6cN/cmKqiVsJMqYLYszH3l1CXPk326si5r6VBKzwvdITVfExiJaEVrUsq9qVy1fHkdUAXIv4+vOjQxH6NaWgRQvKUE79W3kfG79nKuQjXkw6ofRofUfNNQE2DFK4EB87ajMa2qrhdPhNOYrp8A==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290221316,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290221316,"lang":1}; TAG START 1477290216038
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;PUT
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:FAIL;
		SELECT 
		trolley.id 
		FROM table_trolley trolley
		LEFT JOIN table_product product ON product.id=trolley.id_product
		LEFT JOIN table_product_category category ON category.id=product.id_category
		LEFT JOIN (SELECT category.id_store FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category WHERE product.id=${id_product}) wtadd ON wtadd.id_store!=category.id_store
		WHERE trolley.id_user=${id_user} AND wtadd.id_store IS NOT NULL;{"id_product":"2","id_user":54};{"name":"QueryResultError","stack":"QueryResultError: 0\n    at QueryResultError.Error (native)\n    at new QueryResultError (/root/development/xapps/xapps/node_modules/pg-promise/lib/errors/queryResult.js:121:22)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/lib/query.js:176:41)\n    at Query.handleReadyForQuery (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/query.js:106:10)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/client.js:163:19)\n    at emitOne (events.js:95:20)\n    at emit (events.js:182:7)\n    at Socket.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/connection.js:109:12)\n    at emitOne (events.js:90:13)\n    at Socket.emit (events.js:182:7)","message":"No data returned from the query.","code":0,"result":{"command":"SELECT","rowCount":0,"oid":null,"rows":[],"fields":[{"name":"id","tableID":20828,"columnID":1,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"}],"_parsers":[null],"rowAsArray":false,"duration":4},"query":"\n\t\tSELECT \n\t\ttrolley.id \n\t\tFROM table_trolley trolley\n\t\tLEFT JOIN table_product product ON product.id=trolley.id_product\n\t\tLEFT JOIN table_product_category category ON category.id=product.id_category\n\t\tLEFT JOIN (SELECT category.id_store FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category WHERE product.id='2') wtadd ON wtadd.id_store!=category.id_store\n\t\tWHERE trolley.id_user=54 AND wtadd.id_store IS NOT NULL","received":0}
DB:FAIL;UPDATE table_trolley SET qty=qty+1 WHERE id_product=${id_product} AND id_user=${id_user} RETURNING *;{"id_product":"2","id_user":54};{"name":"QueryResultError","stack":"QueryResultError: 0\n    at QueryResultError.Error (native)\n    at new QueryResultError (/root/development/xapps/xapps/node_modules/pg-promise/lib/errors/queryResult.js:121:22)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/lib/query.js:176:41)\n    at Query.handleReadyForQuery (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/query.js:106:10)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/client.js:163:19)\n    at emitOne (events.js:95:20)\n    at emit (events.js:182:7)\n    at Socket.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/connection.js:109:12)\n    at emitOne (events.js:90:13)\n    at Socket.emit (events.js:182:7)","message":"No data returned from the query.","code":0,"result":{"command":"UPDATE","rowCount":0,"oid":null,"rows":[],"fields":[{"name":"id","tableID":20828,"columnID":1,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"},{"name":"id_user","tableID":20828,"columnID":2,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"},{"name":"id_product","tableID":20828,"columnID":3,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"},{"name":"qty","tableID":20828,"columnID":4,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"},{"name":"time_create","tableID":20828,"columnID":5,"dataTypeID":1114,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"}],"_parsers":[null,null,null,null,null],"rowAsArray":false,"duration":1},"query":"UPDATE table_trolley SET qty=qty+1 WHERE id_product='2' AND id_user=54 RETURNING *","received":0}
DB:OK;INSERT INTO table_trolley (id_product,id_user,qty) VALUES (${id_product},${id_user},1) RETURNING *;{"id_product":"2","id_user":54}
RESULT 200: {"trolley":{"id":"120","id_user":"54","id_product":"2","qty":"1","time_create":"2016-10-24T06:23:36.054Z"}}
[0mPUT /api/trolley/2 [32m200 [0m31.468 ms - 107[0m
API Cluster worker id: 2
REQUESTING PATH /trolley/14;PUT;1477290217177
CHECKING API TOKEN J82O7fHx9exeIF+4KotIWeF+wndRtntIDYONqqFOadrz725bIBgN1ykxDKFB1Ue+sw1BFtFXTQaTxwg2urmMHX16FI0khyI+xALVI6OfI+B47XkUHfqPJpH4xTyWYRXE2ZF7yWc35YfYJmBEnbyNQWiNlbpNOerCsYqfY7cEjrz6UEPvbNACEX+ZgrqMMCQjTOrT6cN/cmKqiVsJMqYLYszH3l1CXPk326si5r6VBKzwvdITVfExiJaEVrUsq9qVy1fHkdUAXIv4+vOjQxH6NaWgRQvKUE79W3kfG79nKuQjXkw6ofRofUfNNQE2DFK4EB87ajMa2qrhdPhNOYrp8A==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290221316,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290221316,"lang":1}; TAG START 1477290217177
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;PUT
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:FAIL;
		SELECT 
		trolley.id 
		FROM table_trolley trolley
		LEFT JOIN table_product product ON product.id=trolley.id_product
		LEFT JOIN table_product_category category ON category.id=product.id_category
		LEFT JOIN (SELECT category.id_store FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category WHERE product.id=${id_product}) wtadd ON wtadd.id_store!=category.id_store
		WHERE trolley.id_user=${id_user} AND wtadd.id_store IS NOT NULL;{"id_product":"14","id_user":54};{"name":"QueryResultError","stack":"QueryResultError: 0\n    at QueryResultError.Error (native)\n    at new QueryResultError (/root/development/xapps/xapps/node_modules/pg-promise/lib/errors/queryResult.js:121:22)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/lib/query.js:176:41)\n    at Query.handleReadyForQuery (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/query.js:106:10)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/client.js:163:19)\n    at emitOne (events.js:95:20)\n    at emit (events.js:182:7)\n    at Socket.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/connection.js:109:12)\n    at emitOne (events.js:90:13)\n    at Socket.emit (events.js:182:7)","message":"No data returned from the query.","code":0,"result":{"command":"SELECT","rowCount":0,"oid":null,"rows":[],"fields":[{"name":"id","tableID":20828,"columnID":1,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"}],"_parsers":[null],"rowAsArray":false,"duration":4},"query":"\n\t\tSELECT \n\t\ttrolley.id \n\t\tFROM table_trolley trolley\n\t\tLEFT JOIN table_product product ON product.id=trolley.id_product\n\t\tLEFT JOIN table_product_category category ON category.id=product.id_category\n\t\tLEFT JOIN (SELECT category.id_store FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category WHERE product.id='14') wtadd ON wtadd.id_store!=category.id_store\n\t\tWHERE trolley.id_user=54 AND wtadd.id_store IS NOT NULL","received":0}
DB:FAIL;UPDATE table_trolley SET qty=qty+1 WHERE id_product=${id_product} AND id_user=${id_user} RETURNING *;{"id_product":"14","id_user":54};{"name":"QueryResultError","stack":"QueryResultError: 0\n    at QueryResultError.Error (native)\n    at new QueryResultError (/root/development/xapps/xapps/node_modules/pg-promise/lib/errors/queryResult.js:121:22)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/lib/query.js:176:41)\n    at Query.handleReadyForQuery (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/query.js:106:10)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/client.js:163:19)\n    at emitOne (events.js:95:20)\n    at emit (events.js:182:7)\n    at Socket.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/connection.js:109:12)\n    at emitOne (events.js:90:13)\n    at Socket.emit (events.js:182:7)","message":"No data returned from the query.","code":0,"result":{"command":"UPDATE","rowCount":0,"oid":null,"rows":[],"fields":[{"name":"id","tableID":20828,"columnID":1,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"},{"name":"id_user","tableID":20828,"columnID":2,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"},{"name":"id_product","tableID":20828,"columnID":3,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"},{"name":"qty","tableID":20828,"columnID":4,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"},{"name":"time_create","tableID":20828,"columnID":5,"dataTypeID":1114,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"}],"_parsers":[null,null,null,null,null],"rowAsArray":false,"duration":1},"query":"UPDATE table_trolley SET qty=qty+1 WHERE id_product='14' AND id_user=54 RETURNING *","received":0}
DB:OK;INSERT INTO table_trolley (id_product,id_user,qty) VALUES (${id_product},${id_user},1) RETURNING *;{"id_product":"14","id_user":54}
RESULT 200: {"trolley":{"id":"121","id_user":"54","id_product":"14","qty":"1","time_create":"2016-10-24T06:23:37.189Z"}}
[0mPUT /api/trolley/14 [32m200 [0m15.575 ms - 108[0m
API Cluster worker id: 2
REQUESTING PATH /trolley;GET;1477290218193
CHECKING API TOKEN J82O7fHx9exeIF+4KotIWeF+wndRtntIDYONqqFOadrz725bIBgN1ykxDKFB1Ue+sw1BFtFXTQaTxwg2urmMHX16FI0khyI+xALVI6OfI+B47XkUHfqPJpH4xTyWYRXE2ZF7yWc35YfYJmBEnbyNQWiNlbpNOerCsYqfY7cEjrz6UEPvbNACEX+ZgrqMMCQjTOrT6cN/cmKqiVsJMqYLYszH3l1CXPk326si5r6VBKzwvdITVfExiJaEVrUsq9qVy1fHkdUAXIv4+vOjQxH6NaWgRQvKUE79W3kfG79nKuQjXkw6ofRofUfNNQE2DFK4EB87ajMa2qrhdPhNOYrp8A==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290221316,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290221316,"lang":1}; TAG START 1477290218193
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;SELECT product.*,trolley.qty AS trolley_qty FROM table_trolley trolley LEFT JOIN table_product product ON product.id=trolley.id_product WHERE trolley.id_user=${id_user};{"id_user":54}
DB:OK;SELECT store.*,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category LEFT JOIN table_store store ON store.id=category.id_store LEFT JOIN table_location_gps location ON location.id=store.id_location WHERE product.id=$1;"2"
[{"id":"2","id_category":"20","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"20","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"1"},{"id":"14","id_category":"11","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"11","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"1"}]
{"id":"2","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 2","address":"Store Address 2","phone":"Store Phone 2","is_delete":false,"id_location":"20","id_schedule":"2","location_longitude":106.821603270993,"location_latitude":-6.22699280605311}
[ { "id": 5, "distance": 5000, "price": 5000 }, { "id": 4, "distance": 4000, "price": 4000 }, { "id": 3, "distance": 3000, "price": 3000 }, { "id": 2, "distance": 2000, "price": 2000 }, { "id": 1, "distance": 1000, "price": 1000 }, { "id": 6, "distance": 0, "price": 0 } ]
RESULT 200: {"trolley":[{"id":"2","id_category":"20","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"20","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"1"},{"id":"14","id_category":"11","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"11","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"1"}],"store":{"id":"2","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 2","address":"Store Address 2","phone":"Store Phone 2","is_delete":false,"id_location":"20","id_schedule":"2","location_longitude":106.821603270993,"location_latitude":-6.22699280605311},"fee_delivery":[{"id":5,"distance":5000,"price":5000},{"id":4,"distance":4000,"price":4000},{"id":3,"distance":3000,"price":3000},{"id":2,"distance":2000,"price":2000},{"id":1,"distance":1000,"price":1000},{"id":6,"distance":0,"price":0}]}
[0mGET /api/trolley [32m200 [0m13.415 ms - 1070[0m
API Cluster worker id: 2
REQUESTING PATH /home/ads;GET;1477290393012
CHECKING API TOKEN J82O7fHx9exeIF+4KotIWeF+wndRtntIDYONqqFOadrz725bIBgN1ykxDKFB1Ue+sw1BFtFXTQaTxwg2urmMHX16FI0khyI+xALVI6OfI+B47XkUHfqPJpH4xTyWYRXE2ZF7yWc35YfYJmBEnbyNQWiNlbpNOerCsYqfY7cEjrz6UEPvbNACEX+ZgrqMMCQjTOrT6cN/cmKqiVsJMqYLYszH3l1CXPk326si5r6VBKzwvdITVfExiJaEVrUsq9qVy1fHkdUAXIv4+vOjQxH6NaWgRQvKUE79W3kfG79nKuQjXkw6ofRofUfNNQE2DFK4EB87ajMa2qrhdPhNOYrp8A==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290221316,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290221316,"lang":1}; TAG START 1477290393012
TOKEN EXPIRED
PAGE NOT IN EXPIRED TOKEN
RESULT 403.
[0mGET /api/home/ads [33m403 [0m3.422 ms - 2[0m
API Cluster worker id: 2
REQUESTING PATH /token/renew;POST;1477290393100
CHECKING API TOKEN J82O7fHx9exeIF+4KotIWeF+wndRtntIDYONqqFOadrz725bIBgN1ykxDKFB1Ue+sw1BFtFXTQaTxwg2urmMHX16FI0khyI+xALVI6OfI+B47XkUHfqPJpH4xTyWYRXE2ZF7yWc35YfYJmBEnbyNQWiNlbpNOerCsYqfY7cEjrz6UEPvbNACEX+ZgrqMMCQjTOrT6cN/cmKqiVsJMqYLYszH3l1CXPk326si5r6VBKzwvdITVfExiJaEVrUsq9qVy1fHkdUAXIv4+vOjQxH6NaWgRQvKUE79W3kfG79nKuQjXkw6ofRofUfNNQE2DFK4EB87ajMa2qrhdPhNOYrp8A==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290221316,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290221316,"lang":1}; TAG START 1477290393100
TOKEN EXPIRED
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:POST;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_session
IS_ERR false
NO COOKIES
COOKIES NOT AVAILABLE
DB:OK;SELECT token_session FROM table_user WHERE id=$1;54
TOKEN SESSION 
cWsE37DtZ1ViAIRO0DlHM+lJcm/1FBLktfN/I1CE5Ld8Q9Rfz0/L2cIezPW3FIdy6TqiFUY94dARiNk0Qo19dMC6YgLhQl+kKUZ6lbPBWBcMA5Oj6OmxEvne3HBzjA8XVVvchovPXhhT8kp+j5ptRUlXHjzjA4sMrXaRFXWpGt582/yzWW6QcrfnmtFfI0Qhvff9j3xwDuC9dPwXstYyuKyTe6ULgipK74lR9U9v8eG4Ro8hAkbo6p6y/iykaMXmMSDhRwEGnuG8lej2BRNskbkZismmVEBBiyl8ScJfX2dSp5n5X/gIDQpmPOaJimdvMM8BFCQrrBxyNxWDdERSTA==
cWsE37DtZ1ViAIRO0DlHM+lJcm/1FBLktfN/I1CE5Ld8Q9Rfz0/L2cIezPW3FIdy6TqiFUY94dARiNk0Qo19dMC6YgLhQl+kKUZ6lbPBWBcMA5Oj6OmxEvne3HBzjA8XVVvchovPXhhT8kp+j5ptRUlXHjzjA4sMrXaRFXWpGt582/yzWW6QcrfnmtFfI0Qhvff9j3xwDuC9dPwXstYyuKyTe6ULgipK74lR9U9v8eG4Ro8hAkbo6p6y/iykaMXmMSDhRwEGnuG8lej2BRNskbkZismmVEBBiyl8ScJfX2dSp5n5X/gIDQpmPOaJimdvMM8BFCQrrBxyNxWDdERSTA==
CREATE TOKEN 1477290393100;30000
DB:OK;UPDATE table_user SET token_session=${token_session}, token_access=${token_access} WHERE id=${id_user} RETURNING token_session,token_access;{"token_access":"kCTMlJUHbNyDeHKneXMkTSVZIzcYbAyThxM3zSrxHAhdXHHBQX7U35WkUqqMdj8DNmQkmP6R+63o67+4P2HlwnstyyJH+JVqASlTl9Z49fdurrWihkSQufkkuv5PFKgMjCMk6GDuLzxN2QTxtVdfvIGvKb70lEzmiHbac2e6HRdjX5LtgLN8B561Mw5y/knymGxB5GXY3OnumtjHok1xyAcZEMwv/yC7wmlSA8miIK5J10rKhzzV8c9i4FF/GAmNqI7je+mhD5peKJLtpC0kvF8pmYCKB2JZKaUe2Zc+5edoxWvVpBEhUWHiIMu5tYKlEz6jq3vzsf59MBjnI+6hGA==","token_session":"q2TtgVpB5UWIFg/SFMCm1UTFqOvSZT/KOrMjckMqhcI+pQvCQrX0JZ3Jq9e/emDhnlPinCzb/vlp7mQyovi4l7gW6z1uA8lVgf9UsYp3NGNmQKFl7bry8z70YjYygY/8P0Hu/8ccQMD/ZtH9CQBblvxbJHuThOkOXBt2GO9eXseOCXECeOneuq7LzAYmzdmS0XZPwX0BD5aFfJAexD7Fuv9vJsdxKFaiyeHVotL+fFGsk57QEgrDQgaiDzMvJRZ4o058u7SCd5Z/vN6H77561FyL4enLWhOQVOyJeGvGU45ZtrITvRsm90I+56l7AdqU/m23DCnVZuhgfOVGF1wv3g==","id_user":54}
RESULT 200: {"token":{"token_access":"kCTMlJUHbNyDeHKneXMkTSVZIzcYbAyThxM3zSrxHAhdXHHBQX7U35WkUqqMdj8DNmQkmP6R+63o67+4P2HlwnstyyJH+JVqASlTl9Z49fdurrWihkSQufkkuv5PFKgMjCMk6GDuLzxN2QTxtVdfvIGvKb70lEzmiHbac2e6HRdjX5LtgLN8B561Mw5y/knymGxB5GXY3OnumtjHok1xyAcZEMwv/yC7wmlSA8miIK5J10rKhzzV8c9i4FF/GAmNqI7je+mhD5peKJLtpC0kvF8pmYCKB2JZKaUe2Zc+5edoxWvVpBEhUWHiIMu5tYKlEz6jq3vzsf59MBjnI+6hGA==","token_session":"q2TtgVpB5UWIFg/SFMCm1UTFqOvSZT/KOrMjckMqhcI+pQvCQrX0JZ3Jq9e/emDhnlPinCzb/vlp7mQyovi4l7gW6z1uA8lVgf9UsYp3NGNmQKFl7bry8z70YjYygY/8P0Hu/8ccQMD/ZtH9CQBblvxbJHuThOkOXBt2GO9eXseOCXECeOneuq7LzAYmzdmS0XZPwX0BD5aFfJAexD7Fuv9vJsdxKFaiyeHVotL+fFGsk57QEgrDQgaiDzMvJRZ4o058u7SCd5Z/vN6H77561FyL4enLWhOQVOyJeGvGU45ZtrITvRsm90I+56l7AdqU/m23DCnVZuhgfOVGF1wv3g=="}}
API END token renew /
[0mPOST /api/token/renew [32m200 [0m18.581 ms - 736[0m
API Cluster worker id: 2
REQUESTING PATH /home/ads;GET;1477290393260
CHECKING API TOKEN kCTMlJUHbNyDeHKneXMkTSVZIzcYbAyThxM3zSrxHAhdXHHBQX7U35WkUqqMdj8DNmQkmP6R+63o67+4P2HlwnstyyJH+JVqASlTl9Z49fdurrWihkSQufkkuv5PFKgMjCMk6GDuLzxN2QTxtVdfvIGvKb70lEzmiHbac2e6HRdjX5LtgLN8B561Mw5y/knymGxB5GXY3OnumtjHok1xyAcZEMwv/yC7wmlSA8miIK5J10rKhzzV8c9i4FF/GAmNqI7je+mhD5peKJLtpC0kvF8pmYCKB2JZKaUe2Zc+5edoxWvVpBEhUWHiIMu5tYKlEz6jq3vzsf59MBjnI+6hGA==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290423100,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290423100,"lang":1}; TAG START 1477290393260
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
DB:OK;SELECT * FROM table_ads WHERE is_active=TRUE ORDER BY id ASC;undefined
RESULT 200: {"home_ads":[{"id":"1","id_user":null,"time_create":"2016-10-23T08:04:04.099Z","ads":[{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"}],"is_active":true},{"id":"2","id_user":null,"time_create":"2016-10-23T08:04:04.100Z","ads":[{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"}],"is_active":true},{"id":"3","id_user":null,"time_create":"2016-10-23T08:04:04.101Z","ads":[{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"}],"is_active":true}]}
[0mGET /api/home/ads [32m200 [0m7.801 ms - 3170[0m
API Cluster worker id: 2
REQUESTING PATH /trolley;GET;1477290394555
CHECKING API TOKEN kCTMlJUHbNyDeHKneXMkTSVZIzcYbAyThxM3zSrxHAhdXHHBQX7U35WkUqqMdj8DNmQkmP6R+63o67+4P2HlwnstyyJH+JVqASlTl9Z49fdurrWihkSQufkkuv5PFKgMjCMk6GDuLzxN2QTxtVdfvIGvKb70lEzmiHbac2e6HRdjX5LtgLN8B561Mw5y/knymGxB5GXY3OnumtjHok1xyAcZEMwv/yC7wmlSA8miIK5J10rKhzzV8c9i4FF/GAmNqI7je+mhD5peKJLtpC0kvF8pmYCKB2JZKaUe2Zc+5edoxWvVpBEhUWHiIMu5tYKlEz6jq3vzsf59MBjnI+6hGA==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290423100,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290423100,"lang":1}; TAG START 1477290394555
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;SELECT product.*,trolley.qty AS trolley_qty FROM table_trolley trolley LEFT JOIN table_product product ON product.id=trolley.id_product WHERE trolley.id_user=${id_user};{"id_user":54}
DB:OK;SELECT store.*,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category LEFT JOIN table_store store ON store.id=category.id_store LEFT JOIN table_location_gps location ON location.id=store.id_location WHERE product.id=$1;"2"
[{"id":"2","id_category":"20","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"20","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"1"},{"id":"14","id_category":"11","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"11","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"1"}]
{"id":"2","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 2","address":"Store Address 2","phone":"Store Phone 2","is_delete":false,"id_location":"20","id_schedule":"2","location_longitude":106.821603270993,"location_latitude":-6.22699280605311}
[ { "id": 5, "distance": 5000, "price": 5000 }, { "id": 4, "distance": 4000, "price": 4000 }, { "id": 3, "distance": 3000, "price": 3000 }, { "id": 2, "distance": 2000, "price": 2000 }, { "id": 1, "distance": 1000, "price": 1000 }, { "id": 6, "distance": 0, "price": 0 } ]
RESULT 200: {"trolley":[{"id":"2","id_category":"20","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"20","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"1"},{"id":"14","id_category":"11","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"11","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"1"}],"store":{"id":"2","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 2","address":"Store Address 2","phone":"Store Phone 2","is_delete":false,"id_location":"20","id_schedule":"2","location_longitude":106.821603270993,"location_latitude":-6.22699280605311},"fee_delivery":[{"id":5,"distance":5000,"price":5000},{"id":4,"distance":4000,"price":4000},{"id":3,"distance":3000,"price":3000},{"id":2,"distance":2000,"price":2000},{"id":1,"distance":1000,"price":1000},{"id":6,"distance":0,"price":0}]}
[0mGET /api/trolley [32m200 [0m20.070 ms - 1070[0m
API Cluster worker id: 2
REQUESTING PATH /trolley/confirm;POST;1477290407265
CHECKING API TOKEN kCTMlJUHbNyDeHKneXMkTSVZIzcYbAyThxM3zSrxHAhdXHHBQX7U35WkUqqMdj8DNmQkmP6R+63o67+4P2HlwnstyyJH+JVqASlTl9Z49fdurrWihkSQufkkuv5PFKgMjCMk6GDuLzxN2QTxtVdfvIGvKb70lEzmiHbac2e6HRdjX5LtgLN8B561Mw5y/knymGxB5GXY3OnumtjHok1xyAcZEMwv/yC7wmlSA8miIK5J10rKhzzV8c9i4FF/GAmNqI7je+mhD5peKJLtpC0kvF8pmYCKB2JZKaUe2Zc+5edoxWvVpBEhUWHiIMu5tYKlEz6jq3vzsf59MBjnI+6hGA==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290423100,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290423100,"lang":1}; TAG START 1477290407265
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING distance
CHECKING recipient_name
CHECKING recipient_phone
CHECKING recipient_remark
DECISION TRUE
CHECKING destination_remark
DECISION TRUE
IS_ERR true
BODY:{"distance":"0","destination_remark":"","recipient_name":"tes","recipient_phone":"0825253532","recipient_remark":"","id_destination":"167"}
QUERY:{}
RESULT 422: {"id":"Parameter tidak lengkap","en":"Incomplete parameter","cn":"n/a"}
LANGUAGE: {"money_max_cashout":"10000000","is_discount_shipment":"TRUE","page_pagination":"25","key_googlemaps":"AIzaSyDnL8pHV_HPAmrSgzFuQm__trcIZ3atIqI","timer_auto_complete":"3","distance_max":"3000","language":"en","fee_delivery":"[ { \"id\": 5, \"distance\": 5000, \"price\": 5000 }, { \"id\": 4, \"distance\": 4000, \"price\": 4000 }, { \"id\": 3, \"distance\": 3000, \"price\": 3000 }, { \"id\": 2, \"distance\": 2000, \"price\": 2000 }, { \"id\": 1, \"distance\": 1000, \"price\": 1000 }, { \"id\": 6, \"distance\": 0, \"price\": 0 } ]","worker_special":"[1]","is_maintenance":"FALSE","time_max_delivery":"3","token_access_expire":"30000","money_max_topup":"10000000"}
[0mPOST /api/trolley/confirm [33m422 [0m7.477 ms - 48[0m
API Cluster worker id: 2
REQUESTING PATH /trolley/confirm;POST;1477290408681
CHECKING API TOKEN kCTMlJUHbNyDeHKneXMkTSVZIzcYbAyThxM3zSrxHAhdXHHBQX7U35WkUqqMdj8DNmQkmP6R+63o67+4P2HlwnstyyJH+JVqASlTl9Z49fdurrWihkSQufkkuv5PFKgMjCMk6GDuLzxN2QTxtVdfvIGvKb70lEzmiHbac2e6HRdjX5LtgLN8B561Mw5y/knymGxB5GXY3OnumtjHok1xyAcZEMwv/yC7wmlSA8miIK5J10rKhzzV8c9i4FF/GAmNqI7je+mhD5peKJLtpC0kvF8pmYCKB2JZKaUe2Zc+5edoxWvVpBEhUWHiIMu5tYKlEz6jq3vzsf59MBjnI+6hGA==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290423100,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290423100,"lang":1}; TAG START 1477290408681
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING distance
CHECKING recipient_name
CHECKING recipient_phone
CHECKING recipient_remark
DECISION TRUE
CHECKING destination_remark
DECISION TRUE
IS_ERR true
BODY:{"distance":"0","destination_remark":"","recipient_name":"tes","recipient_phone":"0825253532","recipient_remark":"","id_destination":"167"}
QUERY:{}
RESULT 422: {"id":"Parameter tidak lengkap","en":"Incomplete parameter","cn":"n/a"}
LANGUAGE: {"money_max_cashout":"10000000","is_discount_shipment":"TRUE","page_pagination":"25","key_googlemaps":"AIzaSyDnL8pHV_HPAmrSgzFuQm__trcIZ3atIqI","timer_auto_complete":"3","distance_max":"3000","language":"en","fee_delivery":"[ { \"id\": 5, \"distance\": 5000, \"price\": 5000 }, { \"id\": 4, \"distance\": 4000, \"price\": 4000 }, { \"id\": 3, \"distance\": 3000, \"price\": 3000 }, { \"id\": 2, \"distance\": 2000, \"price\": 2000 }, { \"id\": 1, \"distance\": 1000, \"price\": 1000 }, { \"id\": 6, \"distance\": 0, \"price\": 0 } ]","worker_special":"[1]","is_maintenance":"FALSE","time_max_delivery":"3","token_access_expire":"30000","money_max_topup":"10000000"}
[0mPOST /api/trolley/confirm [33m422 [0m4.252 ms - 48[0m
API Cluster worker id: 2
REQUESTING PATH /trolley/confirm;POST;1477290410270
CHECKING API TOKEN kCTMlJUHbNyDeHKneXMkTSVZIzcYbAyThxM3zSrxHAhdXHHBQX7U35WkUqqMdj8DNmQkmP6R+63o67+4P2HlwnstyyJH+JVqASlTl9Z49fdurrWihkSQufkkuv5PFKgMjCMk6GDuLzxN2QTxtVdfvIGvKb70lEzmiHbac2e6HRdjX5LtgLN8B561Mw5y/knymGxB5GXY3OnumtjHok1xyAcZEMwv/yC7wmlSA8miIK5J10rKhzzV8c9i4FF/GAmNqI7je+mhD5peKJLtpC0kvF8pmYCKB2JZKaUe2Zc+5edoxWvVpBEhUWHiIMu5tYKlEz6jq3vzsf59MBjnI+6hGA==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290423100,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290423100,"lang":1}; TAG START 1477290410270
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING distance
CHECKING recipient_name
CHECKING recipient_phone
CHECKING recipient_remark
CHECKING destination_remark
DECISION TRUE
IS_ERR true
BODY:{"distance":"0","destination_remark":"","recipient_name":"tes","recipient_phone":"0825253532","recipient_remark":"hshwgw","id_destination":"167"}
QUERY:{}
RESULT 422: {"id":"Parameter tidak lengkap","en":"Incomplete parameter","cn":"n/a"}
LANGUAGE: {"money_max_cashout":"10000000","is_discount_shipment":"TRUE","page_pagination":"25","key_googlemaps":"AIzaSyDnL8pHV_HPAmrSgzFuQm__trcIZ3atIqI","timer_auto_complete":"3","distance_max":"3000","language":"en","fee_delivery":"[ { \"id\": 5, \"distance\": 5000, \"price\": 5000 }, { \"id\": 4, \"distance\": 4000, \"price\": 4000 }, { \"id\": 3, \"distance\": 3000, \"price\": 3000 }, { \"id\": 2, \"distance\": 2000, \"price\": 2000 }, { \"id\": 1, \"distance\": 1000, \"price\": 1000 }, { \"id\": 6, \"distance\": 0, \"price\": 0 } ]","worker_special":"[1]","is_maintenance":"FALSE","time_max_delivery":"3","token_access_expire":"30000","money_max_topup":"10000000"}
[0mPOST /api/trolley/confirm [33m422 [0m5.440 ms - 48[0m
API Cluster worker id: 2
REQUESTING PATH /trolley/confirm;POST;1477290413130
CHECKING API TOKEN kCTMlJUHbNyDeHKneXMkTSVZIzcYbAyThxM3zSrxHAhdXHHBQX7U35WkUqqMdj8DNmQkmP6R+63o67+4P2HlwnstyyJH+JVqASlTl9Z49fdurrWihkSQufkkuv5PFKgMjCMk6GDuLzxN2QTxtVdfvIGvKb70lEzmiHbac2e6HRdjX5LtgLN8B561Mw5y/knymGxB5GXY3OnumtjHok1xyAcZEMwv/yC7wmlSA8miIK5J10rKhzzV8c9i4FF/GAmNqI7je+mhD5peKJLtpC0kvF8pmYCKB2JZKaUe2Zc+5edoxWvVpBEhUWHiIMu5tYKlEz6jq3vzsf59MBjnI+6hGA==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290423100,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290423100,"lang":1}; TAG START 1477290413130
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING distance
CHECKING recipient_name
CHECKING recipient_phone
CHECKING recipient_remark
CHECKING destination_remark
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;SELECT category.id_store FROM table_trolley trolley LEFT JOIN table_product product ON product.id=trolley.id_product LEFT JOIN table_product_category category ON category.id=product.id_category WHERE trolley.id_user=${id_user} LIMIT 1 OFFSET 0;{"distance":"0","destination_remark":"hejwjw","recipient_name":"tes","recipient_phone":"0825253532","recipient_remark":"hshwgw","id_destination":"167","id_user":54}
ROW.DISTANCE:5000;0
ROW.DISTANCE:4000;0
ROW.DISTANCE:3000;0
ROW.DISTANCE:2000;0
ROW.DISTANCE:1000;0
ROW.DISTANCE:0;0
DB:OK;INSERT INTO table_trolley_confirm (id_customer,id_store,recipient_name,recipient_phone,recipient_remark,destination_remark,distance,fee_delivery,id_destination) SELECT ${id_user},${id_store},${recipient_name},${recipient_phone},${recipient_remark},${destination_remark},${distance},${fee_delivery},${id_destination} RETURNING id,time_create,generated_number;{"distance":"0","destination_remark":"hejwjw","recipient_name":"tes","recipient_phone":"0825253532","recipient_remark":"hshwgw","id_destination":"167","id_user":54,"id_store":"2","fee_delivery":0}
DB:OK;INSERT INTO table_trolley_confirm_detail (id_product,id_trolley_confirm,qty) SELECT trolley.id_product,${id_trolley_confirm},trolley.qty FROM table_trolley trolley LEFT JOIN table_product product ON product.id=trolley.id_product LEFT JOIN table_product_category category ON category.id=product.id_category WHERE trolley.id_user=${id_user} AND category.id_store=${id_store} RETURNING id;{"distance":"0","destination_remark":"hejwjw","recipient_name":"tes","recipient_phone":"0825253532","recipient_remark":"hshwgw","id_destination":"167","id_user":54,"id_store":"2","fee_delivery":0,"id_trolley_confirm":"2"}
DB:OK;DELETE FROM table_trolley WHERE id_user=${id_user} RETURNING id;{"distance":"0","destination_remark":"hejwjw","recipient_name":"tes","recipient_phone":"0825253532","recipient_remark":"hshwgw","id_destination":"167","id_user":54,"id_store":"2","fee_delivery":0,"id_trolley_confirm":"2"}
DB:OK;SELECT trolley_confirm.* FROM table_trolley_confirm trolley_confirm WHERE id=${id_trolley_confirm};{"distance":"0","destination_remark":"hejwjw","recipient_name":"tes","recipient_phone":"0825253532","recipient_remark":"hshwgw","id_destination":"167","id_user":54,"id_store":"2","fee_delivery":0,"id_trolley_confirm":"2"}
DB:OK;SELECT store.*,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude FROM table_store store LEFT JOIN table_location_gps location ON location.id=store.id_location WHERE store.id=${id_store};{"distance":"0","destination_remark":"hejwjw","recipient_name":"tes","recipient_phone":"0825253532","recipient_remark":"hshwgw","id_destination":"167","id_user":54,"id_store":"2","fee_delivery":0,"id_trolley_confirm":"2"}
DB:OK;SELECT *,ST_X(geom_location::geometry) AS location_longitude,ST_Y(geom_location::geometry) AS location_latitude FROM table_location_gps WHERE id=${id_destination};{"distance":"0","destination_remark":"hejwjw","recipient_name":"tes","recipient_phone":"0825253532","recipient_remark":"hshwgw","id_destination":"167","id_user":54,"id_store":"2","fee_delivery":0,"id_trolley_confirm":"2"}
DB:OK;SELECT product.*,tcd.qty FROM table_trolley_confirm_detail tcd LEFT JOIN table_product product ON product.id=tcd.id_product WHERE tcd.id_trolley_confirm=${id_trolley_confirm};{"distance":"0","destination_remark":"hejwjw","recipient_name":"tes","recipient_phone":"0825253532","recipient_remark":"hshwgw","id_destination":"167","id_user":54,"id_store":"2","fee_delivery":0,"id_trolley_confirm":"2"}
RESULT 200: {"trolley_confirm":{"id":"2","id_customer":"54","id_store":"2","recipient_name":"tes","recipient_phone":"0825253532","recipient_remark":"hshwgw","destination_remark":"hejwjw","time_create":"2016-10-24T06:26:53.138Z","generated_number":null,"distance":"0","fee_delivery":"0","id_destination":"167"},"store":{"id":"2","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 2","address":"Store Address 2","phone":"Store Phone 2","is_delete":false,"id_location":"20","id_schedule":"2","location_longitude":106.821603270993,"location_latitude":-6.22699280605311},"products":[{"id":"2","id_category":"20","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"20","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","qty":"1"},{"id":"14","id_category":"11","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"11","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","qty":"1"}],"destination":{"id":"167","name":"Jalan Professor Doktor Satrio No.3, Kecamatan Setiabudi, Daerah Khusus Ibukota Jakarta, Indonesia, 12940","description":null,"time_create":"2016-10-24T06:23:17.852Z","id_user":"54","geom_location":"0101000020E610000006DE2461BAB45A403B527DE717E518C0","location_longitude":106.8238757,"location_latitude":-6.223724}}
[0mPOST /api/trolley/confirm [32m200 [0m33.647 ms - 1461[0m
API Cluster worker id: 2
REQUESTING PATH /home/ads;GET;1477290420996
CHECKING API TOKEN kCTMlJUHbNyDeHKneXMkTSVZIzcYbAyThxM3zSrxHAhdXHHBQX7U35WkUqqMdj8DNmQkmP6R+63o67+4P2HlwnstyyJH+JVqASlTl9Z49fdurrWihkSQufkkuv5PFKgMjCMk6GDuLzxN2QTxtVdfvIGvKb70lEzmiHbac2e6HRdjX5LtgLN8B561Mw5y/knymGxB5GXY3OnumtjHok1xyAcZEMwv/yC7wmlSA8miIK5J10rKhzzV8c9i4FF/GAmNqI7je+mhD5peKJLtpC0kvF8pmYCKB2JZKaUe2Zc+5edoxWvVpBEhUWHiIMu5tYKlEz6jq3vzsf59MBjnI+6hGA==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290423100,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290423100,"lang":1}; TAG START 1477290420996
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
DB:OK;SELECT * FROM table_ads WHERE is_active=TRUE ORDER BY id ASC;undefined
RESULT 200: {"home_ads":[{"id":"1","id_user":null,"time_create":"2016-10-23T08:04:04.099Z","ads":[{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"}],"is_active":true},{"id":"2","id_user":null,"time_create":"2016-10-23T08:04:04.100Z","ads":[{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"}],"is_active":true},{"id":"3","id_user":null,"time_create":"2016-10-23T08:04:04.101Z","ads":[{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"}],"is_active":true}]}
[0mGET /api/home/ads [32m200 [0m7.014 ms - 3170[0m
API Cluster worker id: 2
REQUESTING PATH /token/update;POST;1477290617925
CHECKING API TOKEN kCTMlJUHbNyDeHKneXMkTSVZIzcYbAyThxM3zSrxHAhdXHHBQX7U35WkUqqMdj8DNmQkmP6R+63o67+4P2HlwnstyyJH+JVqASlTl9Z49fdurrWihkSQufkkuv5PFKgMjCMk6GDuLzxN2QTxtVdfvIGvKb70lEzmiHbac2e6HRdjX5LtgLN8B561Mw5y/knymGxB5GXY3OnumtjHok1xyAcZEMwv/yC7wmlSA8miIK5J10rKhzzV8c9i4FF/GAmNqI7je+mhD5peKJLtpC0kvF8pmYCKB2JZKaUe2Zc+5edoxWvVpBEhUWHiIMu5tYKlEz6jq3vzsf59MBjnI+6hGA==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290423100,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290423100,"lang":1}; TAG START 1477290617925
TOKEN EXPIRED
PAGE NOT IN EXPIRED TOKEN
RESULT 403.
[0mPOST /api/token/update [33m403 [0m7.983 ms - 2[0m
API Cluster worker id: 2
REQUESTING PATH /token/renew;POST;1477290618000
CHECKING API TOKEN kCTMlJUHbNyDeHKneXMkTSVZIzcYbAyThxM3zSrxHAhdXHHBQX7U35WkUqqMdj8DNmQkmP6R+63o67+4P2HlwnstyyJH+JVqASlTl9Z49fdurrWihkSQufkkuv5PFKgMjCMk6GDuLzxN2QTxtVdfvIGvKb70lEzmiHbac2e6HRdjX5LtgLN8B561Mw5y/knymGxB5GXY3OnumtjHok1xyAcZEMwv/yC7wmlSA8miIK5J10rKhzzV8c9i4FF/GAmNqI7je+mhD5peKJLtpC0kvF8pmYCKB2JZKaUe2Zc+5edoxWvVpBEhUWHiIMu5tYKlEz6jq3vzsf59MBjnI+6hGA==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290423100,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290423100,"lang":1}; TAG START 1477290618000
TOKEN EXPIRED
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:POST;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_session
IS_ERR false
NO COOKIES
COOKIES NOT AVAILABLE
DB:OK;SELECT token_session FROM table_user WHERE id=$1;54
TOKEN SESSION 
q2TtgVpB5UWIFg/SFMCm1UTFqOvSZT/KOrMjckMqhcI+pQvCQrX0JZ3Jq9e/emDhnlPinCzb/vlp7mQyovi4l7gW6z1uA8lVgf9UsYp3NGNmQKFl7bry8z70YjYygY/8P0Hu/8ccQMD/ZtH9CQBblvxbJHuThOkOXBt2GO9eXseOCXECeOneuq7LzAYmzdmS0XZPwX0BD5aFfJAexD7Fuv9vJsdxKFaiyeHVotL+fFGsk57QEgrDQgaiDzMvJRZ4o058u7SCd5Z/vN6H77561FyL4enLWhOQVOyJeGvGU45ZtrITvRsm90I+56l7AdqU/m23DCnVZuhgfOVGF1wv3g==
q2TtgVpB5UWIFg/SFMCm1UTFqOvSZT/KOrMjckMqhcI+pQvCQrX0JZ3Jq9e/emDhnlPinCzb/vlp7mQyovi4l7gW6z1uA8lVgf9UsYp3NGNmQKFl7bry8z70YjYygY/8P0Hu/8ccQMD/ZtH9CQBblvxbJHuThOkOXBt2GO9eXseOCXECeOneuq7LzAYmzdmS0XZPwX0BD5aFfJAexD7Fuv9vJsdxKFaiyeHVotL+fFGsk57QEgrDQgaiDzMvJRZ4o058u7SCd5Z/vN6H77561FyL4enLWhOQVOyJeGvGU45ZtrITvRsm90I+56l7AdqU/m23DCnVZuhgfOVGF1wv3g==
CREATE TOKEN 1477290618000;30000
DB:OK;UPDATE table_user SET token_session=${token_session}, token_access=${token_access} WHERE id=${id_user} RETURNING token_session,token_access;{"token_access":"qbUP2ztGvS/3PQCTezuSmj1nbbL+u1WFNqccgdXWEpk+0N5FuFvF4Rz0n+2IILUiViGZjc47H6qSOiq2f91KY1KpWJTeHuJsH1TsYoHtSy4kNzZ7zjxODrdPa+OLwefdjhW7AAZQ4lqJDBSPCy1/F5uiRCPrF3ObOHiQ/eah1tvwCTG5gTv3AdFA3sDWFUYwcnCFuV4na9d2jK+hX1x54k5I6zquo3qoZZw8UtLWKSo2nJorQ9Dh/0Ku3jMCL573bF2vrFwpN8DCvK6ntnaiQ35rT/rywjq4HAJTzo6wRGWQBpPcWlYXrOcJ946FnoBPzcs89JrFpSV3veSzRfoO/w==","token_session":"bptiaAh3VsP0GJuCeu08Ohkrk3JKn/nGaCQe/Yxx4DbPkxqA/MiyjbOOYE+43j8TGFToqa9fbxdnMSGAjW4uif6/GMmGFx3U0cxwSvWY+5UyRrLM+HE3JM/yHlSlq/qK6PAuQY2l1yhW3bpTScw8lt/W9UeUNVmH2Be3oU0y/EYhRLqmWL/7CLFehluIugUzR+XG7eYROCDBpJfkgBURO0ngfAVHs8T5EYIhYPwHO/ro9G+SlT9V63zB36CnIBjDfwonEeRugJ0hR3XceArTn+A81UbTtXe0ZdRTjMCwxudZErfpXhgN5X1BAtCtlSDPRcsnntKOd7GYv/OVjJd54Q==","id_user":54}
RESULT 200: {"token":{"token_access":"qbUP2ztGvS/3PQCTezuSmj1nbbL+u1WFNqccgdXWEpk+0N5FuFvF4Rz0n+2IILUiViGZjc47H6qSOiq2f91KY1KpWJTeHuJsH1TsYoHtSy4kNzZ7zjxODrdPa+OLwefdjhW7AAZQ4lqJDBSPCy1/F5uiRCPrF3ObOHiQ/eah1tvwCTG5gTv3AdFA3sDWFUYwcnCFuV4na9d2jK+hX1x54k5I6zquo3qoZZw8UtLWKSo2nJorQ9Dh/0Ku3jMCL573bF2vrFwpN8DCvK6ntnaiQ35rT/rywjq4HAJTzo6wRGWQBpPcWlYXrOcJ946FnoBPzcs89JrFpSV3veSzRfoO/w==","token_session":"bptiaAh3VsP0GJuCeu08Ohkrk3JKn/nGaCQe/Yxx4DbPkxqA/MiyjbOOYE+43j8TGFToqa9fbxdnMSGAjW4uif6/GMmGFx3U0cxwSvWY+5UyRrLM+HE3JM/yHlSlq/qK6PAuQY2l1yhW3bpTScw8lt/W9UeUNVmH2Be3oU0y/EYhRLqmWL/7CLFehluIugUzR+XG7eYROCDBpJfkgBURO0ngfAVHs8T5EYIhYPwHO/ro9G+SlT9V63zB36CnIBjDfwonEeRugJ0hR3XceArTn+A81UbTtXe0ZdRTjMCwxudZErfpXhgN5X1BAtCtlSDPRcsnntKOd7GYv/OVjJd54Q=="}}
API END token renew /
[0mPOST /api/token/renew [32m200 [0m28.300 ms - 736[0m
API Cluster worker id: 2
REQUESTING PATH /token/update;POST;1477290618147
CHECKING API TOKEN qbUP2ztGvS/3PQCTezuSmj1nbbL+u1WFNqccgdXWEpk+0N5FuFvF4Rz0n+2IILUiViGZjc47H6qSOiq2f91KY1KpWJTeHuJsH1TsYoHtSy4kNzZ7zjxODrdPa+OLwefdjhW7AAZQ4lqJDBSPCy1/F5uiRCPrF3ObOHiQ/eah1tvwCTG5gTv3AdFA3sDWFUYwcnCFuV4na9d2jK+hX1x54k5I6zquo3qoZZw8UtLWKSo2nJorQ9Dh/0Ku3jMCL573bF2vrFwpN8DCvK6ntnaiQ35rT/rywjq4HAJTzo6wRGWQBpPcWlYXrOcJ946FnoBPzcs89JrFpSV3veSzRfoO/w==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290648000,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290648000,"lang":1}; TAG START 1477290618147
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_fcm
CHECKING imsi
CHECKING longitude
CHECKING latitude
IS_ERR false
DB:OK;SELECT device.id_location,usr.id_device FROM table_user usr LEFT JOIN table_device device ON device.id=usr.id_device WHERE usr.id=${id_user};{"token_fcm":"-","imsi":"-","longitude":"106.82387575507164","latitude":"-6.223724034042202","id_user":54}
DB:OK;SELECT id_location,(random()/10)-(random()/10)+${longitude} AS random_longitude,(random()/10)-(random()/10)+${latitude} AS random_latitude FROM table_store;{"token_fcm":"-","imsi":"-","longitude":"106.82387575507164","latitude":"-6.223724034042202","id_user":54,"id_location":"159","id_device":"24"}
RESULT 200: {"data":[{"id_location":"10","random_longitude":106.818744234368,"random_latitude":-6.26668543246119},{"id_location":"20","random_longitude":106.869925502641,"random_latitude":-6.21364432432234},{"id_location":"30","random_longitude":106.83896856159,"random_latitude":-6.2423755584146},{"id_location":"40","random_longitude":106.775047315191,"random_latitude":-6.25864613483205},{"id_location":"50","random_longitude":106.749476134451,"random_latitude":-6.24842688919521},{"id_location":"60","random_longitude":106.78792871614,"random_latitude":-6.21160411730885},{"id_location":"70","random_longitude":106.88523759488,"random_latitude":-6.201423229077},{"id_location":"80","random_longitude":106.75006629061,"random_latitude":-6.20760251435927},{"id_location":"90","random_longitude":106.839484220091,"random_latitude":-6.1747226100742},{"id_location":"100","random_longitude":106.893222365528,"random_latitude":-6.19211965057544}]}
[0mPOST /api/token/update [32m200 [0m25.928 ms - 933[0m
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.818744234368 -6.26668543246119)') WHERE id=${id_location};{"id_location":"10","random_longitude":106.818744234368,"random_latitude":-6.26668543246119}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.749476134451 -6.24842688919521)') WHERE id=${id_location};{"id_location":"50","random_longitude":106.749476134451,"random_latitude":-6.24842688919521}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.869925502641 -6.21364432432234)') WHERE id=${id_location};{"id_location":"20","random_longitude":106.869925502641,"random_latitude":-6.21364432432234}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.893222365528 -6.19211965057544)') WHERE id=${id_location};{"id_location":"100","random_longitude":106.893222365528,"random_latitude":-6.19211965057544}
DB:OK;UPDATE table_device SET token_fcm=${token_fcm}, imsi=${imsi} WHERE id=${id_device};{"token_fcm":"-","imsi":"-","longitude":"106.82387575507164","latitude":"-6.223724034042202","id_user":54,"id_location":"159","id_device":"24"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.82387575507164 -6.223724034042202)') WHERE id=${id_location};{"token_fcm":"-","imsi":"-","longitude":"106.82387575507164","latitude":"-6.223724034042202","id_user":54,"id_location":"159","id_device":"24"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.775047315191 -6.25864613483205)') WHERE id=${id_location};{"id_location":"40","random_longitude":106.775047315191,"random_latitude":-6.25864613483205}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.83896856159 -6.2423755584146)') WHERE id=${id_location};{"id_location":"30","random_longitude":106.83896856159,"random_latitude":-6.2423755584146}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.78792871614 -6.21160411730885)') WHERE id=${id_location};{"id_location":"60","random_longitude":106.78792871614,"random_latitude":-6.21160411730885}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.88523759488 -6.201423229077)') WHERE id=${id_location};{"id_location":"70","random_longitude":106.88523759488,"random_latitude":-6.201423229077}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.75006629061 -6.20760251435927)') WHERE id=${id_location};{"id_location":"80","random_longitude":106.75006629061,"random_latitude":-6.20760251435927}
API Cluster worker id: 2
REQUESTING PATH /store/nearby;GET;1477290618238
CHECKING API TOKEN qbUP2ztGvS/3PQCTezuSmj1nbbL+u1WFNqccgdXWEpk+0N5FuFvF4Rz0n+2IILUiViGZjc47H6qSOiq2f91KY1KpWJTeHuJsH1TsYoHtSy4kNzZ7zjxODrdPa+OLwefdjhW7AAZQ4lqJDBSPCy1/F5uiRCPrF3ObOHiQ/eah1tvwCTG5gTv3AdFA3sDWFUYwcnCFuV4na9d2jK+hX1x54k5I6zquo3qoZZw8UtLWKSo2nJorQ9Dh/0Ku3jMCL573bF2vrFwpN8DCvK6ntnaiQ35rT/rywjq4HAJTzo6wRGWQBpPcWlYXrOcJ946FnoBPzcs89JrFpSV3veSzRfoO/w==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290648000,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290648000,"lang":1}; TAG START 1477290618238
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.839484220091 -6.1747226100742)') WHERE id=${id_location};{"id_location":"90","random_longitude":106.839484220091,"random_latitude":-6.1747226100742}
Cluster worker id ROUTER: 2
CHECKING longitude
CHECKING latitude
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT store.*,rating.counted AS rating,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude,ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.82387575507164 -6.223724034042202)')) AS distance_db,${distance} AS distance_max_meter 
		FROM table_store grouping
		LEFT JOIN table_store store ON store.id=grouping.id
		LEFT JOIN table_location_gps location ON location.id=store.id_location
		LEFT JOIN (SELECT AVG(rating) AS counted, id_store FROM table_store_rating GROUP BY id_store) rating ON rating.id_store=store.id
		WHERE ST_DWithin(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.82387575507164 -6.223724034042202)'), ${distance})
		ORDER BY ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.82387575507164 -6.223724034042202)')) ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		;{"longitude":"106.82387575507164","latitude":"-6.223724034042202","distance":"3000","page_go":0,"page_max":null,"id_user":54}
PAGINATION DATA: [{"no":"1","total":"1","id":"3","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 3","address":"Store Address 3","phone":"Store Phone 3","is_delete":false,"id_location":"30","id_schedule":"3","rating":null,"location_longitude":106.83896856159,"location_latitude":-6.2423755584146,"distance_db":2654.086126112,"distance_max_meter":"3000","maxno":"1"}]
HALO {"store_nearby":[{"id":"3","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 3","address":"Store Address 3","phone":"Store Phone 3","is_delete":false,"id_location":"30","id_schedule":"3","rating":null,"location_longitude":106.83896856159,"location_latitude":-6.2423755584146,"distance_db":2654.086126112,"distance_max_meter":"3000"}],"pagination":{"page_go":"#"}}
ERR:null
DONE:{"status":200,"headers":{"content-type":"application/json; charset=UTF-8","date":"Mon, 24 Oct 2016 06:30:18 GMT","expires":"Tue, 25 Oct 2016 06:30:18 GMT","cache-control":"public, max-age=86400","server":"mafe","x-xss-protection":"1; mode=block","x-frame-options":"SAMEORIGIN","alt-svc":"quic=\":443\"; ma=2592000; v=\"36,35,34\"","accept-ranges":"none","vary":"Accept-Encoding","connection":"close"},"json":{"destination_addresses":["Jl. Prof. DR. Satrio No.3, Karet Kuningan, Kecamatan Setiabudi, Kota Jakarta Selatan, Daerah Khusus Ibukota Jakarta 12940, Indonesia"],"origin_addresses":["Jl. Jend. Gatot Subroto No.72, Pancoran, Kota Jakarta Selatan, Daerah Khusus Ibukota Jakarta 12780, Indonesia"],"rows":[{"elements":[{"distance":{"text":"8.2 km","value":8217},"duration":{"text":"18 mins","value":1076},"status":"OK"}]}],"status":"OK"}}
ELEMENTS:[{"distance":{"text":"8.2 km","value":8217},"duration":{"text":"18 mins","value":1076},"status":"OK"}]
RESULT 200: {"store_nearby":[{"id":"3","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 3","address":"Store Address 3","phone":"Store Phone 3","is_delete":false,"id_location":"30","id_schedule":"3","rating":null,"location_longitude":106.83896856159,"location_latitude":-6.2423755584146,"distance_db":2654.086126112,"distance_max_meter":"3000","distance_google":8217}],"pagination":{"page_go":"#"}}
[0mGET /api/store/nearby?longitude=106.82387575507164&latitude=-6.223724034042202 [32m200 [0m84.430 ms - 396[0m
API Cluster worker id: 2
REQUESTING PATH /token/update;POST;1477290620251
CHECKING API TOKEN qbUP2ztGvS/3PQCTezuSmj1nbbL+u1WFNqccgdXWEpk+0N5FuFvF4Rz0n+2IILUiViGZjc47H6qSOiq2f91KY1KpWJTeHuJsH1TsYoHtSy4kNzZ7zjxODrdPa+OLwefdjhW7AAZQ4lqJDBSPCy1/F5uiRCPrF3ObOHiQ/eah1tvwCTG5gTv3AdFA3sDWFUYwcnCFuV4na9d2jK+hX1x54k5I6zquo3qoZZw8UtLWKSo2nJorQ9Dh/0Ku3jMCL573bF2vrFwpN8DCvK6ntnaiQ35rT/rywjq4HAJTzo6wRGWQBpPcWlYXrOcJ946FnoBPzcs89JrFpSV3veSzRfoO/w==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290648000,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290648000,"lang":1}; TAG START 1477290620251
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_fcm
CHECKING imsi
CHECKING longitude
CHECKING latitude
IS_ERR false
DB:OK;SELECT device.id_location,usr.id_device FROM table_user usr LEFT JOIN table_device device ON device.id=usr.id_device WHERE usr.id=${id_user};{"token_fcm":"-","imsi":"-","longitude":"106.82387575507164","latitude":"-6.223724034042202","id_user":54}
DB:OK;SELECT id_location,(random()/10)-(random()/10)+${longitude} AS random_longitude,(random()/10)-(random()/10)+${latitude} AS random_latitude FROM table_store;{"token_fcm":"-","imsi":"-","longitude":"106.82387575507164","latitude":"-6.223724034042202","id_user":54,"id_location":"159","id_device":"24"}
RESULT 200: {"data":[{"id_location":"10","random_longitude":106.83141097459,"random_latitude":-6.24667425498842},{"id_location":"20","random_longitude":106.803682148643,"random_latitude":-6.2205930901087},{"id_location":"30","random_longitude":106.81329763378,"random_latitude":-6.14258868632383},{"id_location":"40","random_longitude":106.780539186345,"random_latitude":-6.27590696535549},{"id_location":"50","random_longitude":106.894140186487,"random_latitude":-6.29969868523545},{"id_location":"60","random_longitude":106.810695865657,"random_latitude":-6.23487272615089},{"id_location":"70","random_longitude":106.814154283935,"random_latitude":-6.24277406943507},{"id_location":"80","random_longitude":106.750497341575,"random_latitude":-6.15610824463434},{"id_location":"90","random_longitude":106.802994508855,"random_latitude":-6.26794357340328},{"id_location":"100","random_longitude":106.847823143797,"random_latitude":-6.17052178488589}]}
[0mPOST /api/token/update [32m200 [0m11.910 ms - 938[0m
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.803682148643 -6.2205930901087)') WHERE id=${id_location};{"id_location":"20","random_longitude":106.803682148643,"random_latitude":-6.2205930901087}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.83141097459 -6.24667425498842)') WHERE id=${id_location};{"id_location":"10","random_longitude":106.83141097459,"random_latitude":-6.24667425498842}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.81329763378 -6.14258868632383)') WHERE id=${id_location};{"id_location":"30","random_longitude":106.81329763378,"random_latitude":-6.14258868632383}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.780539186345 -6.27590696535549)') WHERE id=${id_location};{"id_location":"40","random_longitude":106.780539186345,"random_latitude":-6.27590696535549}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.810695865657 -6.23487272615089)') WHERE id=${id_location};{"id_location":"60","random_longitude":106.810695865657,"random_latitude":-6.23487272615089}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.894140186487 -6.29969868523545)') WHERE id=${id_location};{"id_location":"50","random_longitude":106.894140186487,"random_latitude":-6.29969868523545}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.814154283935 -6.24277406943507)') WHERE id=${id_location};{"id_location":"70","random_longitude":106.814154283935,"random_latitude":-6.24277406943507}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.750497341575 -6.15610824463434)') WHERE id=${id_location};{"id_location":"80","random_longitude":106.750497341575,"random_latitude":-6.15610824463434}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.802994508855 -6.26794357340328)') WHERE id=${id_location};{"id_location":"90","random_longitude":106.802994508855,"random_latitude":-6.26794357340328}
DB:OK;UPDATE table_device SET token_fcm=${token_fcm}, imsi=${imsi} WHERE id=${id_device};{"token_fcm":"-","imsi":"-","longitude":"106.82387575507164","latitude":"-6.223724034042202","id_user":54,"id_location":"159","id_device":"24"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.82387575507164 -6.223724034042202)') WHERE id=${id_location};{"token_fcm":"-","imsi":"-","longitude":"106.82387575507164","latitude":"-6.223724034042202","id_user":54,"id_location":"159","id_device":"24"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.847823143797 -6.17052178488589)') WHERE id=${id_location};{"id_location":"100","random_longitude":106.847823143797,"random_latitude":-6.17052178488589}
API Cluster worker id: 2
REQUESTING PATH /store/nearby;GET;1477290620300
CHECKING API TOKEN qbUP2ztGvS/3PQCTezuSmj1nbbL+u1WFNqccgdXWEpk+0N5FuFvF4Rz0n+2IILUiViGZjc47H6qSOiq2f91KY1KpWJTeHuJsH1TsYoHtSy4kNzZ7zjxODrdPa+OLwefdjhW7AAZQ4lqJDBSPCy1/F5uiRCPrF3ObOHiQ/eah1tvwCTG5gTv3AdFA3sDWFUYwcnCFuV4na9d2jK+hX1x54k5I6zquo3qoZZw8UtLWKSo2nJorQ9Dh/0Ku3jMCL573bF2vrFwpN8DCvK6ntnaiQ35rT/rywjq4HAJTzo6wRGWQBpPcWlYXrOcJ946FnoBPzcs89JrFpSV3veSzRfoO/w==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290648000,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290648000,"lang":1}; TAG START 1477290620300
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING longitude
CHECKING latitude
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT store.*,rating.counted AS rating,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude,ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.82387575507164 -6.223724034042202)')) AS distance_db,${distance} AS distance_max_meter 
		FROM table_store grouping
		LEFT JOIN table_store store ON store.id=grouping.id
		LEFT JOIN table_location_gps location ON location.id=store.id_location
		LEFT JOIN (SELECT AVG(rating) AS counted, id_store FROM table_store_rating GROUP BY id_store) rating ON rating.id_store=store.id
		WHERE ST_DWithin(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.82387575507164 -6.223724034042202)'), ${distance})
		ORDER BY ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.82387575507164 -6.223724034042202)')) ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		;{"longitude":"106.82387575507164","latitude":"-6.223724034042202","distance":"3000","page_go":0,"page_max":null,"id_user":54}
PAGINATION DATA: [{"no":"1","total":"4","id":"6","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 6","address":"Store Address 6","phone":"Store Phone 6","is_delete":false,"id_location":"60","id_schedule":"6","rating":null,"location_longitude":106.810695865657,"location_latitude":-6.23487272615089,"distance_db":1909.840049969,"distance_max_meter":"3000","maxno":"4"},{"no":"2","total":"4","id":"2","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 2","address":"Store Address 2","phone":"Store Phone 2","is_delete":false,"id_location":"20","id_schedule":"2","rating":null,"location_longitude":106.803682148643,"location_latitude":-6.2205930901087,"distance_db":2261.450684657,"distance_max_meter":"3000","maxno":"4"},{"no":"3","total":"4","id":"7","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 7","address":"Store Address 7","phone":"Store Phone 7","is_delete":false,"id_location":"70","id_schedule":"7","rating":null,"location_longitude":106.814154283935,"location_latitude":-6.24277406943507,"distance_db":2365.496780439,"distance_max_meter":"3000","maxno":"4"},{"no":"4","total":"4","id":"1","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 1","address":"Store Address 1","phone":"Store Phone 1","is_delete":false,"id_location":"10","id_schedule":"1","rating":null,"location_longitude":106.83141097459,"location_latitude":-6.24667425498842,"distance_db":2671.485800881,"distance_max_meter":"3000","maxno":"4"}]
HALO {"store_nearby":[{"id":"6","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 6","address":"Store Address 6","phone":"Store Phone 6","is_delete":false,"id_location":"60","id_schedule":"6","rating":null,"location_longitude":106.810695865657,"location_latitude":-6.23487272615089,"distance_db":1909.840049969,"distance_max_meter":"3000"},{"id":"2","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 2","address":"Store Address 2","phone":"Store Phone 2","is_delete":false,"id_location":"20","id_schedule":"2","rating":null,"location_longitude":106.803682148643,"location_latitude":-6.2205930901087,"distance_db":2261.450684657,"distance_max_meter":"3000"},{"id":"7","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 7","address":"Store Address 7","phone":"Store Phone 7","is_delete":false,"id_location":"70","id_schedule":"7","rating":null,"location_longitude":106.814154283935,"location_latitude":-6.24277406943507,"distance_db":2365.496780439,"distance_max_meter":"3000"},{"id":"1","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 1","address":"Store Address 1","phone":"Store Phone 1","is_delete":false,"id_location":"10","id_schedule":"1","rating":null,"location_longitude":106.83141097459,"location_latitude":-6.24667425498842,"distance_db":2671.485800881,"distance_max_meter":"3000"}],"pagination":{"page_go":"#"}}
ERR:null
DONE:{"status":200,"headers":{"content-type":"application/json; charset=UTF-8","date":"Mon, 24 Oct 2016 06:30:20 GMT","expires":"Tue, 25 Oct 2016 06:30:20 GMT","cache-control":"public, max-age=86400","server":"mafe","x-xss-protection":"1; mode=block","x-frame-options":"SAMEORIGIN","alt-svc":"quic=\":443\"; ma=2592000; v=\"36,35,34\"","accept-ranges":"none","vary":"Accept-Encoding","connection":"close"},"json":{"destination_addresses":["Jl. Prof. DR. Satrio No.3, Karet Kuningan, Kecamatan Setiabudi, Kota Jakarta Selatan, Daerah Khusus Ibukota Jakarta 12940, Indonesia"],"origin_addresses":["Jl. Cibeber I No.1, Rw. Bar., Kby. Baru, Kota Jakarta Selatan, Daerah Khusus Ibukota Jakarta 12180, Indonesia","Central Jakarta, Central Jakarta City, Special Capital Region of Jakarta, Indonesia","Jl. Wijaya Timur Raya No.19, Petogogan, Kby. Baru, Kota Jakarta Selatan, Daerah Khusus Ibukota Jakarta 12170, Indonesia","Jl. Mampang Prapatan VI No.75-77, Tegal Parang, Mampang Prpt., Kota Jakarta Selatan, Daerah Khusus Ibukota Jakarta 12790, Indonesia"],"rows":[{"elements":[{"distance":{"text":"7.6 km","value":7618},"duration":{"text":"19 mins","value":1128},"status":"OK"}]},{"elements":[{"distance":{"text":"5.7 km","value":5676},"duration":{"text":"14 mins","value":825},"status":"OK"}]},{"elements":[{"distance":{"text":"8.9 km","value":8922},"duration":{"text":"21 mins","value":1282},"status":"OK"}]},{"elements":[{"distance":{"text":"8.2 km","value":8217},"duration":{"text":"19 mins","value":1158},"status":"OK"}]}],"status":"OK"}}
ELEMENTS:[{"distance":{"text":"7.6 km","value":7618},"duration":{"text":"19 mins","value":1128},"status":"OK"}]
RESULT 200: {"store_nearby":[{"id":"2","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 2","address":"Store Address 2","phone":"Store Phone 2","is_delete":false,"id_location":"20","id_schedule":"2","rating":null,"location_longitude":106.803682148643,"location_latitude":-6.2205930901087,"distance_db":2261.450684657,"distance_max_meter":"3000","distance_google":5676},{"id":"6","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 6","address":"Store Address 6","phone":"Store Phone 6","is_delete":false,"id_location":"60","id_schedule":"6","rating":null,"location_longitude":106.810695865657,"location_latitude":-6.23487272615089,"distance_db":1909.840049969,"distance_max_meter":"3000","distance_google":7618},{"id":"1","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 1","address":"Store Address 1","phone":"Store Phone 1","is_delete":false,"id_location":"10","id_schedule":"1","rating":null,"location_longitude":106.83141097459,"location_latitude":-6.24667425498842,"distance_db":2671.485800881,"distance_max_meter":"3000","distance_google":8217},{"id":"7","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 7","address":"Store Address 7","phone":"Store Phone 7","is_delete":false,"id_location":"70","id_schedule":"7","rating":null,"location_longitude":106.814154283935,"location_latitude":-6.24277406943507,"distance_db":2365.496780439,"distance_max_meter":"3000","distance_google":8922}],"pagination":{"page_go":"#"}}
[0mGET /api/store/nearby?longitude=106.82387575507164&latitude=-6.223724034042202 [32m200 [0m129.964 ms - 1449[0m
API Cluster worker id: 2
REQUESTING PATH /location;PUT;1477290622500
CHECKING API TOKEN qbUP2ztGvS/3PQCTezuSmj1nbbL+u1WFNqccgdXWEpk+0N5FuFvF4Rz0n+2IILUiViGZjc47H6qSOiq2f91KY1KpWJTeHuJsH1TsYoHtSy4kNzZ7zjxODrdPa+OLwefdjhW7AAZQ4lqJDBSPCy1/F5uiRCPrF3ObOHiQ/eah1tvwCTG5gTv3AdFA3sDWFUYwcnCFuV4na9d2jK+hX1x54k5I6zquo3qoZZw8UtLWKSo2nJorQ9Dh/0Ku3jMCL573bF2vrFwpN8DCvK6ntnaiQ35rT/rywjq4HAJTzo6wRGWQBpPcWlYXrOcJ946FnoBPzcs89JrFpSV3veSzRfoO/w==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290648000,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290648000,"lang":1}; TAG START 1477290622500
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;PUT
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING address
CHECKING longitude
CHECKING latitude
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;INSERT INTO table_location_gps (name,id_user,geom_location) VALUES (${address},${id_user},ST_GeographyFromText('SRID=4326;POINT(106.82387575507164 -6.223724034042202)')) RETURNING id;{"address":"Jalan Professor Doktor Satrio No.3, Kecamatan Setiabudi, Daerah Khusus Ibukota Jakarta, Indonesia, 12940","latitude":"-6.223724034042202","longitude":"106.82387575507164","id_user":54}
RESULT 200: {"location":{"id":"168"}}
[0mPUT /api/location?address=Jalan%20Professor%20Doktor%20Satrio%20No.3,%20Kecamatan%20Setiabudi,%20Daerah%20Khusus%20Ibukota%20Jakarta,%20Indonesia,%2012940&latitude=-6.223724034042202&longitude=106.82387575507164 [32m200 [0m9.052 ms - 25[0m
API Cluster worker id: 2
REQUESTING PATH /store/7/product;GET;1477290629668
CHECKING API TOKEN qbUP2ztGvS/3PQCTezuSmj1nbbL+u1WFNqccgdXWEpk+0N5FuFvF4Rz0n+2IILUiViGZjc47H6qSOiq2f91KY1KpWJTeHuJsH1TsYoHtSy4kNzZ7zjxODrdPa+OLwefdjhW7AAZQ4lqJDBSPCy1/F5uiRCPrF3ObOHiQ/eah1tvwCTG5gTv3AdFA3sDWFUYwcnCFuV4na9d2jK+hX1x54k5I6zquo3qoZZw8UtLWKSo2nJorQ9Dh/0Ku3jMCL573bF2vrFwpN8DCvK6ntnaiQ35rT/rywjq4HAJTzo6wRGWQBpPcWlYXrOcJ946FnoBPzcs89JrFpSV3veSzRfoO/w==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290648000,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290648000,"lang":1}; TAG START 1477290629668
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
product query 
Full text search 
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT product.*,trolley.qty AS trolley_qty 
		FROM table_product_category category
		LEFT JOIN table_product product ON product.id_category=category.id
		LEFT JOIN (SELECT * FROM table_trolley WHERE id_user=54) trolley ON trolley.id_product=product.id
		WHERE category.id_store=7  
		ORDER BY product.id ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		LIMIT ${page_max} OFFSET 0;{"search":"","page_go":0,"page_max":25,"id_user":54}
PAGINATION DATA: [{"no":"1","total":"10","id":"5","id_category":"70","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"70","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null,"maxno":"10"},{"no":"2","total":"10","id":"17","id_category":"61","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"61","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null,"maxno":"10"},{"no":"3","total":"10","id":"28","id_category":"62","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"62","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null,"maxno":"10"},{"no":"4","total":"10","id":"37","id_category":"63","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"63","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null,"maxno":"10"},{"no":"5","total":"10","id":"42","id_category":"64","name":"Cat Nippon Paint","description":"Cat Nippon Paint","time_create":"2016-10-23T08:04:04.112Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat1.png","price":"64","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null,"maxno":"10"},{"no":"6","total":"10","id":"53","id_category":"65","name":"Cat Catylac","description":"Cat Catylac","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat2.png","price":"65","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null,"maxno":"10"},{"no":"7","total":"10","id":"66","id_category":"66","name":"Sink Elite","description":"Sink Elite","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink1.jpg","price":"66","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null,"maxno":"10"},{"no":"8","total":"10","id":"79","id_category":"67","name":"Sink American Standard","description":"Sink American Standard","time_create":"2016-10-23T08:04:04.114Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink2.jpg","price":"67","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null,"maxno":"10"},{"no":"9","total":"10","id":"90","id_category":"68","name":"Bata Merah","description":"Bata Merah","time_create":"2016-10-23T08:04:04.115Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata1.jpg","price":"68","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null,"maxno":"10"},{"no":"10","total":"10","id":"96","id_category":"69","name":"Bata Ringan","description":"Bata Ringan","time_create":"2016-10-23T08:04:04.116Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata2.jpg","price":"69","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null,"maxno":"10"}]
TERIMA DATA {"products":[{"id":"5","id_category":"70","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"70","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null},{"id":"17","id_category":"61","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"61","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null},{"id":"28","id_category":"62","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"62","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"37","id_category":"63","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"63","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"42","id_category":"64","name":"Cat Nippon Paint","description":"Cat Nippon Paint","time_create":"2016-10-23T08:04:04.112Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat1.png","price":"64","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"53","id_category":"65","name":"Cat Catylac","description":"Cat Catylac","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat2.png","price":"65","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"66","id_category":"66","name":"Sink Elite","description":"Sink Elite","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink1.jpg","price":"66","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"79","id_category":"67","name":"Sink American Standard","description":"Sink American Standard","time_create":"2016-10-23T08:04:04.114Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink2.jpg","price":"67","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"90","id_category":"68","name":"Bata Merah","description":"Bata Merah","time_create":"2016-10-23T08:04:04.115Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata1.jpg","price":"68","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null},{"id":"96","id_category":"69","name":"Bata Ringan","description":"Bata Ringan","time_create":"2016-10-23T08:04:04.116Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata2.jpg","price":"69","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null}],"pagination":{"page_go":"#"}}
RESULT 200: {"products":[{"id":"5","id_category":"70","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"70","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null},{"id":"17","id_category":"61","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"61","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null},{"id":"28","id_category":"62","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"62","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"37","id_category":"63","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"63","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"42","id_category":"64","name":"Cat Nippon Paint","description":"Cat Nippon Paint","time_create":"2016-10-23T08:04:04.112Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat1.png","price":"64","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"53","id_category":"65","name":"Cat Catylac","description":"Cat Catylac","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat2.png","price":"65","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"66","id_category":"66","name":"Sink Elite","description":"Sink Elite","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink1.jpg","price":"66","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"79","id_category":"67","name":"Sink American Standard","description":"Sink American Standard","time_create":"2016-10-23T08:04:04.114Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink2.jpg","price":"67","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"90","id_category":"68","name":"Bata Merah","description":"Bata Merah","time_create":"2016-10-23T08:04:04.115Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata1.jpg","price":"68","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null},{"id":"96","id_category":"69","name":"Bata Ringan","description":"Bata Ringan","time_create":"2016-10-23T08:04:04.116Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata2.jpg","price":"69","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null}],"pagination":{"page_go":"#"}}
[0mGET /api/store/7/product?search= [32m200 [0m11.200 ms - 2945[0m
API Cluster worker id: 2
REQUESTING PATH /store/7/product;GET;1477290633419
CHECKING API TOKEN qbUP2ztGvS/3PQCTezuSmj1nbbL+u1WFNqccgdXWEpk+0N5FuFvF4Rz0n+2IILUiViGZjc47H6qSOiq2f91KY1KpWJTeHuJsH1TsYoHtSy4kNzZ7zjxODrdPa+OLwefdjhW7AAZQ4lqJDBSPCy1/F5uiRCPrF3ObOHiQ/eah1tvwCTG5gTv3AdFA3sDWFUYwcnCFuV4na9d2jK+hX1x54k5I6zquo3qoZZw8UtLWKSo2nJorQ9Dh/0Ku3jMCL573bF2vrFwpN8DCvK6ntnaiQ35rT/rywjq4HAJTzo6wRGWQBpPcWlYXrOcJ946FnoBPzcs89JrFpSV3veSzRfoO/w==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290648000,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290648000,"lang":1}; TAG START 1477290633419
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
product query 
Full text search 
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT product.*,trolley.qty AS trolley_qty 
		FROM table_product_category category
		LEFT JOIN table_product product ON product.id_category=category.id
		LEFT JOIN (SELECT * FROM table_trolley WHERE id_user=54) trolley ON trolley.id_product=product.id
		WHERE category.id_store=7  
		ORDER BY product.id ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		LIMIT ${page_max} OFFSET 0;{"search":"","page_go":0,"page_max":25,"id_user":54}
PAGINATION DATA: [{"no":"1","total":"10","id":"5","id_category":"70","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"70","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null,"maxno":"10"},{"no":"2","total":"10","id":"17","id_category":"61","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"61","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null,"maxno":"10"},{"no":"3","total":"10","id":"28","id_category":"62","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"62","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null,"maxno":"10"},{"no":"4","total":"10","id":"37","id_category":"63","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"63","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null,"maxno":"10"},{"no":"5","total":"10","id":"42","id_category":"64","name":"Cat Nippon Paint","description":"Cat Nippon Paint","time_create":"2016-10-23T08:04:04.112Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat1.png","price":"64","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null,"maxno":"10"},{"no":"6","total":"10","id":"53","id_category":"65","name":"Cat Catylac","description":"Cat Catylac","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat2.png","price":"65","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null,"maxno":"10"},{"no":"7","total":"10","id":"66","id_category":"66","name":"Sink Elite","description":"Sink Elite","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink1.jpg","price":"66","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null,"maxno":"10"},{"no":"8","total":"10","id":"79","id_category":"67","name":"Sink American Standard","description":"Sink American Standard","time_create":"2016-10-23T08:04:04.114Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink2.jpg","price":"67","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null,"maxno":"10"},{"no":"9","total":"10","id":"90","id_category":"68","name":"Bata Merah","description":"Bata Merah","time_create":"2016-10-23T08:04:04.115Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata1.jpg","price":"68","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null,"maxno":"10"},{"no":"10","total":"10","id":"96","id_category":"69","name":"Bata Ringan","description":"Bata Ringan","time_create":"2016-10-23T08:04:04.116Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata2.jpg","price":"69","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null,"maxno":"10"}]
TERIMA DATA {"products":[{"id":"5","id_category":"70","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"70","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null},{"id":"17","id_category":"61","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"61","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null},{"id":"28","id_category":"62","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"62","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"37","id_category":"63","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"63","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"42","id_category":"64","name":"Cat Nippon Paint","description":"Cat Nippon Paint","time_create":"2016-10-23T08:04:04.112Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat1.png","price":"64","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"53","id_category":"65","name":"Cat Catylac","description":"Cat Catylac","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat2.png","price":"65","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"66","id_category":"66","name":"Sink Elite","description":"Sink Elite","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink1.jpg","price":"66","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"79","id_category":"67","name":"Sink American Standard","description":"Sink American Standard","time_create":"2016-10-23T08:04:04.114Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink2.jpg","price":"67","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"90","id_category":"68","name":"Bata Merah","description":"Bata Merah","time_create":"2016-10-23T08:04:04.115Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata1.jpg","price":"68","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null},{"id":"96","id_category":"69","name":"Bata Ringan","description":"Bata Ringan","time_create":"2016-10-23T08:04:04.116Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata2.jpg","price":"69","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null}],"pagination":{"page_go":"#"}}
RESULT 200: {"products":[{"id":"5","id_category":"70","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"70","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null},{"id":"17","id_category":"61","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"61","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null},{"id":"28","id_category":"62","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"62","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"37","id_category":"63","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"63","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"42","id_category":"64","name":"Cat Nippon Paint","description":"Cat Nippon Paint","time_create":"2016-10-23T08:04:04.112Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat1.png","price":"64","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"53","id_category":"65","name":"Cat Catylac","description":"Cat Catylac","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat2.png","price":"65","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"66","id_category":"66","name":"Sink Elite","description":"Sink Elite","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink1.jpg","price":"66","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"79","id_category":"67","name":"Sink American Standard","description":"Sink American Standard","time_create":"2016-10-23T08:04:04.114Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink2.jpg","price":"67","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"90","id_category":"68","name":"Bata Merah","description":"Bata Merah","time_create":"2016-10-23T08:04:04.115Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata1.jpg","price":"68","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null},{"id":"96","id_category":"69","name":"Bata Ringan","description":"Bata Ringan","time_create":"2016-10-23T08:04:04.116Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata2.jpg","price":"69","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null}],"pagination":{"page_go":"#"}}
[0mGET /api/store/7/product?search= [32m200 [0m14.352 ms - 2945[0m
API Cluster worker id: 2
REQUESTING PATH /trolley/17;PUT;1477290634619
CHECKING API TOKEN qbUP2ztGvS/3PQCTezuSmj1nbbL+u1WFNqccgdXWEpk+0N5FuFvF4Rz0n+2IILUiViGZjc47H6qSOiq2f91KY1KpWJTeHuJsH1TsYoHtSy4kNzZ7zjxODrdPa+OLwefdjhW7AAZQ4lqJDBSPCy1/F5uiRCPrF3ObOHiQ/eah1tvwCTG5gTv3AdFA3sDWFUYwcnCFuV4na9d2jK+hX1x54k5I6zquo3qoZZw8UtLWKSo2nJorQ9Dh/0Ku3jMCL573bF2vrFwpN8DCvK6ntnaiQ35rT/rywjq4HAJTzo6wRGWQBpPcWlYXrOcJ946FnoBPzcs89JrFpSV3veSzRfoO/w==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290648000,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290648000,"lang":1}; TAG START 1477290634619
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;PUT
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:FAIL;
		SELECT 
		trolley.id 
		FROM table_trolley trolley
		LEFT JOIN table_product product ON product.id=trolley.id_product
		LEFT JOIN table_product_category category ON category.id=product.id_category
		LEFT JOIN (SELECT category.id_store FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category WHERE product.id=${id_product}) wtadd ON wtadd.id_store!=category.id_store
		WHERE trolley.id_user=${id_user} AND wtadd.id_store IS NOT NULL;{"id_product":"17","id_user":54};{"name":"QueryResultError","stack":"QueryResultError: 0\n    at QueryResultError.Error (native)\n    at new QueryResultError (/root/development/xapps/xapps/node_modules/pg-promise/lib/errors/queryResult.js:121:22)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/lib/query.js:176:41)\n    at Query.handleReadyForQuery (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/query.js:106:10)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/client.js:163:19)\n    at emitOne (events.js:95:20)\n    at emit (events.js:182:7)\n    at Socket.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/connection.js:109:12)\n    at emitOne (events.js:90:13)\n    at Socket.emit (events.js:182:7)","message":"No data returned from the query.","code":0,"result":{"command":"SELECT","rowCount":0,"oid":null,"rows":[],"fields":[{"name":"id","tableID":20828,"columnID":1,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"}],"_parsers":[null],"rowAsArray":false,"duration":3},"query":"\n\t\tSELECT \n\t\ttrolley.id \n\t\tFROM table_trolley trolley\n\t\tLEFT JOIN table_product product ON product.id=trolley.id_product\n\t\tLEFT JOIN table_product_category category ON category.id=product.id_category\n\t\tLEFT JOIN (SELECT category.id_store FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category WHERE product.id='17') wtadd ON wtadd.id_store!=category.id_store\n\t\tWHERE trolley.id_user=54 AND wtadd.id_store IS NOT NULL","received":0}
DB:FAIL;UPDATE table_trolley SET qty=qty+1 WHERE id_product=${id_product} AND id_user=${id_user} RETURNING *;{"id_product":"17","id_user":54};{"name":"QueryResultError","stack":"QueryResultError: 0\n    at QueryResultError.Error (native)\n    at new QueryResultError (/root/development/xapps/xapps/node_modules/pg-promise/lib/errors/queryResult.js:121:22)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/lib/query.js:176:41)\n    at Query.handleReadyForQuery (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/query.js:106:10)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/client.js:163:19)\n    at emitOne (events.js:95:20)\n    at emit (events.js:182:7)\n    at Socket.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/connection.js:109:12)\n    at emitOne (events.js:90:13)\n    at Socket.emit (events.js:182:7)","message":"No data returned from the query.","code":0,"result":{"command":"UPDATE","rowCount":0,"oid":null,"rows":[],"fields":[{"name":"id","tableID":20828,"columnID":1,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"},{"name":"id_user","tableID":20828,"columnID":2,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"},{"name":"id_product","tableID":20828,"columnID":3,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"},{"name":"qty","tableID":20828,"columnID":4,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"},{"name":"time_create","tableID":20828,"columnID":5,"dataTypeID":1114,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"}],"_parsers":[null,null,null,null,null],"rowAsArray":false,"duration":1},"query":"UPDATE table_trolley SET qty=qty+1 WHERE id_product='17' AND id_user=54 RETURNING *","received":0}
DB:OK;INSERT INTO table_trolley (id_product,id_user,qty) VALUES (${id_product},${id_user},1) RETURNING *;{"id_product":"17","id_user":54}
RESULT 200: {"trolley":{"id":"122","id_user":"54","id_product":"17","qty":"1","time_create":"2016-10-24T06:30:34.628Z"}}
[0mPUT /api/trolley/17 [32m200 [0m13.315 ms - 108[0m
API Cluster worker id: 2
REQUESTING PATH /store/7/product;GET;1477290639985
CHECKING API TOKEN qbUP2ztGvS/3PQCTezuSmj1nbbL+u1WFNqccgdXWEpk+0N5FuFvF4Rz0n+2IILUiViGZjc47H6qSOiq2f91KY1KpWJTeHuJsH1TsYoHtSy4kNzZ7zjxODrdPa+OLwefdjhW7AAZQ4lqJDBSPCy1/F5uiRCPrF3ObOHiQ/eah1tvwCTG5gTv3AdFA3sDWFUYwcnCFuV4na9d2jK+hX1x54k5I6zquo3qoZZw8UtLWKSo2nJorQ9Dh/0Ku3jMCL573bF2vrFwpN8DCvK6ntnaiQ35rT/rywjq4HAJTzo6wRGWQBpPcWlYXrOcJ946FnoBPzcs89JrFpSV3veSzRfoO/w==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290648000,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290648000,"lang":1}; TAG START 1477290639985
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
product query 
Full text search 
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT product.*,trolley.qty AS trolley_qty 
		FROM table_product_category category
		LEFT JOIN table_product product ON product.id_category=category.id
		LEFT JOIN (SELECT * FROM table_trolley WHERE id_user=54) trolley ON trolley.id_product=product.id
		WHERE category.id_store=7  
		ORDER BY product.id ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		LIMIT ${page_max} OFFSET 0;{"search":"","page_go":0,"page_max":25,"id_user":54}
PAGINATION DATA: [{"no":"1","total":"10","id":"5","id_category":"70","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"70","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null,"maxno":"10"},{"no":"2","total":"10","id":"17","id_category":"61","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"61","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"1","maxno":"10"},{"no":"3","total":"10","id":"28","id_category":"62","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"62","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null,"maxno":"10"},{"no":"4","total":"10","id":"37","id_category":"63","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"63","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null,"maxno":"10"},{"no":"5","total":"10","id":"42","id_category":"64","name":"Cat Nippon Paint","description":"Cat Nippon Paint","time_create":"2016-10-23T08:04:04.112Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat1.png","price":"64","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null,"maxno":"10"},{"no":"6","total":"10","id":"53","id_category":"65","name":"Cat Catylac","description":"Cat Catylac","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat2.png","price":"65","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null,"maxno":"10"},{"no":"7","total":"10","id":"66","id_category":"66","name":"Sink Elite","description":"Sink Elite","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink1.jpg","price":"66","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null,"maxno":"10"},{"no":"8","total":"10","id":"79","id_category":"67","name":"Sink American Standard","description":"Sink American Standard","time_create":"2016-10-23T08:04:04.114Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink2.jpg","price":"67","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null,"maxno":"10"},{"no":"9","total":"10","id":"90","id_category":"68","name":"Bata Merah","description":"Bata Merah","time_create":"2016-10-23T08:04:04.115Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata1.jpg","price":"68","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null,"maxno":"10"},{"no":"10","total":"10","id":"96","id_category":"69","name":"Bata Ringan","description":"Bata Ringan","time_create":"2016-10-23T08:04:04.116Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata2.jpg","price":"69","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null,"maxno":"10"}]
TERIMA DATA {"products":[{"id":"5","id_category":"70","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"70","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null},{"id":"17","id_category":"61","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"61","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"1"},{"id":"28","id_category":"62","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"62","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"37","id_category":"63","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"63","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"42","id_category":"64","name":"Cat Nippon Paint","description":"Cat Nippon Paint","time_create":"2016-10-23T08:04:04.112Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat1.png","price":"64","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"53","id_category":"65","name":"Cat Catylac","description":"Cat Catylac","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat2.png","price":"65","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"66","id_category":"66","name":"Sink Elite","description":"Sink Elite","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink1.jpg","price":"66","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"79","id_category":"67","name":"Sink American Standard","description":"Sink American Standard","time_create":"2016-10-23T08:04:04.114Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink2.jpg","price":"67","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"90","id_category":"68","name":"Bata Merah","description":"Bata Merah","time_create":"2016-10-23T08:04:04.115Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata1.jpg","price":"68","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null},{"id":"96","id_category":"69","name":"Bata Ringan","description":"Bata Ringan","time_create":"2016-10-23T08:04:04.116Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata2.jpg","price":"69","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null}],"pagination":{"page_go":"#"}}
RESULT 200: {"products":[{"id":"5","id_category":"70","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"70","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null},{"id":"17","id_category":"61","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"61","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"1"},{"id":"28","id_category":"62","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"62","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"37","id_category":"63","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"63","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"42","id_category":"64","name":"Cat Nippon Paint","description":"Cat Nippon Paint","time_create":"2016-10-23T08:04:04.112Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat1.png","price":"64","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"53","id_category":"65","name":"Cat Catylac","description":"Cat Catylac","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat2.png","price":"65","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"66","id_category":"66","name":"Sink Elite","description":"Sink Elite","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink1.jpg","price":"66","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"79","id_category":"67","name":"Sink American Standard","description":"Sink American Standard","time_create":"2016-10-23T08:04:04.114Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink2.jpg","price":"67","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"90","id_category":"68","name":"Bata Merah","description":"Bata Merah","time_create":"2016-10-23T08:04:04.115Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata1.jpg","price":"68","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null},{"id":"96","id_category":"69","name":"Bata Ringan","description":"Bata Ringan","time_create":"2016-10-23T08:04:04.116Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata2.jpg","price":"69","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null}],"pagination":{"page_go":"#"}}
[0mGET /api/store/7/product?search= [32m200 [0m14.993 ms - 2944[0m
API Cluster worker id: 2
REQUESTING PATH /trolley/17;PUT;1477290642399
CHECKING API TOKEN qbUP2ztGvS/3PQCTezuSmj1nbbL+u1WFNqccgdXWEpk+0N5FuFvF4Rz0n+2IILUiViGZjc47H6qSOiq2f91KY1KpWJTeHuJsH1TsYoHtSy4kNzZ7zjxODrdPa+OLwefdjhW7AAZQ4lqJDBSPCy1/F5uiRCPrF3ObOHiQ/eah1tvwCTG5gTv3AdFA3sDWFUYwcnCFuV4na9d2jK+hX1x54k5I6zquo3qoZZw8UtLWKSo2nJorQ9Dh/0Ku3jMCL573bF2vrFwpN8DCvK6ntnaiQ35rT/rywjq4HAJTzo6wRGWQBpPcWlYXrOcJ946FnoBPzcs89JrFpSV3veSzRfoO/w==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290648000,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290648000,"lang":1}; TAG START 1477290642399
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;PUT
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:FAIL;
		SELECT 
		trolley.id 
		FROM table_trolley trolley
		LEFT JOIN table_product product ON product.id=trolley.id_product
		LEFT JOIN table_product_category category ON category.id=product.id_category
		LEFT JOIN (SELECT category.id_store FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category WHERE product.id=${id_product}) wtadd ON wtadd.id_store!=category.id_store
		WHERE trolley.id_user=${id_user} AND wtadd.id_store IS NOT NULL;{"id_product":"17","id_user":54};{"name":"QueryResultError","stack":"QueryResultError: 0\n    at QueryResultError.Error (native)\n    at new QueryResultError (/root/development/xapps/xapps/node_modules/pg-promise/lib/errors/queryResult.js:121:22)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/lib/query.js:176:41)\n    at Query.handleReadyForQuery (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/query.js:106:10)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/client.js:163:19)\n    at emitOne (events.js:95:20)\n    at emit (events.js:182:7)\n    at Socket.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/connection.js:109:12)\n    at emitOne (events.js:90:13)\n    at Socket.emit (events.js:182:7)","message":"No data returned from the query.","code":0,"result":{"command":"SELECT","rowCount":0,"oid":null,"rows":[],"fields":[{"name":"id","tableID":20828,"columnID":1,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"}],"_parsers":[null],"rowAsArray":false,"duration":4},"query":"\n\t\tSELECT \n\t\ttrolley.id \n\t\tFROM table_trolley trolley\n\t\tLEFT JOIN table_product product ON product.id=trolley.id_product\n\t\tLEFT JOIN table_product_category category ON category.id=product.id_category\n\t\tLEFT JOIN (SELECT category.id_store FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category WHERE product.id='17') wtadd ON wtadd.id_store!=category.id_store\n\t\tWHERE trolley.id_user=54 AND wtadd.id_store IS NOT NULL","received":0}
DB:OK;UPDATE table_trolley SET qty=qty+1 WHERE id_product=${id_product} AND id_user=${id_user} RETURNING *;{"id_product":"17","id_user":54}
RESULT 200: {"trolley":{"id":"122","id_user":"54","id_product":"17","qty":"2","time_create":"2016-10-24T06:30:34.628Z"}}
[0mPUT /api/trolley/17 [32m200 [0m14.419 ms - 108[0m
API Cluster worker id: 2
REQUESTING PATH /trolley/17;PUT;1477290643198
CHECKING API TOKEN qbUP2ztGvS/3PQCTezuSmj1nbbL+u1WFNqccgdXWEpk+0N5FuFvF4Rz0n+2IILUiViGZjc47H6qSOiq2f91KY1KpWJTeHuJsH1TsYoHtSy4kNzZ7zjxODrdPa+OLwefdjhW7AAZQ4lqJDBSPCy1/F5uiRCPrF3ObOHiQ/eah1tvwCTG5gTv3AdFA3sDWFUYwcnCFuV4na9d2jK+hX1x54k5I6zquo3qoZZw8UtLWKSo2nJorQ9Dh/0Ku3jMCL573bF2vrFwpN8DCvK6ntnaiQ35rT/rywjq4HAJTzo6wRGWQBpPcWlYXrOcJ946FnoBPzcs89JrFpSV3veSzRfoO/w==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290648000,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290648000,"lang":1}; TAG START 1477290643198
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;PUT
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:FAIL;
		SELECT 
		trolley.id 
		FROM table_trolley trolley
		LEFT JOIN table_product product ON product.id=trolley.id_product
		LEFT JOIN table_product_category category ON category.id=product.id_category
		LEFT JOIN (SELECT category.id_store FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category WHERE product.id=${id_product}) wtadd ON wtadd.id_store!=category.id_store
		WHERE trolley.id_user=${id_user} AND wtadd.id_store IS NOT NULL;{"id_product":"17","id_user":54};{"name":"QueryResultError","stack":"QueryResultError: 0\n    at QueryResultError.Error (native)\n    at new QueryResultError (/root/development/xapps/xapps/node_modules/pg-promise/lib/errors/queryResult.js:121:22)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/lib/query.js:176:41)\n    at Query.handleReadyForQuery (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/query.js:106:10)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/client.js:163:19)\n    at emitOne (events.js:95:20)\n    at emit (events.js:182:7)\n    at Socket.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/connection.js:109:12)\n    at emitOne (events.js:90:13)\n    at Socket.emit (events.js:182:7)","message":"No data returned from the query.","code":0,"result":{"command":"SELECT","rowCount":0,"oid":null,"rows":[],"fields":[{"name":"id","tableID":20828,"columnID":1,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"}],"_parsers":[null],"rowAsArray":false,"duration":3},"query":"\n\t\tSELECT \n\t\ttrolley.id \n\t\tFROM table_trolley trolley\n\t\tLEFT JOIN table_product product ON product.id=trolley.id_product\n\t\tLEFT JOIN table_product_category category ON category.id=product.id_category\n\t\tLEFT JOIN (SELECT category.id_store FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category WHERE product.id='17') wtadd ON wtadd.id_store!=category.id_store\n\t\tWHERE trolley.id_user=54 AND wtadd.id_store IS NOT NULL","received":0}
DB:OK;UPDATE table_trolley SET qty=qty+1 WHERE id_product=${id_product} AND id_user=${id_user} RETURNING *;{"id_product":"17","id_user":54}
RESULT 200: {"trolley":{"id":"122","id_user":"54","id_product":"17","qty":"3","time_create":"2016-10-24T06:30:34.628Z"}}
[0mPUT /api/trolley/17 [32m200 [0m13.086 ms - 108[0m
API Cluster worker id: 2
REQUESTING PATH /trolley/17;PUT;1477290644398
CHECKING API TOKEN qbUP2ztGvS/3PQCTezuSmj1nbbL+u1WFNqccgdXWEpk+0N5FuFvF4Rz0n+2IILUiViGZjc47H6qSOiq2f91KY1KpWJTeHuJsH1TsYoHtSy4kNzZ7zjxODrdPa+OLwefdjhW7AAZQ4lqJDBSPCy1/F5uiRCPrF3ObOHiQ/eah1tvwCTG5gTv3AdFA3sDWFUYwcnCFuV4na9d2jK+hX1x54k5I6zquo3qoZZw8UtLWKSo2nJorQ9Dh/0Ku3jMCL573bF2vrFwpN8DCvK6ntnaiQ35rT/rywjq4HAJTzo6wRGWQBpPcWlYXrOcJ946FnoBPzcs89JrFpSV3veSzRfoO/w==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290648000,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290648000,"lang":1}; TAG START 1477290644398
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;PUT
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:FAIL;
		SELECT 
		trolley.id 
		FROM table_trolley trolley
		LEFT JOIN table_product product ON product.id=trolley.id_product
		LEFT JOIN table_product_category category ON category.id=product.id_category
		LEFT JOIN (SELECT category.id_store FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category WHERE product.id=${id_product}) wtadd ON wtadd.id_store!=category.id_store
		WHERE trolley.id_user=${id_user} AND wtadd.id_store IS NOT NULL;{"id_product":"17","id_user":54};{"name":"QueryResultError","stack":"QueryResultError: 0\n    at QueryResultError.Error (native)\n    at new QueryResultError (/root/development/xapps/xapps/node_modules/pg-promise/lib/errors/queryResult.js:121:22)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/lib/query.js:176:41)\n    at Query.handleReadyForQuery (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/query.js:106:10)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/client.js:163:19)\n    at emitOne (events.js:95:20)\n    at emit (events.js:182:7)\n    at Socket.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/connection.js:109:12)\n    at emitOne (events.js:90:13)\n    at Socket.emit (events.js:182:7)","message":"No data returned from the query.","code":0,"result":{"command":"SELECT","rowCount":0,"oid":null,"rows":[],"fields":[{"name":"id","tableID":20828,"columnID":1,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"}],"_parsers":[null],"rowAsArray":false,"duration":3},"query":"\n\t\tSELECT \n\t\ttrolley.id \n\t\tFROM table_trolley trolley\n\t\tLEFT JOIN table_product product ON product.id=trolley.id_product\n\t\tLEFT JOIN table_product_category category ON category.id=product.id_category\n\t\tLEFT JOIN (SELECT category.id_store FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category WHERE product.id='17') wtadd ON wtadd.id_store!=category.id_store\n\t\tWHERE trolley.id_user=54 AND wtadd.id_store IS NOT NULL","received":0}
DB:OK;UPDATE table_trolley SET qty=qty+1 WHERE id_product=${id_product} AND id_user=${id_user} RETURNING *;{"id_product":"17","id_user":54}
RESULT 200: {"trolley":{"id":"122","id_user":"54","id_product":"17","qty":"4","time_create":"2016-10-24T06:30:34.628Z"}}
[0mPUT /api/trolley/17 [32m200 [0m14.338 ms - 108[0m
API Cluster worker id: 2
REQUESTING PATH /trolley/28;PUT;1477290645371
CHECKING API TOKEN qbUP2ztGvS/3PQCTezuSmj1nbbL+u1WFNqccgdXWEpk+0N5FuFvF4Rz0n+2IILUiViGZjc47H6qSOiq2f91KY1KpWJTeHuJsH1TsYoHtSy4kNzZ7zjxODrdPa+OLwefdjhW7AAZQ4lqJDBSPCy1/F5uiRCPrF3ObOHiQ/eah1tvwCTG5gTv3AdFA3sDWFUYwcnCFuV4na9d2jK+hX1x54k5I6zquo3qoZZw8UtLWKSo2nJorQ9Dh/0Ku3jMCL573bF2vrFwpN8DCvK6ntnaiQ35rT/rywjq4HAJTzo6wRGWQBpPcWlYXrOcJ946FnoBPzcs89JrFpSV3veSzRfoO/w==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290648000,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290648000,"lang":1}; TAG START 1477290645371
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;PUT
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:FAIL;
		SELECT 
		trolley.id 
		FROM table_trolley trolley
		LEFT JOIN table_product product ON product.id=trolley.id_product
		LEFT JOIN table_product_category category ON category.id=product.id_category
		LEFT JOIN (SELECT category.id_store FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category WHERE product.id=${id_product}) wtadd ON wtadd.id_store!=category.id_store
		WHERE trolley.id_user=${id_user} AND wtadd.id_store IS NOT NULL;{"id_product":"28","id_user":54};{"name":"QueryResultError","stack":"QueryResultError: 0\n    at QueryResultError.Error (native)\n    at new QueryResultError (/root/development/xapps/xapps/node_modules/pg-promise/lib/errors/queryResult.js:121:22)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/lib/query.js:176:41)\n    at Query.handleReadyForQuery (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/query.js:106:10)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/client.js:163:19)\n    at emitOne (events.js:95:20)\n    at emit (events.js:182:7)\n    at Socket.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/connection.js:109:12)\n    at emitOne (events.js:90:13)\n    at Socket.emit (events.js:182:7)","message":"No data returned from the query.","code":0,"result":{"command":"SELECT","rowCount":0,"oid":null,"rows":[],"fields":[{"name":"id","tableID":20828,"columnID":1,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"}],"_parsers":[null],"rowAsArray":false,"duration":2},"query":"\n\t\tSELECT \n\t\ttrolley.id \n\t\tFROM table_trolley trolley\n\t\tLEFT JOIN table_product product ON product.id=trolley.id_product\n\t\tLEFT JOIN table_product_category category ON category.id=product.id_category\n\t\tLEFT JOIN (SELECT category.id_store FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category WHERE product.id='28') wtadd ON wtadd.id_store!=category.id_store\n\t\tWHERE trolley.id_user=54 AND wtadd.id_store IS NOT NULL","received":0}
DB:FAIL;UPDATE table_trolley SET qty=qty+1 WHERE id_product=${id_product} AND id_user=${id_user} RETURNING *;{"id_product":"28","id_user":54};{"name":"QueryResultError","stack":"QueryResultError: 0\n    at QueryResultError.Error (native)\n    at new QueryResultError (/root/development/xapps/xapps/node_modules/pg-promise/lib/errors/queryResult.js:121:22)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/lib/query.js:176:41)\n    at Query.handleReadyForQuery (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/query.js:106:10)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/client.js:163:19)\n    at emitOne (events.js:95:20)\n    at emit (events.js:182:7)\n    at Socket.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/connection.js:109:12)\n    at emitOne (events.js:90:13)\n    at Socket.emit (events.js:182:7)","message":"No data returned from the query.","code":0,"result":{"command":"UPDATE","rowCount":0,"oid":null,"rows":[],"fields":[{"name":"id","tableID":20828,"columnID":1,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"},{"name":"id_user","tableID":20828,"columnID":2,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"},{"name":"id_product","tableID":20828,"columnID":3,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"},{"name":"qty","tableID":20828,"columnID":4,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"},{"name":"time_create","tableID":20828,"columnID":5,"dataTypeID":1114,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"}],"_parsers":[null,null,null,null,null],"rowAsArray":false,"duration":1},"query":"UPDATE table_trolley SET qty=qty+1 WHERE id_product='28' AND id_user=54 RETURNING *","received":0}
DB:OK;INSERT INTO table_trolley (id_product,id_user,qty) VALUES (${id_product},${id_user},1) RETURNING *;{"id_product":"28","id_user":54}
RESULT 200: {"trolley":{"id":"123","id_user":"54","id_product":"28","qty":"1","time_create":"2016-10-24T06:30:45.381Z"}}
[0mPUT /api/trolley/28 [32m200 [0m19.698 ms - 108[0m
API Cluster worker id: 2
REQUESTING PATH /trolley;GET;1477290649254
CHECKING API TOKEN qbUP2ztGvS/3PQCTezuSmj1nbbL+u1WFNqccgdXWEpk+0N5FuFvF4Rz0n+2IILUiViGZjc47H6qSOiq2f91KY1KpWJTeHuJsH1TsYoHtSy4kNzZ7zjxODrdPa+OLwefdjhW7AAZQ4lqJDBSPCy1/F5uiRCPrF3ObOHiQ/eah1tvwCTG5gTv3AdFA3sDWFUYwcnCFuV4na9d2jK+hX1x54k5I6zquo3qoZZw8UtLWKSo2nJorQ9Dh/0Ku3jMCL573bF2vrFwpN8DCvK6ntnaiQ35rT/rywjq4HAJTzo6wRGWQBpPcWlYXrOcJ946FnoBPzcs89JrFpSV3veSzRfoO/w==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290648000,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290648000,"lang":1}; TAG START 1477290649254
TOKEN EXPIRED
PAGE NOT IN EXPIRED TOKEN
RESULT 403.
[0mGET /api/trolley [33m403 [0m8.046 ms - 2[0m
API Cluster worker id: 2
REQUESTING PATH /token/renew;POST;1477290649340
CHECKING API TOKEN qbUP2ztGvS/3PQCTezuSmj1nbbL+u1WFNqccgdXWEpk+0N5FuFvF4Rz0n+2IILUiViGZjc47H6qSOiq2f91KY1KpWJTeHuJsH1TsYoHtSy4kNzZ7zjxODrdPa+OLwefdjhW7AAZQ4lqJDBSPCy1/F5uiRCPrF3ObOHiQ/eah1tvwCTG5gTv3AdFA3sDWFUYwcnCFuV4na9d2jK+hX1x54k5I6zquo3qoZZw8UtLWKSo2nJorQ9Dh/0Ku3jMCL573bF2vrFwpN8DCvK6ntnaiQ35rT/rywjq4HAJTzo6wRGWQBpPcWlYXrOcJ946FnoBPzcs89JrFpSV3veSzRfoO/w==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290648000,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290648000,"lang":1}; TAG START 1477290649340
TOKEN EXPIRED
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:POST;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_session
IS_ERR false
NO COOKIES
COOKIES NOT AVAILABLE
DB:OK;SELECT token_session FROM table_user WHERE id=$1;54
TOKEN SESSION 
bptiaAh3VsP0GJuCeu08Ohkrk3JKn/nGaCQe/Yxx4DbPkxqA/MiyjbOOYE+43j8TGFToqa9fbxdnMSGAjW4uif6/GMmGFx3U0cxwSvWY+5UyRrLM+HE3JM/yHlSlq/qK6PAuQY2l1yhW3bpTScw8lt/W9UeUNVmH2Be3oU0y/EYhRLqmWL/7CLFehluIugUzR+XG7eYROCDBpJfkgBURO0ngfAVHs8T5EYIhYPwHO/ro9G+SlT9V63zB36CnIBjDfwonEeRugJ0hR3XceArTn+A81UbTtXe0ZdRTjMCwxudZErfpXhgN5X1BAtCtlSDPRcsnntKOd7GYv/OVjJd54Q==
bptiaAh3VsP0GJuCeu08Ohkrk3JKn/nGaCQe/Yxx4DbPkxqA/MiyjbOOYE+43j8TGFToqa9fbxdnMSGAjW4uif6/GMmGFx3U0cxwSvWY+5UyRrLM+HE3JM/yHlSlq/qK6PAuQY2l1yhW3bpTScw8lt/W9UeUNVmH2Be3oU0y/EYhRLqmWL/7CLFehluIugUzR+XG7eYROCDBpJfkgBURO0ngfAVHs8T5EYIhYPwHO/ro9G+SlT9V63zB36CnIBjDfwonEeRugJ0hR3XceArTn+A81UbTtXe0ZdRTjMCwxudZErfpXhgN5X1BAtCtlSDPRcsnntKOd7GYv/OVjJd54Q==
CREATE TOKEN 1477290649340;30000
DB:OK;UPDATE table_user SET token_session=${token_session}, token_access=${token_access} WHERE id=${id_user} RETURNING token_session,token_access;{"token_access":"YRSbT4KPPXu46jA029rqV6d5UXYJ94TSTnqP0Np0f8KBYTox57wrhRPUfZUxq/7oZqXCW+0Iw/V1sLKFzvkBUl1HwCgBE+b6ih1rOIR8KhKoP2YxYwbgBc4kbpunvJmR9Hn/rQPr3bY/vmpZxbF18gbkmxF6YSfd42hoizClfDjsspBl1ceVDXCfZkjdlRtPK3TMCPjyITFEWOW/x+nce3xChlCdwUwWKqYkW2TR9TVxmOZaFmb7RxJlKAirGaA9n5aCT7z9vTXhxCp614B8YAaPotCnaGk6YXoO1vqTzDeEe4IV5uxz+CUhk1kFx4pX0RA+dHrsH1Wo2zciAl90bQ==","token_session":"BU8zzn9iDM5WJfqsHMyfhTzPUFGgb+NqV1ZSE/Cbyon0X11JrhP8DSJ6084sOu4bd1F8IjCjHpKCOGF878Qd26XMNuK5P9cGFZ7lNr7NNK5dYe52CoquFVYZV7UFVCGTYkwe1lR5lRaDiGAdMwZ1JSaAZKGN+M2fcbb6YaXbvpI03rjAcMryRDJkDsYITMUjXIDL6jylz32MMHtX3IdUOUrYNzzQ8XY5B8V6yOx0wepcJ5uwnEnuFw9zGrREpFhnefPSwmOATYPYOm7qOW4LpIgFgQ4pK7fpCrcLfGyxDKJforXEbcVz7qbKFcA3ZhNIq4yzIOSzW9X0UIVOCl1LDQ==","id_user":54}
RESULT 200: {"token":{"token_access":"YRSbT4KPPXu46jA029rqV6d5UXYJ94TSTnqP0Np0f8KBYTox57wrhRPUfZUxq/7oZqXCW+0Iw/V1sLKFzvkBUl1HwCgBE+b6ih1rOIR8KhKoP2YxYwbgBc4kbpunvJmR9Hn/rQPr3bY/vmpZxbF18gbkmxF6YSfd42hoizClfDjsspBl1ceVDXCfZkjdlRtPK3TMCPjyITFEWOW/x+nce3xChlCdwUwWKqYkW2TR9TVxmOZaFmb7RxJlKAirGaA9n5aCT7z9vTXhxCp614B8YAaPotCnaGk6YXoO1vqTzDeEe4IV5uxz+CUhk1kFx4pX0RA+dHrsH1Wo2zciAl90bQ==","token_session":"BU8zzn9iDM5WJfqsHMyfhTzPUFGgb+NqV1ZSE/Cbyon0X11JrhP8DSJ6084sOu4bd1F8IjCjHpKCOGF878Qd26XMNuK5P9cGFZ7lNr7NNK5dYe52CoquFVYZV7UFVCGTYkwe1lR5lRaDiGAdMwZ1JSaAZKGN+M2fcbb6YaXbvpI03rjAcMryRDJkDsYITMUjXIDL6jylz32MMHtX3IdUOUrYNzzQ8XY5B8V6yOx0wepcJ5uwnEnuFw9zGrREpFhnefPSwmOATYPYOm7qOW4LpIgFgQ4pK7fpCrcLfGyxDKJforXEbcVz7qbKFcA3ZhNIq4yzIOSzW9X0UIVOCl1LDQ=="}}
API END token renew /
[0mPOST /api/token/renew [32m200 [0m15.891 ms - 736[0m
API Cluster worker id: 2
REQUESTING PATH /trolley;GET;1477290649461
CHECKING API TOKEN YRSbT4KPPXu46jA029rqV6d5UXYJ94TSTnqP0Np0f8KBYTox57wrhRPUfZUxq/7oZqXCW+0Iw/V1sLKFzvkBUl1HwCgBE+b6ih1rOIR8KhKoP2YxYwbgBc4kbpunvJmR9Hn/rQPr3bY/vmpZxbF18gbkmxF6YSfd42hoizClfDjsspBl1ceVDXCfZkjdlRtPK3TMCPjyITFEWOW/x+nce3xChlCdwUwWKqYkW2TR9TVxmOZaFmb7RxJlKAirGaA9n5aCT7z9vTXhxCp614B8YAaPotCnaGk6YXoO1vqTzDeEe4IV5uxz+CUhk1kFx4pX0RA+dHrsH1Wo2zciAl90bQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":54,"role":3,"exp":1477290679340,"lang":1}
TOKEN ACCESS {"id":54,"role":3,"exp":1477290679340,"lang":1}; TAG START 1477290649461
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;SELECT product.*,trolley.qty AS trolley_qty FROM table_trolley trolley LEFT JOIN table_product product ON product.id=trolley.id_product WHERE trolley.id_user=${id_user};{"id_user":54}
DB:OK;SELECT store.*,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category LEFT JOIN table_store store ON store.id=category.id_store LEFT JOIN table_location_gps location ON location.id=store.id_location WHERE product.id=$1;"17"
[{"id":"17","id_category":"61","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"61","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"4"},{"id":"28","id_category":"62","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"62","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":"1"}]
{"id":"7","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 7","address":"Store Address 7","phone":"Store Phone 7","is_delete":false,"id_location":"70","id_schedule":"7","location_longitude":106.814154283935,"location_latitude":-6.24277406943507}
[ { "id": 5, "distance": 5000, "price": 5000 }, { "id": 4, "distance": 4000, "price": 4000 }, { "id": 3, "distance": 3000, "price": 3000 }, { "id": 2, "distance": 2000, "price": 2000 }, { "id": 1, "distance": 1000, "price": 1000 }, { "id": 6, "distance": 0, "price": 0 } ]
RESULT 200: {"trolley":[{"id":"17","id_category":"61","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"61","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"4"},{"id":"28","id_category":"62","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"62","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":"1"}],"store":{"id":"7","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 7","address":"Store Address 7","phone":"Store Phone 7","is_delete":false,"id_location":"70","id_schedule":"7","location_longitude":106.814154283935,"location_latitude":-6.24277406943507},"fee_delivery":[{"id":5,"distance":5000,"price":5000},{"id":4,"distance":4000,"price":4000},{"id":3,"distance":3000,"price":3000},{"id":2,"distance":2000,"price":2000},{"id":1,"distance":1000,"price":1000},{"id":6,"distance":0,"price":0}]}
[0mGET /api/trolley [32m200 [0m11.802 ms - 1090[0m
API Cluster worker id: 2
REQUESTING PATH /user;POST;1477291089050
CHECKING API TOKEN QhKMh3QBDELutBg8O0RHX558KHaGVeMUv72T8aPAva1MqfN4VSbVj0kf25paHCgz0E7GcCX8EQ3G9QG11mVMMVDuH94fTB0Lor3LBZJlSSYL/4+A/Vaz9MYsZM/bqKTE1a7bG8OKsyKQNxubSr3D6sGrEAuSjAnFsII9GBu9SdtZI3Ymh2dn8BDTHhB8PEkuEL/fE84i/HZlc7D+t/7K48b0hTWp1lUqegbsQuISIKgSL0etz6ltmg4bRU5Q/FvLiwMWbzwHooKXdCEqFPSn+TZPy2v4yRYVfzB6umsC24qfGh6n8WjeCB/zIGwJjZM+jVkmgunI6S1ZHZw7LQCy+A==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290177755,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290177755,"lang":2}; TAG START 1477291089050
TOKEN EXPIRED
PAGE NOT IN EXPIRED TOKEN
RESULT 403.
[0mPOST /api/user [33m403 [0m4.038 ms - 2[0m
API Cluster worker id: 2
REQUESTING PATH /token/renew;POST;1477291089142
CHECKING API TOKEN QhKMh3QBDELutBg8O0RHX558KHaGVeMUv72T8aPAva1MqfN4VSbVj0kf25paHCgz0E7GcCX8EQ3G9QG11mVMMVDuH94fTB0Lor3LBZJlSSYL/4+A/Vaz9MYsZM/bqKTE1a7bG8OKsyKQNxubSr3D6sGrEAuSjAnFsII9GBu9SdtZI3Ymh2dn8BDTHhB8PEkuEL/fE84i/HZlc7D+t/7K48b0hTWp1lUqegbsQuISIKgSL0etz6ltmg4bRU5Q/FvLiwMWbzwHooKXdCEqFPSn+TZPy2v4yRYVfzB6umsC24qfGh6n8WjeCB/zIGwJjZM+jVkmgunI6S1ZHZw7LQCy+A==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477290177755,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477290177755,"lang":2}; TAG START 1477291089142
TOKEN EXPIRED
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:POST;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_session
IS_ERR false
NO COOKIES
COOKIES NOT AVAILABLE
DB:OK;SELECT token_session FROM table_user WHERE id=$1;55
TOKEN SESSION 
afY8BGjH05VirKhtqi0QTGpHk2m/vjP5v0a0BxLfVwS5BQ7OGwPI+lQTe6x+NQWopwma90hrrLCBfAsrFsiOx2GIpGsYvAYeAyYCkCBpBFyo/mrVc2MXz5da8POZO1gZG/EzbaAXpAwM7xuaI1yRnHPxg3AKmPhtZvOdoomHOWiBMCLU4/Hm4v0PtES+UhRfSjiGjmi+swxuY5lu0UhRee8+4Fflc6l4i63okh8yrScog0zfJokMhOS4QPrCWlKGmMqvEMTnVuydrUSAyno91ow9013u39ZuqxN1TeOMsT1mhS/wMOyhOR2KPhRyQeQsyHyO3L/vYFJmptKrI/LlJg==
afY8BGjH05VirKhtqi0QTGpHk2m/vjP5v0a0BxLfVwS5BQ7OGwPI+lQTe6x+NQWopwma90hrrLCBfAsrFsiOx2GIpGsYvAYeAyYCkCBpBFyo/mrVc2MXz5da8POZO1gZG/EzbaAXpAwM7xuaI1yRnHPxg3AKmPhtZvOdoomHOWiBMCLU4/Hm4v0PtES+UhRfSjiGjmi+swxuY5lu0UhRee8+4Fflc6l4i63okh8yrScog0zfJokMhOS4QPrCWlKGmMqvEMTnVuydrUSAyno91ow9013u39ZuqxN1TeOMsT1mhS/wMOyhOR2KPhRyQeQsyHyO3L/vYFJmptKrI/LlJg==
CREATE TOKEN 1477291089142;30000
DB:OK;UPDATE table_user SET token_session=${token_session}, token_access=${token_access} WHERE id=${id_user} RETURNING token_session,token_access;{"token_access":"XSqKxBePdnK8HtagocaRnwFk0Z9boJcDEmc37azOHnUGaZ7xUHd7n1hPE/JettgSFjOm9T0ZRaBI3DwbxMaOsPOxuTcXenYeJo/hBqo2GxHnLWA7HuYFoxUoe5TPSkDTulnpEH4m3shDz4kexthy/cI0YdFMCHfUU+Ck9d+44YHleKJol2yPI8geAravwdTYZBum6c1UsVxZQ1vljDtom5/dgczYBj7cQ850N+ohZ+LrkYRHqlJatSj4sdntkTXhZDzUOh2md2kjgSW2X4uWxXHL2teKpk9IaoMc51R5eRZb2BOEjvUD1ix05rlIVm6uGna5PwcltV4nONBQxtCqaQ==","token_session":"ClaPON1DaOMgzlTrUDbiz1whPDmCRj93UwOqUYiKIRCFlXrVX1Lult1xvK2TSUN/lmMre+mNalHbPKDkjLE0wz4tXIo9sd8cgHQwzfTR5VsKLN+Go3kyYQTSu0TJ4JDjo73qlBgFwzIFuZXptDyq7gluqgpeqCZwtCMTv29Rlv0jU5vGyUPMcuOMFe+5+9pWu1MlRK4kWRZ98uwqQ8rPbedM4EuuXznvsPQ7rneuk++bMTUo4IFYkALiZEVCzz1nM6hkHW36ecmVUIZHU5Egr9uxkVIdhsuL+NIHNH7SaVXcgsG/jDJeT3qLdVFLPoZl4dy1hqWcvZ0McslWEB/Kvg==","id_user":55}
RESULT 200: {"token":{"token_access":"XSqKxBePdnK8HtagocaRnwFk0Z9boJcDEmc37azOHnUGaZ7xUHd7n1hPE/JettgSFjOm9T0ZRaBI3DwbxMaOsPOxuTcXenYeJo/hBqo2GxHnLWA7HuYFoxUoe5TPSkDTulnpEH4m3shDz4kexthy/cI0YdFMCHfUU+Ck9d+44YHleKJol2yPI8geAravwdTYZBum6c1UsVxZQ1vljDtom5/dgczYBj7cQ850N+ohZ+LrkYRHqlJatSj4sdntkTXhZDzUOh2md2kjgSW2X4uWxXHL2teKpk9IaoMc51R5eRZb2BOEjvUD1ix05rlIVm6uGna5PwcltV4nONBQxtCqaQ==","token_session":"ClaPON1DaOMgzlTrUDbiz1whPDmCRj93UwOqUYiKIRCFlXrVX1Lult1xvK2TSUN/lmMre+mNalHbPKDkjLE0wz4tXIo9sd8cgHQwzfTR5VsKLN+Go3kyYQTSu0TJ4JDjo73qlBgFwzIFuZXptDyq7gluqgpeqCZwtCMTv29Rlv0jU5vGyUPMcuOMFe+5+9pWu1MlRK4kWRZ98uwqQ8rPbedM4EuuXznvsPQ7rneuk++bMTUo4IFYkALiZEVCzz1nM6hkHW36ecmVUIZHU5Egr9uxkVIdhsuL+NIHNH7SaVXcgsG/jDJeT3qLdVFLPoZl4dy1hqWcvZ0McslWEB/Kvg=="}}
API END token renew /
[0mPOST /api/token/renew [32m200 [0m18.777 ms - 736[0m
API Cluster worker id: 2
REQUESTING PATH /user;POST;1477291089336
CHECKING API TOKEN XSqKxBePdnK8HtagocaRnwFk0Z9boJcDEmc37azOHnUGaZ7xUHd7n1hPE/JettgSFjOm9T0ZRaBI3DwbxMaOsPOxuTcXenYeJo/hBqo2GxHnLWA7HuYFoxUoe5TPSkDTulnpEH4m3shDz4kexthy/cI0YdFMCHfUU+Ck9d+44YHleKJol2yPI8geAravwdTYZBum6c1UsVxZQ1vljDtom5/dgczYBj7cQ850N+ohZ+LrkYRHqlJatSj4sdntkTXhZDzUOh2md2kjgSW2X4uWxXHL2teKpk9IaoMc51R5eRZb2BOEjvUD1ix05rlIVm6uGna5PwcltV4nONBQxtCqaQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291119142,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291119142,"lang":2}; TAG START 1477291089336
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
DB:OK;UPDATE table_user SET id_language=${id_language} WHERE id=${id_user} RETURNING id_language;{"id_user":55,"id_language":"3"}
RESULT 200: {"user":{"language":"zh"}}
[0mPOST /api/user [32m200 [0m10.006 ms - 26[0m
API Cluster worker id: 2
REQUESTING PATH /home/ads;GET;1477291089873
CHECKING API TOKEN XSqKxBePdnK8HtagocaRnwFk0Z9boJcDEmc37azOHnUGaZ7xUHd7n1hPE/JettgSFjOm9T0ZRaBI3DwbxMaOsPOxuTcXenYeJo/hBqo2GxHnLWA7HuYFoxUoe5TPSkDTulnpEH4m3shDz4kexthy/cI0YdFMCHfUU+Ck9d+44YHleKJol2yPI8geAravwdTYZBum6c1UsVxZQ1vljDtom5/dgczYBj7cQ850N+ohZ+LrkYRHqlJatSj4sdntkTXhZDzUOh2md2kjgSW2X4uWxXHL2teKpk9IaoMc51R5eRZb2BOEjvUD1ix05rlIVm6uGna5PwcltV4nONBQxtCqaQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291119142,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291119142,"lang":2}; TAG START 1477291089873
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
DB:OK;SELECT * FROM table_ads WHERE is_active=TRUE ORDER BY id ASC;undefined
RESULT 200: {"home_ads":[{"id":"1","id_user":null,"time_create":"2016-10-23T08:04:04.099Z","ads":[{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"}],"is_active":true},{"id":"2","id_user":null,"time_create":"2016-10-23T08:04:04.100Z","ads":[{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"}],"is_active":true},{"id":"3","id_user":null,"time_create":"2016-10-23T08:04:04.101Z","ads":[{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"}],"is_active":true}]}
[0mGET /api/home/ads [32m200 [0m12.212 ms - 3170[0m
API Cluster worker id: 2
REQUESTING PATH /trolley;GET;1477291091231
CHECKING API TOKEN XSqKxBePdnK8HtagocaRnwFk0Z9boJcDEmc37azOHnUGaZ7xUHd7n1hPE/JettgSFjOm9T0ZRaBI3DwbxMaOsPOxuTcXenYeJo/hBqo2GxHnLWA7HuYFoxUoe5TPSkDTulnpEH4m3shDz4kexthy/cI0YdFMCHfUU+Ck9d+44YHleKJol2yPI8geAravwdTYZBum6c1UsVxZQ1vljDtom5/dgczYBj7cQ850N+ohZ+LrkYRHqlJatSj4sdntkTXhZDzUOh2md2kjgSW2X4uWxXHL2teKpk9IaoMc51R5eRZb2BOEjvUD1ix05rlIVm6uGna5PwcltV4nONBQxtCqaQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291119142,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291119142,"lang":2}; TAG START 1477291091231
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;SELECT product.*,trolley.qty AS trolley_qty FROM table_trolley trolley LEFT JOIN table_product product ON product.id=trolley.id_product WHERE trolley.id_user=${id_user};{"id_user":55}
DB:OK;SELECT store.*,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category LEFT JOIN table_store store ON store.id=category.id_store LEFT JOIN table_location_gps location ON location.id=store.id_location WHERE product.id=$1;"3"
[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"1"}]
{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.894140186487,"location_latitude":-6.29969868523545}
[ { "id": 5, "distance": 5000, "price": 5000 }, { "id": 4, "distance": 4000, "price": 4000 }, { "id": 3, "distance": 3000, "price": 3000 }, { "id": 2, "distance": 2000, "price": 2000 }, { "id": 1, "distance": 1000, "price": 1000 }, { "id": 6, "distance": 0, "price": 0 } ]
RESULT 200: {"trolley":[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"1"}],"store":{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.894140186487,"location_latitude":-6.29969868523545},"fee_delivery":[{"id":5,"distance":5000,"price":5000},{"id":4,"distance":4000,"price":4000},{"id":3,"distance":3000,"price":3000},{"id":2,"distance":2000,"price":2000},{"id":1,"distance":1000,"price":1000},{"id":6,"distance":0,"price":0}]}
[0mGET /api/trolley [32m200 [0m21.629 ms - 793[0m
API Cluster worker id: 2
REQUESTING PATH /user;POST;1477291096855
CHECKING API TOKEN XSqKxBePdnK8HtagocaRnwFk0Z9boJcDEmc37azOHnUGaZ7xUHd7n1hPE/JettgSFjOm9T0ZRaBI3DwbxMaOsPOxuTcXenYeJo/hBqo2GxHnLWA7HuYFoxUoe5TPSkDTulnpEH4m3shDz4kexthy/cI0YdFMCHfUU+Ck9d+44YHleKJol2yPI8geAravwdTYZBum6c1UsVxZQ1vljDtom5/dgczYBj7cQ850N+ohZ+LrkYRHqlJatSj4sdntkTXhZDzUOh2md2kjgSW2X4uWxXHL2teKpk9IaoMc51R5eRZb2BOEjvUD1ix05rlIVm6uGna5PwcltV4nONBQxtCqaQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291119142,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291119142,"lang":2}; TAG START 1477291096855
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
DB:OK;UPDATE table_user SET id_language=${id_language} WHERE id=${id_user} RETURNING id_language;{"id_user":55,"id_language":"1"}
RESULT 200: {"user":{"language":"id"}}
[0mPOST /api/user [32m200 [0m6.913 ms - 26[0m
API Cluster worker id: 2
REQUESTING PATH /home/ads;GET;1477291097330
CHECKING API TOKEN XSqKxBePdnK8HtagocaRnwFk0Z9boJcDEmc37azOHnUGaZ7xUHd7n1hPE/JettgSFjOm9T0ZRaBI3DwbxMaOsPOxuTcXenYeJo/hBqo2GxHnLWA7HuYFoxUoe5TPSkDTulnpEH4m3shDz4kexthy/cI0YdFMCHfUU+Ck9d+44YHleKJol2yPI8geAravwdTYZBum6c1UsVxZQ1vljDtom5/dgczYBj7cQ850N+ohZ+LrkYRHqlJatSj4sdntkTXhZDzUOh2md2kjgSW2X4uWxXHL2teKpk9IaoMc51R5eRZb2BOEjvUD1ix05rlIVm6uGna5PwcltV4nONBQxtCqaQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291119142,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291119142,"lang":2}; TAG START 1477291097330
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
DB:OK;SELECT * FROM table_ads WHERE is_active=TRUE ORDER BY id ASC;undefined
RESULT 200: {"home_ads":[{"id":"1","id_user":null,"time_create":"2016-10-23T08:04:04.099Z","ads":[{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"}],"is_active":true},{"id":"2","id_user":null,"time_create":"2016-10-23T08:04:04.100Z","ads":[{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"}],"is_active":true},{"id":"3","id_user":null,"time_create":"2016-10-23T08:04:04.101Z","ads":[{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"}],"is_active":true}]}
[0mGET /api/home/ads [32m200 [0m6.630 ms - 3170[0m
API Cluster worker id: 2
REQUESTING PATH /trolley;GET;1477291098615
CHECKING API TOKEN XSqKxBePdnK8HtagocaRnwFk0Z9boJcDEmc37azOHnUGaZ7xUHd7n1hPE/JettgSFjOm9T0ZRaBI3DwbxMaOsPOxuTcXenYeJo/hBqo2GxHnLWA7HuYFoxUoe5TPSkDTulnpEH4m3shDz4kexthy/cI0YdFMCHfUU+Ck9d+44YHleKJol2yPI8geAravwdTYZBum6c1UsVxZQ1vljDtom5/dgczYBj7cQ850N+ohZ+LrkYRHqlJatSj4sdntkTXhZDzUOh2md2kjgSW2X4uWxXHL2teKpk9IaoMc51R5eRZb2BOEjvUD1ix05rlIVm6uGna5PwcltV4nONBQxtCqaQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291119142,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291119142,"lang":2}; TAG START 1477291098615
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;SELECT product.*,trolley.qty AS trolley_qty FROM table_trolley trolley LEFT JOIN table_product product ON product.id=trolley.id_product WHERE trolley.id_user=${id_user};{"id_user":55}
DB:OK;SELECT store.*,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category LEFT JOIN table_store store ON store.id=category.id_store LEFT JOIN table_location_gps location ON location.id=store.id_location WHERE product.id=$1;"3"
[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"1"}]
{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.894140186487,"location_latitude":-6.29969868523545}
[ { "id": 5, "distance": 5000, "price": 5000 }, { "id": 4, "distance": 4000, "price": 4000 }, { "id": 3, "distance": 3000, "price": 3000 }, { "id": 2, "distance": 2000, "price": 2000 }, { "id": 1, "distance": 1000, "price": 1000 }, { "id": 6, "distance": 0, "price": 0 } ]
RESULT 200: {"trolley":[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"1"}],"store":{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.894140186487,"location_latitude":-6.29969868523545},"fee_delivery":[{"id":5,"distance":5000,"price":5000},{"id":4,"distance":4000,"price":4000},{"id":3,"distance":3000,"price":3000},{"id":2,"distance":2000,"price":2000},{"id":1,"distance":1000,"price":1000},{"id":6,"distance":0,"price":0}]}
[0mGET /api/trolley [32m200 [0m8.018 ms - 793[0m
API Cluster worker id: 2
REQUESTING PATH /token/update;POST;1477291099645
CHECKING API TOKEN XSqKxBePdnK8HtagocaRnwFk0Z9boJcDEmc37azOHnUGaZ7xUHd7n1hPE/JettgSFjOm9T0ZRaBI3DwbxMaOsPOxuTcXenYeJo/hBqo2GxHnLWA7HuYFoxUoe5TPSkDTulnpEH4m3shDz4kexthy/cI0YdFMCHfUU+Ck9d+44YHleKJol2yPI8geAravwdTYZBum6c1UsVxZQ1vljDtom5/dgczYBj7cQ850N+ohZ+LrkYRHqlJatSj4sdntkTXhZDzUOh2md2kjgSW2X4uWxXHL2teKpk9IaoMc51R5eRZb2BOEjvUD1ix05rlIVm6uGna5PwcltV4nONBQxtCqaQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291119142,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291119142,"lang":2}; TAG START 1477291099645
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_fcm
CHECKING imsi
CHECKING longitude
CHECKING latitude
IS_ERR false
DB:OK;SELECT device.id_location,usr.id_device FROM table_user usr LEFT JOIN table_device device ON device.id=usr.id_device WHERE usr.id=${id_user};{"token_fcm":"-","imsi":"-","longitude":"106.67463395744562","latitude":"-6.299352685094847","id_user":55}
DB:OK;SELECT id_location,(random()/10)-(random()/10)+${longitude} AS random_longitude,(random()/10)-(random()/10)+${latitude} AS random_latitude FROM table_store;{"token_fcm":"-","imsi":"-","longitude":"106.67463395744562","latitude":"-6.299352685094847","id_user":55,"id_location":"162","id_device":"25"}
RESULT 200: {"data":[{"id_location":"10","random_longitude":106.740939854225,"random_latitude":-6.32956847139917},{"id_location":"20","random_longitude":106.746362484433,"random_latitude":-6.25916039316267},{"id_location":"30","random_longitude":106.5925219581,"random_latitude":-6.29826493120104},{"id_location":"40","random_longitude":106.645996367512,"random_latitude":-6.29960565251581},{"id_location":"50","random_longitude":106.590997791057,"random_latitude":-6.29113017526738},{"id_location":"60","random_longitude":106.762902521854,"random_latitude":-6.32393495073825},{"id_location":"70","random_longitude":106.68030600897,"random_latitude":-6.26644864982277},{"id_location":"80","random_longitude":106.680706039304,"random_latitude":-6.22564662137352},{"id_location":"90","random_longitude":106.7016435578,"random_latitude":-6.24980819985554},{"id_location":"100","random_longitude":106.636840614676,"random_latitude":-6.26398548932098}]}
[0mPOST /api/token/update [32m200 [0m14.601 ms - 936[0m
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.740939854225 -6.32956847139917)') WHERE id=${id_location};{"id_location":"10","random_longitude":106.740939854225,"random_latitude":-6.32956847139917}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.746362484433 -6.25916039316267)') WHERE id=${id_location};{"id_location":"20","random_longitude":106.746362484433,"random_latitude":-6.25916039316267}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.5925219581 -6.29826493120104)') WHERE id=${id_location};{"id_location":"30","random_longitude":106.5925219581,"random_latitude":-6.29826493120104}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.645996367512 -6.29960565251581)') WHERE id=${id_location};{"id_location":"40","random_longitude":106.645996367512,"random_latitude":-6.29960565251581}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.636840614676 -6.26398548932098)') WHERE id=${id_location};{"id_location":"100","random_longitude":106.636840614676,"random_latitude":-6.26398548932098}
DB:OK;UPDATE table_device SET token_fcm=${token_fcm}, imsi=${imsi} WHERE id=${id_device};{"token_fcm":"-","imsi":"-","longitude":"106.67463395744562","latitude":"-6.299352685094847","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.7016435578 -6.24980819985554)') WHERE id=${id_location};{"id_location":"90","random_longitude":106.7016435578,"random_latitude":-6.24980819985554}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.68030600897 -6.26644864982277)') WHERE id=${id_location};{"id_location":"70","random_longitude":106.68030600897,"random_latitude":-6.26644864982277}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.590997791057 -6.29113017526738)') WHERE id=${id_location};{"id_location":"50","random_longitude":106.590997791057,"random_latitude":-6.29113017526738}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.762902521854 -6.32393495073825)') WHERE id=${id_location};{"id_location":"60","random_longitude":106.762902521854,"random_latitude":-6.32393495073825}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.680706039304 -6.22564662137352)') WHERE id=${id_location};{"id_location":"80","random_longitude":106.680706039304,"random_latitude":-6.22564662137352}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.67463395744562 -6.299352685094847)') WHERE id=${id_location};{"token_fcm":"-","imsi":"-","longitude":"106.67463395744562","latitude":"-6.299352685094847","id_user":55,"id_location":"162","id_device":"25"}
API Cluster worker id: 2
REQUESTING PATH /store/nearby;GET;1477291099750
CHECKING API TOKEN XSqKxBePdnK8HtagocaRnwFk0Z9boJcDEmc37azOHnUGaZ7xUHd7n1hPE/JettgSFjOm9T0ZRaBI3DwbxMaOsPOxuTcXenYeJo/hBqo2GxHnLWA7HuYFoxUoe5TPSkDTulnpEH4m3shDz4kexthy/cI0YdFMCHfUU+Ck9d+44YHleKJol2yPI8geAravwdTYZBum6c1UsVxZQ1vljDtom5/dgczYBj7cQ850N+ohZ+LrkYRHqlJatSj4sdntkTXhZDzUOh2md2kjgSW2X4uWxXHL2teKpk9IaoMc51R5eRZb2BOEjvUD1ix05rlIVm6uGna5PwcltV4nONBQxtCqaQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291119142,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291119142,"lang":2}; TAG START 1477291099750
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING longitude
CHECKING latitude
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT store.*,rating.counted AS rating,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude,ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67463395744562 -6.299352685094847)')) AS distance_db,${distance} AS distance_max_meter 
		FROM table_store grouping
		LEFT JOIN table_store store ON store.id=grouping.id
		LEFT JOIN table_location_gps location ON location.id=store.id_location
		LEFT JOIN (SELECT AVG(rating) AS counted, id_store FROM table_store_rating GROUP BY id_store) rating ON rating.id_store=store.id
		WHERE ST_DWithin(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67463395744562 -6.299352685094847)'), ${distance})
		ORDER BY ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67463395744562 -6.299352685094847)')) ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		;{"longitude":"106.67463395744562","latitude":"-6.299352685094847","distance":"3000","page_go":0,"page_max":null,"id_user":55}
PAGINATION DATA: []
RESULT 200: {"store_nearby":[],"pagination":{"page_go":"#"}}
[0mGET /api/store/nearby?longitude=106.67463395744562&latitude=-6.299352685094847 [32m200 [0m22.373 ms - 48[0m
API Cluster worker id: 2
REQUESTING PATH /token/update;POST;1477291102295
CHECKING API TOKEN XSqKxBePdnK8HtagocaRnwFk0Z9boJcDEmc37azOHnUGaZ7xUHd7n1hPE/JettgSFjOm9T0ZRaBI3DwbxMaOsPOxuTcXenYeJo/hBqo2GxHnLWA7HuYFoxUoe5TPSkDTulnpEH4m3shDz4kexthy/cI0YdFMCHfUU+Ck9d+44YHleKJol2yPI8geAravwdTYZBum6c1UsVxZQ1vljDtom5/dgczYBj7cQ850N+ohZ+LrkYRHqlJatSj4sdntkTXhZDzUOh2md2kjgSW2X4uWxXHL2teKpk9IaoMc51R5eRZb2BOEjvUD1ix05rlIVm6uGna5PwcltV4nONBQxtCqaQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291119142,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291119142,"lang":2}; TAG START 1477291102295
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_fcm
CHECKING imsi
CHECKING longitude
CHECKING latitude
IS_ERR false
DB:OK;SELECT device.id_location,usr.id_device FROM table_user usr LEFT JOIN table_device device ON device.id=usr.id_device WHERE usr.id=${id_user};{"token_fcm":"-","imsi":"-","longitude":"106.67957525700331","latitude":"-6.317103704625768","id_user":55}
DB:OK;SELECT id_location,(random()/10)-(random()/10)+${longitude} AS random_longitude,(random()/10)-(random()/10)+${latitude} AS random_latitude FROM table_store;{"token_fcm":"-","imsi":"-","longitude":"106.67957525700331","latitude":"-6.317103704625768","id_user":55,"id_location":"162","id_device":"25"}
RESULT 200: {"data":[{"id_location":"10","random_longitude":106.649026002642,"random_latitude":-6.35696707056093},{"id_location":"20","random_longitude":106.717017077515,"random_latitude":-6.32869994640539},{"id_location":"30","random_longitude":106.597489324957,"random_latitude":-6.23068375857736},{"id_location":"40","random_longitude":106.634040553402,"random_latitude":-6.28607354243475},{"id_location":"50","random_longitude":106.709553027013,"random_latitude":-6.22697903099659},{"id_location":"60","random_longitude":106.666839691531,"random_latitude":-6.30867587411965},{"id_location":"70","random_longitude":106.686896271724,"random_latitude":-6.30409154235574},{"id_location":"80","random_longitude":106.72728434992,"random_latitude":-6.26748137474249},{"id_location":"90","random_longitude":106.764409564622,"random_latitude":-6.25913071036528},{"id_location":"100","random_longitude":106.649217887549,"random_latitude":-6.24102192241887}]}
[0mPOST /api/token/update [32m200 [0m13.051 ms - 940[0m
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.597489324957 -6.23068375857736)') WHERE id=${id_location};{"id_location":"30","random_longitude":106.597489324957,"random_latitude":-6.23068375857736}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.717017077515 -6.32869994640539)') WHERE id=${id_location};{"id_location":"20","random_longitude":106.717017077515,"random_latitude":-6.32869994640539}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.686896271724 -6.30409154235574)') WHERE id=${id_location};{"id_location":"70","random_longitude":106.686896271724,"random_latitude":-6.30409154235574}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.634040553402 -6.28607354243475)') WHERE id=${id_location};{"id_location":"40","random_longitude":106.634040553402,"random_latitude":-6.28607354243475}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.709553027013 -6.22697903099659)') WHERE id=${id_location};{"id_location":"50","random_longitude":106.709553027013,"random_latitude":-6.22697903099659}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.72728434992 -6.26748137474249)') WHERE id=${id_location};{"id_location":"80","random_longitude":106.72728434992,"random_latitude":-6.26748137474249}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.666839691531 -6.30867587411965)') WHERE id=${id_location};{"id_location":"60","random_longitude":106.666839691531,"random_latitude":-6.30867587411965}
DB:OK;UPDATE table_device SET token_fcm=${token_fcm}, imsi=${imsi} WHERE id=${id_device};{"token_fcm":"-","imsi":"-","longitude":"106.67957525700331","latitude":"-6.317103704625768","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)') WHERE id=${id_location};{"token_fcm":"-","imsi":"-","longitude":"106.67957525700331","latitude":"-6.317103704625768","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.649026002642 -6.35696707056093)') WHERE id=${id_location};{"id_location":"10","random_longitude":106.649026002642,"random_latitude":-6.35696707056093}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.649217887549 -6.24102192241887)') WHERE id=${id_location};{"id_location":"100","random_longitude":106.649217887549,"random_latitude":-6.24102192241887}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.764409564622 -6.25913071036528)') WHERE id=${id_location};{"id_location":"90","random_longitude":106.764409564622,"random_latitude":-6.25913071036528}
API Cluster worker id: 2
REQUESTING PATH /store/nearby;GET;1477291102370
CHECKING API TOKEN XSqKxBePdnK8HtagocaRnwFk0Z9boJcDEmc37azOHnUGaZ7xUHd7n1hPE/JettgSFjOm9T0ZRaBI3DwbxMaOsPOxuTcXenYeJo/hBqo2GxHnLWA7HuYFoxUoe5TPSkDTulnpEH4m3shDz4kexthy/cI0YdFMCHfUU+Ck9d+44YHleKJol2yPI8geAravwdTYZBum6c1UsVxZQ1vljDtom5/dgczYBj7cQ850N+ohZ+LrkYRHqlJatSj4sdntkTXhZDzUOh2md2kjgSW2X4uWxXHL2teKpk9IaoMc51R5eRZb2BOEjvUD1ix05rlIVm6uGna5PwcltV4nONBQxtCqaQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291119142,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291119142,"lang":2}; TAG START 1477291102370
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING longitude
CHECKING latitude
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT store.*,rating.counted AS rating,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude,ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)')) AS distance_db,${distance} AS distance_max_meter 
		FROM table_store grouping
		LEFT JOIN table_store store ON store.id=grouping.id
		LEFT JOIN table_location_gps location ON location.id=store.id_location
		LEFT JOIN (SELECT AVG(rating) AS counted, id_store FROM table_store_rating GROUP BY id_store) rating ON rating.id_store=store.id
		WHERE ST_DWithin(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)'), ${distance})
		ORDER BY ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)')) ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		;{"longitude":"106.67957525700331","latitude":"-6.317103704625768","distance":"3000","page_go":0,"page_max":null,"id_user":55}
PAGINATION DATA: [{"no":"1","total":"2","id":"7","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 7","address":"Store Address 7","phone":"Store Phone 7","is_delete":false,"id_location":"70","id_schedule":"7","rating":null,"location_longitude":106.686896271724,"location_latitude":-6.30409154235574,"distance_db":1651.328266907,"distance_max_meter":"3000","maxno":"2"},{"no":"2","total":"2","id":"6","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 6","address":"Store Address 6","phone":"Store Phone 6","is_delete":false,"id_location":"60","id_schedule":"6","rating":null,"location_longitude":106.666839691531,"location_latitude":-6.30867587411965,"distance_db":1689.50604782,"distance_max_meter":"3000","maxno":"2"}]
HALO {"store_nearby":[{"id":"7","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 7","address":"Store Address 7","phone":"Store Phone 7","is_delete":false,"id_location":"70","id_schedule":"7","rating":null,"location_longitude":106.686896271724,"location_latitude":-6.30409154235574,"distance_db":1651.328266907,"distance_max_meter":"3000"},{"id":"6","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 6","address":"Store Address 6","phone":"Store Phone 6","is_delete":false,"id_location":"60","id_schedule":"6","rating":null,"location_longitude":106.666839691531,"location_latitude":-6.30867587411965,"distance_db":1689.50604782,"distance_max_meter":"3000"}],"pagination":{"page_go":"#"}}
ERR:null
DONE:{"status":200,"headers":{"content-type":"application/json; charset=UTF-8","date":"Mon, 24 Oct 2016 06:38:22 GMT","expires":"Tue, 25 Oct 2016 06:38:22 GMT","cache-control":"public, max-age=86400","server":"mafe","x-xss-protection":"1; mode=block","x-frame-options":"SAMEORIGIN","alt-svc":"quic=\":443\"; ma=2592000; v=\"36,35,34,33,32\"","accept-ranges":"none","vary":"Accept-Encoding","connection":"close"},"json":{"destination_addresses":["Jl. Raya Rawa Buntu No.1, Rw. Buntu, Serpong, Kota Tangerang Selatan, Banten 15318, Indonesia"],"origin_addresses":["Jl. Sulawesi IV Blok B1 No.23, Rw. Mekar Jaya, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia","Jl. Cilenggang I No.61, Cilenggang, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia"],"rows":[{"elements":[{"distance":{"text":"3.7 km","value":3695},"duration":{"text":"10 mins","value":586},"status":"OK"}]},{"elements":[{"distance":{"text":"3.5 km","value":3482},"duration":{"text":"9 mins","value":527},"status":"OK"}]}],"status":"OK"}}
ELEMENTS:[{"distance":{"text":"3.7 km","value":3695},"duration":{"text":"10 mins","value":586},"status":"OK"}]
RESULT 200: {"store_nearby":[{"id":"6","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 6","address":"Store Address 6","phone":"Store Phone 6","is_delete":false,"id_location":"60","id_schedule":"6","rating":null,"location_longitude":106.666839691531,"location_latitude":-6.30867587411965,"distance_db":1689.50604782,"distance_max_meter":"3000","distance_google":3482},{"id":"7","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 7","address":"Store Address 7","phone":"Store Phone 7","is_delete":false,"id_location":"70","id_schedule":"7","rating":null,"location_longitude":106.686896271724,"location_latitude":-6.30409154235574,"distance_db":1651.328266907,"distance_max_meter":"3000","distance_google":3695}],"pagination":{"page_go":"#"}}
[0mGET /api/store/nearby?longitude=106.67957525700331&latitude=-6.317103704625768 [32m200 [0m203.636 ms - 748[0m
API Cluster worker id: 2
REQUESTING PATH /trolley;GET;1477291103070
CHECKING API TOKEN XSqKxBePdnK8HtagocaRnwFk0Z9boJcDEmc37azOHnUGaZ7xUHd7n1hPE/JettgSFjOm9T0ZRaBI3DwbxMaOsPOxuTcXenYeJo/hBqo2GxHnLWA7HuYFoxUoe5TPSkDTulnpEH4m3shDz4kexthy/cI0YdFMCHfUU+Ck9d+44YHleKJol2yPI8geAravwdTYZBum6c1UsVxZQ1vljDtom5/dgczYBj7cQ850N+ohZ+LrkYRHqlJatSj4sdntkTXhZDzUOh2md2kjgSW2X4uWxXHL2teKpk9IaoMc51R5eRZb2BOEjvUD1ix05rlIVm6uGna5PwcltV4nONBQxtCqaQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291119142,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291119142,"lang":2}; TAG START 1477291103070
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;SELECT product.*,trolley.qty AS trolley_qty FROM table_trolley trolley LEFT JOIN table_product product ON product.id=trolley.id_product WHERE trolley.id_user=${id_user};{"id_user":55}
DB:OK;SELECT store.*,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category LEFT JOIN table_store store ON store.id=category.id_store LEFT JOIN table_location_gps location ON location.id=store.id_location WHERE product.id=$1;"3"
[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"1"}]
{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.709553027013,"location_latitude":-6.22697903099659}
[ { "id": 5, "distance": 5000, "price": 5000 }, { "id": 4, "distance": 4000, "price": 4000 }, { "id": 3, "distance": 3000, "price": 3000 }, { "id": 2, "distance": 2000, "price": 2000 }, { "id": 1, "distance": 1000, "price": 1000 }, { "id": 6, "distance": 0, "price": 0 } ]
RESULT 200: {"trolley":[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"1"}],"store":{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.709553027013,"location_latitude":-6.22697903099659},"fee_delivery":[{"id":5,"distance":5000,"price":5000},{"id":4,"distance":4000,"price":4000},{"id":3,"distance":3000,"price":3000},{"id":2,"distance":2000,"price":2000},{"id":1,"distance":1000,"price":1000},{"id":6,"distance":0,"price":0}]}
[0mGET /api/trolley [32m200 [0m17.438 ms - 793[0m
API Cluster worker id: 2
REQUESTING PATH /token/update;POST;1477291105196
CHECKING API TOKEN XSqKxBePdnK8HtagocaRnwFk0Z9boJcDEmc37azOHnUGaZ7xUHd7n1hPE/JettgSFjOm9T0ZRaBI3DwbxMaOsPOxuTcXenYeJo/hBqo2GxHnLWA7HuYFoxUoe5TPSkDTulnpEH4m3shDz4kexthy/cI0YdFMCHfUU+Ck9d+44YHleKJol2yPI8geAravwdTYZBum6c1UsVxZQ1vljDtom5/dgczYBj7cQ850N+ohZ+LrkYRHqlJatSj4sdntkTXhZDzUOh2md2kjgSW2X4uWxXHL2teKpk9IaoMc51R5eRZb2BOEjvUD1ix05rlIVm6uGna5PwcltV4nONBQxtCqaQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291119142,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291119142,"lang":2}; TAG START 1477291105196
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_fcm
CHECKING imsi
CHECKING longitude
CHECKING latitude
IS_ERR false
DB:OK;SELECT device.id_location,usr.id_device FROM table_user usr LEFT JOIN table_device device ON device.id=usr.id_device WHERE usr.id=${id_user};{"token_fcm":"-","imsi":"-","longitude":"106.67463395744562","latitude":"-6.299352685094847","id_user":55}
DB:OK;SELECT id_location,(random()/10)-(random()/10)+${longitude} AS random_longitude,(random()/10)-(random()/10)+${latitude} AS random_latitude FROM table_store;{"token_fcm":"-","imsi":"-","longitude":"106.67463395744562","latitude":"-6.299352685094847","id_user":55,"id_location":"162","id_device":"25"}
RESULT 200: {"data":[{"id_location":"10","random_longitude":106.726437005494,"random_latitude":-6.36984893070817},{"id_location":"20","random_longitude":106.651400732575,"random_latitude":-6.24605426319227},{"id_location":"30","random_longitude":106.723044078052,"random_latitude":-6.31917957199089},{"id_location":"40","random_longitude":106.689182446431,"random_latitude":-6.39351742129125},{"id_location":"50","random_longitude":106.748004864296,"random_latitude":-6.25083616558745},{"id_location":"60","random_longitude":106.655677030561,"random_latitude":-6.31521192054547},{"id_location":"70","random_longitude":106.662838191586,"random_latitude":-6.29025633280449},{"id_location":"80","random_longitude":106.648191429907,"random_latitude":-6.30869984618671},{"id_location":"90","random_longitude":106.639048155863,"random_latitude":-6.31715000757299},{"id_location":"100","random_longitude":106.672701749159,"random_latitude":-6.30254865550719}]}
[0mPOST /api/token/update [32m200 [0m12.288 ms - 941[0m
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.726437005494 -6.36984893070817)') WHERE id=${id_location};{"id_location":"10","random_longitude":106.726437005494,"random_latitude":-6.36984893070817}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.689182446431 -6.39351742129125)') WHERE id=${id_location};{"id_location":"40","random_longitude":106.689182446431,"random_latitude":-6.39351742129125}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.651400732575 -6.24605426319227)') WHERE id=${id_location};{"id_location":"20","random_longitude":106.651400732575,"random_latitude":-6.24605426319227}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.723044078052 -6.31917957199089)') WHERE id=${id_location};{"id_location":"30","random_longitude":106.723044078052,"random_latitude":-6.31917957199089}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.748004864296 -6.25083616558745)') WHERE id=${id_location};{"id_location":"50","random_longitude":106.748004864296,"random_latitude":-6.25083616558745}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.655677030561 -6.31521192054547)') WHERE id=${id_location};{"id_location":"60","random_longitude":106.655677030561,"random_latitude":-6.31521192054547}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.662838191586 -6.29025633280449)') WHERE id=${id_location};{"id_location":"70","random_longitude":106.662838191586,"random_latitude":-6.29025633280449}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.648191429907 -6.30869984618671)') WHERE id=${id_location};{"id_location":"80","random_longitude":106.648191429907,"random_latitude":-6.30869984618671}
DB:OK;UPDATE table_device SET token_fcm=${token_fcm}, imsi=${imsi} WHERE id=${id_device};{"token_fcm":"-","imsi":"-","longitude":"106.67463395744562","latitude":"-6.299352685094847","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.67463395744562 -6.299352685094847)') WHERE id=${id_location};{"token_fcm":"-","imsi":"-","longitude":"106.67463395744562","latitude":"-6.299352685094847","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.672701749159 -6.30254865550719)') WHERE id=${id_location};{"id_location":"100","random_longitude":106.672701749159,"random_latitude":-6.30254865550719}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.639048155863 -6.31715000757299)') WHERE id=${id_location};{"id_location":"90","random_longitude":106.639048155863,"random_latitude":-6.31715000757299}
API Cluster worker id: 2
REQUESTING PATH /store/nearby;GET;1477291105310
CHECKING API TOKEN XSqKxBePdnK8HtagocaRnwFk0Z9boJcDEmc37azOHnUGaZ7xUHd7n1hPE/JettgSFjOm9T0ZRaBI3DwbxMaOsPOxuTcXenYeJo/hBqo2GxHnLWA7HuYFoxUoe5TPSkDTulnpEH4m3shDz4kexthy/cI0YdFMCHfUU+Ck9d+44YHleKJol2yPI8geAravwdTYZBum6c1UsVxZQ1vljDtom5/dgczYBj7cQ850N+ohZ+LrkYRHqlJatSj4sdntkTXhZDzUOh2md2kjgSW2X4uWxXHL2teKpk9IaoMc51R5eRZb2BOEjvUD1ix05rlIVm6uGna5PwcltV4nONBQxtCqaQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291119142,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291119142,"lang":2}; TAG START 1477291105310
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING longitude
CHECKING latitude
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT store.*,rating.counted AS rating,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude,ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67463395744562 -6.299352685094847)')) AS distance_db,${distance} AS distance_max_meter 
		FROM table_store grouping
		LEFT JOIN table_store store ON store.id=grouping.id
		LEFT JOIN table_location_gps location ON location.id=store.id_location
		LEFT JOIN (SELECT AVG(rating) AS counted, id_store FROM table_store_rating GROUP BY id_store) rating ON rating.id_store=store.id
		WHERE ST_DWithin(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67463395744562 -6.299352685094847)'), ${distance})
		ORDER BY ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67463395744562 -6.299352685094847)')) ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		;{"longitude":"106.67463395744562","latitude":"-6.299352685094847","distance":"3000","page_go":0,"page_max":null,"id_user":55}
PAGINATION DATA: [{"no":"1","total":"3","id":"10","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 10","address":"Store Address 10","phone":"Store Phone 10","is_delete":false,"id_location":"100","id_schedule":"10","rating":null,"location_longitude":106.672701749159,"location_latitude":-6.30254865550719,"distance_db":413.070667598,"distance_max_meter":"3000","maxno":"3"},{"no":"2","total":"3","id":"7","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 7","address":"Store Address 7","phone":"Store Phone 7","is_delete":false,"id_location":"70","id_schedule":"7","rating":null,"location_longitude":106.662838191586,"location_latitude":-6.29025633280449,"distance_db":1647.895655694,"distance_max_meter":"3000","maxno":"3"},{"no":"3","total":"3","id":"6","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 6","address":"Store Address 6","phone":"Store Phone 6","is_delete":false,"id_location":"60","id_schedule":"6","rating":null,"location_longitude":106.655677030561,"location_latitude":-6.31521192054547,"distance_db":2734.192881089,"distance_max_meter":"3000","maxno":"3"}]
HALO {"store_nearby":[{"id":"10","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 10","address":"Store Address 10","phone":"Store Phone 10","is_delete":false,"id_location":"100","id_schedule":"10","rating":null,"location_longitude":106.672701749159,"location_latitude":-6.30254865550719,"distance_db":413.070667598,"distance_max_meter":"3000"},{"id":"7","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 7","address":"Store Address 7","phone":"Store Phone 7","is_delete":false,"id_location":"70","id_schedule":"7","rating":null,"location_longitude":106.662838191586,"location_latitude":-6.29025633280449,"distance_db":1647.895655694,"distance_max_meter":"3000"},{"id":"6","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 6","address":"Store Address 6","phone":"Store Phone 6","is_delete":false,"id_location":"60","id_schedule":"6","rating":null,"location_longitude":106.655677030561,"location_latitude":-6.31521192054547,"distance_db":2734.192881089,"distance_max_meter":"3000"}],"pagination":{"page_go":"#"}}
ERR:null
DONE:{"status":200,"headers":{"content-type":"application/json; charset=UTF-8","date":"Mon, 24 Oct 2016 06:38:25 GMT","expires":"Tue, 25 Oct 2016 06:38:25 GMT","cache-control":"public, max-age=86400","server":"mafe","x-xss-protection":"1; mode=block","x-frame-options":"SAMEORIGIN","alt-svc":"quic=\":443\"; ma=2592000; v=\"36,35,34\"","accept-ranges":"none","vary":"Accept-Encoding","connection":"close"},"json":{"destination_addresses":["Jl. Anggrek Jingga I Blok Av No.18, Rw. Buntu, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia"],"origin_addresses":["Jl. Nn No.66, Rw. Buntu, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia","Jl. Danau Poso, Lengkong Gudang, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia","South Tangerang, South Tangerang City, Banten, Indonesia"],"rows":[{"elements":[{"distance":{"text":"0.8 km","value":798},"duration":{"text":"3 mins","value":197},"status":"OK"}]},{"elements":[{"distance":{"text":"2.7 km","value":2706},"duration":{"text":"9 mins","value":551},"status":"OK"}]},{"elements":[{"distance":{"text":"3.7 km","value":3676},"duration":{"text":"12 mins","value":701},"status":"OK"}]}],"status":"OK"}}
ELEMENTS:[{"distance":{"text":"0.8 km","value":798},"duration":{"text":"3 mins","value":197},"status":"OK"}]
RESULT 200: {"store_nearby":[{"id":"10","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 10","address":"Store Address 10","phone":"Store Phone 10","is_delete":false,"id_location":"100","id_schedule":"10","rating":null,"location_longitude":106.672701749159,"location_latitude":-6.30254865550719,"distance_db":413.070667598,"distance_max_meter":"3000","distance_google":798},{"id":"7","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 7","address":"Store Address 7","phone":"Store Phone 7","is_delete":false,"id_location":"70","id_schedule":"7","rating":null,"location_longitude":106.662838191586,"location_latitude":-6.29025633280449,"distance_db":1647.895655694,"distance_max_meter":"3000","distance_google":2706},{"id":"6","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 6","address":"Store Address 6","phone":"Store Phone 6","is_delete":false,"id_location":"60","id_schedule":"6","rating":null,"location_longitude":106.655677030561,"location_latitude":-6.31521192054547,"distance_db":2734.192881089,"distance_max_meter":"3000","distance_google":3676}],"pagination":{"page_go":"#"}}
[0mGET /api/store/nearby?longitude=106.67463395744562&latitude=-6.299352685094847 [32m200 [0m73.052 ms - 1104[0m
API Cluster worker id: 2
REQUESTING PATH /token/update;POST;1477291107592
CHECKING API TOKEN XSqKxBePdnK8HtagocaRnwFk0Z9boJcDEmc37azOHnUGaZ7xUHd7n1hPE/JettgSFjOm9T0ZRaBI3DwbxMaOsPOxuTcXenYeJo/hBqo2GxHnLWA7HuYFoxUoe5TPSkDTulnpEH4m3shDz4kexthy/cI0YdFMCHfUU+Ck9d+44YHleKJol2yPI8geAravwdTYZBum6c1UsVxZQ1vljDtom5/dgczYBj7cQ850N+ohZ+LrkYRHqlJatSj4sdntkTXhZDzUOh2md2kjgSW2X4uWxXHL2teKpk9IaoMc51R5eRZb2BOEjvUD1ix05rlIVm6uGna5PwcltV4nONBQxtCqaQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291119142,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291119142,"lang":2}; TAG START 1477291107592
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_fcm
CHECKING imsi
CHECKING longitude
CHECKING latitude
IS_ERR false
DB:OK;SELECT device.id_location,usr.id_device FROM table_user usr LEFT JOIN table_device device ON device.id=usr.id_device WHERE usr.id=${id_user};{"token_fcm":"-","imsi":"-","longitude":"106.67957525700331","latitude":"-6.317103704625768","id_user":55}
DB:OK;SELECT id_location,(random()/10)-(random()/10)+${longitude} AS random_longitude,(random()/10)-(random()/10)+${latitude} AS random_latitude FROM table_store;{"token_fcm":"-","imsi":"-","longitude":"106.67957525700331","latitude":"-6.317103704625768","id_user":55,"id_location":"162","id_device":"25"}
RESULT 200: {"data":[{"id_location":"10","random_longitude":106.749125029193,"random_latitude":-6.29858790971528},{"id_location":"20","random_longitude":106.681270341761,"random_latitude":-6.28710162728283},{"id_location":"30","random_longitude":106.672675408702,"random_latitude":-6.35266891252438},{"id_location":"40","random_longitude":106.708732741373,"random_latitude":-6.34096008707027},{"id_location":"50","random_longitude":106.73263351596,"random_latitude":-6.23586043510775},{"id_location":"60","random_longitude":106.687797513045,"random_latitude":-6.2959513016064},{"id_location":"70","random_longitude":106.723679193296,"random_latitude":-6.29734733104895},{"id_location":"80","random_longitude":106.624849126535,"random_latitude":-6.31947400644611},{"id_location":"90","random_longitude":106.681333501637,"random_latitude":-6.28621361768062},{"id_location":"100","random_longitude":106.675503528258,"random_latitude":-6.26504671448099}]}
[0mPOST /api/token/update [32m200 [0m13.378 ms - 939[0m
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.749125029193 -6.29858790971528)') WHERE id=${id_location};{"id_location":"10","random_longitude":106.749125029193,"random_latitude":-6.29858790971528}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.681333501637 -6.28621361768062)') WHERE id=${id_location};{"id_location":"90","random_longitude":106.681333501637,"random_latitude":-6.28621361768062}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.687797513045 -6.2959513016064)') WHERE id=${id_location};{"id_location":"60","random_longitude":106.687797513045,"random_latitude":-6.2959513016064}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.675503528258 -6.26504671448099)') WHERE id=${id_location};{"id_location":"100","random_longitude":106.675503528258,"random_latitude":-6.26504671448099}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.723679193296 -6.29734733104895)') WHERE id=${id_location};{"id_location":"70","random_longitude":106.723679193296,"random_latitude":-6.29734733104895}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.624849126535 -6.31947400644611)') WHERE id=${id_location};{"id_location":"80","random_longitude":106.624849126535,"random_latitude":-6.31947400644611}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.681270341761 -6.28710162728283)') WHERE id=${id_location};{"id_location":"20","random_longitude":106.681270341761,"random_latitude":-6.28710162728283}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.672675408702 -6.35266891252438)') WHERE id=${id_location};{"id_location":"30","random_longitude":106.672675408702,"random_latitude":-6.35266891252438}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.708732741373 -6.34096008707027)') WHERE id=${id_location};{"id_location":"40","random_longitude":106.708732741373,"random_latitude":-6.34096008707027}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.73263351596 -6.23586043510775)') WHERE id=${id_location};{"id_location":"50","random_longitude":106.73263351596,"random_latitude":-6.23586043510775}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)') WHERE id=${id_location};{"token_fcm":"-","imsi":"-","longitude":"106.67957525700331","latitude":"-6.317103704625768","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_device SET token_fcm=${token_fcm}, imsi=${imsi} WHERE id=${id_device};{"token_fcm":"-","imsi":"-","longitude":"106.67957525700331","latitude":"-6.317103704625768","id_user":55,"id_location":"162","id_device":"25"}
API Cluster worker id: 2
REQUESTING PATH /store/nearby;GET;1477291107675
CHECKING API TOKEN XSqKxBePdnK8HtagocaRnwFk0Z9boJcDEmc37azOHnUGaZ7xUHd7n1hPE/JettgSFjOm9T0ZRaBI3DwbxMaOsPOxuTcXenYeJo/hBqo2GxHnLWA7HuYFoxUoe5TPSkDTulnpEH4m3shDz4kexthy/cI0YdFMCHfUU+Ck9d+44YHleKJol2yPI8geAravwdTYZBum6c1UsVxZQ1vljDtom5/dgczYBj7cQ850N+ohZ+LrkYRHqlJatSj4sdntkTXhZDzUOh2md2kjgSW2X4uWxXHL2teKpk9IaoMc51R5eRZb2BOEjvUD1ix05rlIVm6uGna5PwcltV4nONBQxtCqaQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291119142,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291119142,"lang":2}; TAG START 1477291107675
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING longitude
CHECKING latitude
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT store.*,rating.counted AS rating,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude,ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)')) AS distance_db,${distance} AS distance_max_meter 
		FROM table_store grouping
		LEFT JOIN table_store store ON store.id=grouping.id
		LEFT JOIN table_location_gps location ON location.id=store.id_location
		LEFT JOIN (SELECT AVG(rating) AS counted, id_store FROM table_store_rating GROUP BY id_store) rating ON rating.id_store=store.id
		WHERE ST_DWithin(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)'), ${distance})
		ORDER BY ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)')) ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		;{"longitude":"106.67957525700331","latitude":"-6.317103704625768","distance":"3000","page_go":0,"page_max":null,"id_user":55}
PAGINATION DATA: [{"no":"1","total":"1","id":"6","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 6","address":"Store Address 6","phone":"Store Phone 6","is_delete":false,"id_location":"60","id_schedule":"6","rating":null,"location_longitude":106.687797513045,"location_latitude":-6.2959513016064,"distance_db":2509.892578997,"distance_max_meter":"3000","maxno":"1"}]
HALO {"store_nearby":[{"id":"6","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 6","address":"Store Address 6","phone":"Store Phone 6","is_delete":false,"id_location":"60","id_schedule":"6","rating":null,"location_longitude":106.687797513045,"location_latitude":-6.2959513016064,"distance_db":2509.892578997,"distance_max_meter":"3000"}],"pagination":{"page_go":"#"}}
ERR:null
DONE:{"status":200,"headers":{"content-type":"application/json; charset=UTF-8","date":"Mon, 24 Oct 2016 06:38:27 GMT","expires":"Tue, 25 Oct 2016 06:38:27 GMT","cache-control":"public, max-age=86400","server":"mafe","x-xss-protection":"1; mode=block","x-frame-options":"SAMEORIGIN","alt-svc":"quic=\":443\"; ma=2592000; v=\"36,35,34\"","accept-ranges":"none","vary":"Accept-Encoding","connection":"close"},"json":{"destination_addresses":["Jl. Raya Rawa Buntu No.1, Rw. Buntu, Serpong, Kota Tangerang Selatan, Banten 15318, Indonesia"],"origin_addresses":["Jl. Lengkong Gudang Timur IV, Lengkong Gudang Tim., Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia"],"rows":[{"elements":[{"distance":{"text":"4.9 km","value":4899},"duration":{"text":"13 mins","value":766},"status":"OK"}]}],"status":"OK"}}
ELEMENTS:[{"distance":{"text":"4.9 km","value":4899},"duration":{"text":"13 mins","value":766},"status":"OK"}]
RESULT 200: {"store_nearby":[{"id":"6","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 6","address":"Store Address 6","phone":"Store Phone 6","is_delete":false,"id_location":"60","id_schedule":"6","rating":null,"location_longitude":106.687797513045,"location_latitude":-6.2959513016064,"distance_db":2509.892578997,"distance_max_meter":"3000","distance_google":4899}],"pagination":{"page_go":"#"}}
[0mGET /api/store/nearby?longitude=106.67957525700331&latitude=-6.317103704625768 [32m200 [0m71.524 ms - 397[0m
API Cluster worker id: 2
REQUESTING PATH /trolley;GET;1477291108960
CHECKING API TOKEN XSqKxBePdnK8HtagocaRnwFk0Z9boJcDEmc37azOHnUGaZ7xUHd7n1hPE/JettgSFjOm9T0ZRaBI3DwbxMaOsPOxuTcXenYeJo/hBqo2GxHnLWA7HuYFoxUoe5TPSkDTulnpEH4m3shDz4kexthy/cI0YdFMCHfUU+Ck9d+44YHleKJol2yPI8geAravwdTYZBum6c1UsVxZQ1vljDtom5/dgczYBj7cQ850N+ohZ+LrkYRHqlJatSj4sdntkTXhZDzUOh2md2kjgSW2X4uWxXHL2teKpk9IaoMc51R5eRZb2BOEjvUD1ix05rlIVm6uGna5PwcltV4nONBQxtCqaQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291119142,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291119142,"lang":2}; TAG START 1477291108960
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;SELECT product.*,trolley.qty AS trolley_qty FROM table_trolley trolley LEFT JOIN table_product product ON product.id=trolley.id_product WHERE trolley.id_user=${id_user};{"id_user":55}
DB:OK;SELECT store.*,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category LEFT JOIN table_store store ON store.id=category.id_store LEFT JOIN table_location_gps location ON location.id=store.id_location WHERE product.id=$1;"3"
[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"1"}]
{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.73263351596,"location_latitude":-6.23586043510775}
[ { "id": 5, "distance": 5000, "price": 5000 }, { "id": 4, "distance": 4000, "price": 4000 }, { "id": 3, "distance": 3000, "price": 3000 }, { "id": 2, "distance": 2000, "price": 2000 }, { "id": 1, "distance": 1000, "price": 1000 }, { "id": 6, "distance": 0, "price": 0 } ]
RESULT 200: {"trolley":[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"1"}],"store":{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.73263351596,"location_latitude":-6.23586043510775},"fee_delivery":[{"id":5,"distance":5000,"price":5000},{"id":4,"distance":4000,"price":4000},{"id":3,"distance":3000,"price":3000},{"id":2,"distance":2000,"price":2000},{"id":1,"distance":1000,"price":1000},{"id":6,"distance":0,"price":0}]}
[0mGET /api/trolley [32m200 [0m11.273 ms - 792[0m
API Cluster worker id: 2
REQUESTING PATH /trolley/3;PUT;1477291111010
CHECKING API TOKEN XSqKxBePdnK8HtagocaRnwFk0Z9boJcDEmc37azOHnUGaZ7xUHd7n1hPE/JettgSFjOm9T0ZRaBI3DwbxMaOsPOxuTcXenYeJo/hBqo2GxHnLWA7HuYFoxUoe5TPSkDTulnpEH4m3shDz4kexthy/cI0YdFMCHfUU+Ck9d+44YHleKJol2yPI8geAravwdTYZBum6c1UsVxZQ1vljDtom5/dgczYBj7cQ850N+ohZ+LrkYRHqlJatSj4sdntkTXhZDzUOh2md2kjgSW2X4uWxXHL2teKpk9IaoMc51R5eRZb2BOEjvUD1ix05rlIVm6uGna5PwcltV4nONBQxtCqaQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291119142,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291119142,"lang":2}; TAG START 1477291111010
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;PUT
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:FAIL;
		SELECT 
		trolley.id 
		FROM table_trolley trolley
		LEFT JOIN table_product product ON product.id=trolley.id_product
		LEFT JOIN table_product_category category ON category.id=product.id_category
		LEFT JOIN (SELECT category.id_store FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category WHERE product.id=${id_product}) wtadd ON wtadd.id_store!=category.id_store
		WHERE trolley.id_user=${id_user} AND wtadd.id_store IS NOT NULL;{"id_product":"3","id_user":55};{"name":"QueryResultError","stack":"QueryResultError: 0\n    at QueryResultError.Error (native)\n    at new QueryResultError (/root/development/xapps/xapps/node_modules/pg-promise/lib/errors/queryResult.js:121:22)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/lib/query.js:176:41)\n    at Query.handleReadyForQuery (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/query.js:106:10)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/client.js:163:19)\n    at emitOne (events.js:95:20)\n    at emit (events.js:182:7)\n    at Socket.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/connection.js:109:12)\n    at emitOne (events.js:90:13)\n    at Socket.emit (events.js:182:7)","message":"No data returned from the query.","code":0,"result":{"command":"SELECT","rowCount":0,"oid":null,"rows":[],"fields":[{"name":"id","tableID":20828,"columnID":1,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"}],"_parsers":[null],"rowAsArray":false,"duration":3},"query":"\n\t\tSELECT \n\t\ttrolley.id \n\t\tFROM table_trolley trolley\n\t\tLEFT JOIN table_product product ON product.id=trolley.id_product\n\t\tLEFT JOIN table_product_category category ON category.id=product.id_category\n\t\tLEFT JOIN (SELECT category.id_store FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category WHERE product.id='3') wtadd ON wtadd.id_store!=category.id_store\n\t\tWHERE trolley.id_user=55 AND wtadd.id_store IS NOT NULL","received":0}
DB:OK;UPDATE table_trolley SET qty=qty+1 WHERE id_product=${id_product} AND id_user=${id_user} RETURNING *;{"id_product":"3","id_user":55}
RESULT 200: {"trolley":{"id":"119","id_user":"55","id_product":"3","qty":"2","time_create":"2016-10-24T06:06:53.260Z"}}
[0mPUT /api/trolley/3 [32m200 [0m14.401 ms - 107[0m
API Cluster worker id: 2
REQUESTING PATH /trolley/3;PUT;1477291111650
CHECKING API TOKEN XSqKxBePdnK8HtagocaRnwFk0Z9boJcDEmc37azOHnUGaZ7xUHd7n1hPE/JettgSFjOm9T0ZRaBI3DwbxMaOsPOxuTcXenYeJo/hBqo2GxHnLWA7HuYFoxUoe5TPSkDTulnpEH4m3shDz4kexthy/cI0YdFMCHfUU+Ck9d+44YHleKJol2yPI8geAravwdTYZBum6c1UsVxZQ1vljDtom5/dgczYBj7cQ850N+ohZ+LrkYRHqlJatSj4sdntkTXhZDzUOh2md2kjgSW2X4uWxXHL2teKpk9IaoMc51R5eRZb2BOEjvUD1ix05rlIVm6uGna5PwcltV4nONBQxtCqaQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291119142,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291119142,"lang":2}; TAG START 1477291111650
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;PUT
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:FAIL;
		SELECT 
		trolley.id 
		FROM table_trolley trolley
		LEFT JOIN table_product product ON product.id=trolley.id_product
		LEFT JOIN table_product_category category ON category.id=product.id_category
		LEFT JOIN (SELECT category.id_store FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category WHERE product.id=${id_product}) wtadd ON wtadd.id_store!=category.id_store
		WHERE trolley.id_user=${id_user} AND wtadd.id_store IS NOT NULL;{"id_product":"3","id_user":55};{"name":"QueryResultError","stack":"QueryResultError: 0\n    at QueryResultError.Error (native)\n    at new QueryResultError (/root/development/xapps/xapps/node_modules/pg-promise/lib/errors/queryResult.js:121:22)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/lib/query.js:176:41)\n    at Query.handleReadyForQuery (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/query.js:106:10)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/client.js:163:19)\n    at emitOne (events.js:95:20)\n    at emit (events.js:182:7)\n    at Socket.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/connection.js:109:12)\n    at emitOne (events.js:90:13)\n    at Socket.emit (events.js:182:7)","message":"No data returned from the query.","code":0,"result":{"command":"SELECT","rowCount":0,"oid":null,"rows":[],"fields":[{"name":"id","tableID":20828,"columnID":1,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"}],"_parsers":[null],"rowAsArray":false,"duration":3},"query":"\n\t\tSELECT \n\t\ttrolley.id \n\t\tFROM table_trolley trolley\n\t\tLEFT JOIN table_product product ON product.id=trolley.id_product\n\t\tLEFT JOIN table_product_category category ON category.id=product.id_category\n\t\tLEFT JOIN (SELECT category.id_store FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category WHERE product.id='3') wtadd ON wtadd.id_store!=category.id_store\n\t\tWHERE trolley.id_user=55 AND wtadd.id_store IS NOT NULL","received":0}
DB:OK;UPDATE table_trolley SET qty=qty+1 WHERE id_product=${id_product} AND id_user=${id_user} RETURNING *;{"id_product":"3","id_user":55}
RESULT 200: {"trolley":{"id":"119","id_user":"55","id_product":"3","qty":"3","time_create":"2016-10-24T06:06:53.260Z"}}
[0mPUT /api/trolley/3 [32m200 [0m19.669 ms - 107[0m
API Cluster worker id: 2
REQUESTING PATH /trolley;GET;1477291113656
CHECKING API TOKEN XSqKxBePdnK8HtagocaRnwFk0Z9boJcDEmc37azOHnUGaZ7xUHd7n1hPE/JettgSFjOm9T0ZRaBI3DwbxMaOsPOxuTcXenYeJo/hBqo2GxHnLWA7HuYFoxUoe5TPSkDTulnpEH4m3shDz4kexthy/cI0YdFMCHfUU+Ck9d+44YHleKJol2yPI8geAravwdTYZBum6c1UsVxZQ1vljDtom5/dgczYBj7cQ850N+ohZ+LrkYRHqlJatSj4sdntkTXhZDzUOh2md2kjgSW2X4uWxXHL2teKpk9IaoMc51R5eRZb2BOEjvUD1ix05rlIVm6uGna5PwcltV4nONBQxtCqaQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291119142,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291119142,"lang":2}; TAG START 1477291113656
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;SELECT product.*,trolley.qty AS trolley_qty FROM table_trolley trolley LEFT JOIN table_product product ON product.id=trolley.id_product WHERE trolley.id_user=${id_user};{"id_user":55}
DB:OK;SELECT store.*,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category LEFT JOIN table_store store ON store.id=category.id_store LEFT JOIN table_location_gps location ON location.id=store.id_location WHERE product.id=$1;"3"
[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"3"}]
{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.73263351596,"location_latitude":-6.23586043510775}
[ { "id": 5, "distance": 5000, "price": 5000 }, { "id": 4, "distance": 4000, "price": 4000 }, { "id": 3, "distance": 3000, "price": 3000 }, { "id": 2, "distance": 2000, "price": 2000 }, { "id": 1, "distance": 1000, "price": 1000 }, { "id": 6, "distance": 0, "price": 0 } ]
RESULT 200: {"trolley":[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"3"}],"store":{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.73263351596,"location_latitude":-6.23586043510775},"fee_delivery":[{"id":5,"distance":5000,"price":5000},{"id":4,"distance":4000,"price":4000},{"id":3,"distance":3000,"price":3000},{"id":2,"distance":2000,"price":2000},{"id":1,"distance":1000,"price":1000},{"id":6,"distance":0,"price":0}]}
[0mGET /api/trolley [32m200 [0m14.053 ms - 792[0m
API Cluster worker id: 2
REQUESTING PATH /trolley/3;DELETE;1477291114809
CHECKING API TOKEN XSqKxBePdnK8HtagocaRnwFk0Z9boJcDEmc37azOHnUGaZ7xUHd7n1hPE/JettgSFjOm9T0ZRaBI3DwbxMaOsPOxuTcXenYeJo/hBqo2GxHnLWA7HuYFoxUoe5TPSkDTulnpEH4m3shDz4kexthy/cI0YdFMCHfUU+Ck9d+44YHleKJol2yPI8geAravwdTYZBum6c1UsVxZQ1vljDtom5/dgczYBj7cQ850N+ohZ+LrkYRHqlJatSj4sdntkTXhZDzUOh2md2kjgSW2X4uWxXHL2teKpk9IaoMc51R5eRZb2BOEjvUD1ix05rlIVm6uGna5PwcltV4nONBQxtCqaQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291119142,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291119142,"lang":2}; TAG START 1477291114809
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;DELETE
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;UPDATE table_trolley SET qty=qty-1 WHERE id_product=${id_product} AND id_user=${id_user} AND qty>0 RETURNING *;{"id_product":"3","id_user":55}
RESULT 200: {"trolley":{"id":"119","id_user":"55","id_product":"3","qty":"2","time_create":"2016-10-24T06:06:53.260Z"}}
[0mDELETE /api/trolley/3 [32m200 [0m9.101 ms - 107[0m
API Cluster worker id: 2
REQUESTING PATH /trolley;GET;1477291116550
CHECKING API TOKEN XSqKxBePdnK8HtagocaRnwFk0Z9boJcDEmc37azOHnUGaZ7xUHd7n1hPE/JettgSFjOm9T0ZRaBI3DwbxMaOsPOxuTcXenYeJo/hBqo2GxHnLWA7HuYFoxUoe5TPSkDTulnpEH4m3shDz4kexthy/cI0YdFMCHfUU+Ck9d+44YHleKJol2yPI8geAravwdTYZBum6c1UsVxZQ1vljDtom5/dgczYBj7cQ850N+ohZ+LrkYRHqlJatSj4sdntkTXhZDzUOh2md2kjgSW2X4uWxXHL2teKpk9IaoMc51R5eRZb2BOEjvUD1ix05rlIVm6uGna5PwcltV4nONBQxtCqaQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291119142,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291119142,"lang":2}; TAG START 1477291116550
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;SELECT product.*,trolley.qty AS trolley_qty FROM table_trolley trolley LEFT JOIN table_product product ON product.id=trolley.id_product WHERE trolley.id_user=${id_user};{"id_user":55}
DB:OK;SELECT store.*,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category LEFT JOIN table_store store ON store.id=category.id_store LEFT JOIN table_location_gps location ON location.id=store.id_location WHERE product.id=$1;"3"
[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"2"}]
{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.73263351596,"location_latitude":-6.23586043510775}
[ { "id": 5, "distance": 5000, "price": 5000 }, { "id": 4, "distance": 4000, "price": 4000 }, { "id": 3, "distance": 3000, "price": 3000 }, { "id": 2, "distance": 2000, "price": 2000 }, { "id": 1, "distance": 1000, "price": 1000 }, { "id": 6, "distance": 0, "price": 0 } ]
RESULT 200: {"trolley":[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"2"}],"store":{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.73263351596,"location_latitude":-6.23586043510775},"fee_delivery":[{"id":5,"distance":5000,"price":5000},{"id":4,"distance":4000,"price":4000},{"id":3,"distance":3000,"price":3000},{"id":2,"distance":2000,"price":2000},{"id":1,"distance":1000,"price":1000},{"id":6,"distance":0,"price":0}]}
[0mGET /api/trolley [32m200 [0m16.894 ms - 792[0m
API Cluster worker id: 2
REQUESTING PATH /trolley;GET;1477291144525
CHECKING API TOKEN XSqKxBePdnK8HtagocaRnwFk0Z9boJcDEmc37azOHnUGaZ7xUHd7n1hPE/JettgSFjOm9T0ZRaBI3DwbxMaOsPOxuTcXenYeJo/hBqo2GxHnLWA7HuYFoxUoe5TPSkDTulnpEH4m3shDz4kexthy/cI0YdFMCHfUU+Ck9d+44YHleKJol2yPI8geAravwdTYZBum6c1UsVxZQ1vljDtom5/dgczYBj7cQ850N+ohZ+LrkYRHqlJatSj4sdntkTXhZDzUOh2md2kjgSW2X4uWxXHL2teKpk9IaoMc51R5eRZb2BOEjvUD1ix05rlIVm6uGna5PwcltV4nONBQxtCqaQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291119142,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291119142,"lang":2}; TAG START 1477291144525
TOKEN EXPIRED
PAGE NOT IN EXPIRED TOKEN
RESULT 403.
[0mGET /api/trolley [33m403 [0m19.663 ms - 2[0m
API Cluster worker id: 2
REQUESTING PATH /token/renew;POST;1477291144642
CHECKING API TOKEN XSqKxBePdnK8HtagocaRnwFk0Z9boJcDEmc37azOHnUGaZ7xUHd7n1hPE/JettgSFjOm9T0ZRaBI3DwbxMaOsPOxuTcXenYeJo/hBqo2GxHnLWA7HuYFoxUoe5TPSkDTulnpEH4m3shDz4kexthy/cI0YdFMCHfUU+Ck9d+44YHleKJol2yPI8geAravwdTYZBum6c1UsVxZQ1vljDtom5/dgczYBj7cQ850N+ohZ+LrkYRHqlJatSj4sdntkTXhZDzUOh2md2kjgSW2X4uWxXHL2teKpk9IaoMc51R5eRZb2BOEjvUD1ix05rlIVm6uGna5PwcltV4nONBQxtCqaQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291119142,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291119142,"lang":2}; TAG START 1477291144642
TOKEN EXPIRED
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:POST;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_session
IS_ERR false
NO COOKIES
COOKIES NOT AVAILABLE
DB:OK;SELECT token_session FROM table_user WHERE id=$1;55
TOKEN SESSION 
ClaPON1DaOMgzlTrUDbiz1whPDmCRj93UwOqUYiKIRCFlXrVX1Lult1xvK2TSUN/lmMre+mNalHbPKDkjLE0wz4tXIo9sd8cgHQwzfTR5VsKLN+Go3kyYQTSu0TJ4JDjo73qlBgFwzIFuZXptDyq7gluqgpeqCZwtCMTv29Rlv0jU5vGyUPMcuOMFe+5+9pWu1MlRK4kWRZ98uwqQ8rPbedM4EuuXznvsPQ7rneuk++bMTUo4IFYkALiZEVCzz1nM6hkHW36ecmVUIZHU5Egr9uxkVIdhsuL+NIHNH7SaVXcgsG/jDJeT3qLdVFLPoZl4dy1hqWcvZ0McslWEB/Kvg==
ClaPON1DaOMgzlTrUDbiz1whPDmCRj93UwOqUYiKIRCFlXrVX1Lult1xvK2TSUN/lmMre+mNalHbPKDkjLE0wz4tXIo9sd8cgHQwzfTR5VsKLN+Go3kyYQTSu0TJ4JDjo73qlBgFwzIFuZXptDyq7gluqgpeqCZwtCMTv29Rlv0jU5vGyUPMcuOMFe+5+9pWu1MlRK4kWRZ98uwqQ8rPbedM4EuuXznvsPQ7rneuk++bMTUo4IFYkALiZEVCzz1nM6hkHW36ecmVUIZHU5Egr9uxkVIdhsuL+NIHNH7SaVXcgsG/jDJeT3qLdVFLPoZl4dy1hqWcvZ0McslWEB/Kvg==
CREATE TOKEN 1477291144642;30000
DB:OK;UPDATE table_user SET token_session=${token_session}, token_access=${token_access} WHERE id=${id_user} RETURNING token_session,token_access;{"token_access":"dmYnFGBzili02FVCVlQ4t+E4AAYfNt+/mwcVkHn18YGTLHeduedfhhhykdtefE6TvyeuG47sP9QKHRTSPN/hiZxcfvI/uGj7r/mEBk6ZRto5nJzFooj2XaY7AluoRILxkyVd1mHHWzZ10lrb5j3JDv0G1cmy7traB/AP55YbLSkwOJWgEGnK6EhuWZrHO1fgzG5RYXlT6+1e38taqIU5/B4EvRoRZjYytCYxvazDsy25KIvj/HFVnlM3FOyinAS/qVb9Hc3+rUrxKsHl6by4fd+NzaBFaayT9tVMYT8rpO5jEpFMbw6OVtDlAqEEUtBFWTPuMD5ZE9lmhTC/1Qay5Q==","token_session":"vpj40c3kUpE7K5AUtGQYGHDkPNd0tzCNobMxBK6cL5tkTAej37qJysA4rAGU4LT1fdGyut6BFcG1H4eh7ZuXvvJcGuiwH2AGujUbL7o6LNPmsqQh95tJQaPf0exNOw/4KAq7492SM3oUsEUYzqNZcw9OaItwNjt/UgfG68YAvoNdqzdujzYGQqf+ZWvAlvptyhQvmgY+ISp2lg8r6SoxQpbBvRhZp5vRixdtK7XiCQUkoCwMcC09UEnUZvOAxlkGdKJDgnZmxnUdncd3PzfFv29ZE2Dfv7g3KURtaLXFUU9cjiLIL99i50/1lZ53SWo3YtggwT03jT+fEKr5HHAxdA==","id_user":55}
RESULT 200: {"token":{"token_access":"dmYnFGBzili02FVCVlQ4t+E4AAYfNt+/mwcVkHn18YGTLHeduedfhhhykdtefE6TvyeuG47sP9QKHRTSPN/hiZxcfvI/uGj7r/mEBk6ZRto5nJzFooj2XaY7AluoRILxkyVd1mHHWzZ10lrb5j3JDv0G1cmy7traB/AP55YbLSkwOJWgEGnK6EhuWZrHO1fgzG5RYXlT6+1e38taqIU5/B4EvRoRZjYytCYxvazDsy25KIvj/HFVnlM3FOyinAS/qVb9Hc3+rUrxKsHl6by4fd+NzaBFaayT9tVMYT8rpO5jEpFMbw6OVtDlAqEEUtBFWTPuMD5ZE9lmhTC/1Qay5Q==","token_session":"vpj40c3kUpE7K5AUtGQYGHDkPNd0tzCNobMxBK6cL5tkTAej37qJysA4rAGU4LT1fdGyut6BFcG1H4eh7ZuXvvJcGuiwH2AGujUbL7o6LNPmsqQh95tJQaPf0exNOw/4KAq7492SM3oUsEUYzqNZcw9OaItwNjt/UgfG68YAvoNdqzdujzYGQqf+ZWvAlvptyhQvmgY+ISp2lg8r6SoxQpbBvRhZp5vRixdtK7XiCQUkoCwMcC09UEnUZvOAxlkGdKJDgnZmxnUdncd3PzfFv29ZE2Dfv7g3KURtaLXFUU9cjiLIL99i50/1lZ53SWo3YtggwT03jT+fEKr5HHAxdA=="}}
API END token renew /
[0mPOST /api/token/renew [32m200 [0m38.379 ms - 736[0m
API Cluster worker id: 2
REQUESTING PATH /trolley;GET;1477291144861
CHECKING API TOKEN dmYnFGBzili02FVCVlQ4t+E4AAYfNt+/mwcVkHn18YGTLHeduedfhhhykdtefE6TvyeuG47sP9QKHRTSPN/hiZxcfvI/uGj7r/mEBk6ZRto5nJzFooj2XaY7AluoRILxkyVd1mHHWzZ10lrb5j3JDv0G1cmy7traB/AP55YbLSkwOJWgEGnK6EhuWZrHO1fgzG5RYXlT6+1e38taqIU5/B4EvRoRZjYytCYxvazDsy25KIvj/HFVnlM3FOyinAS/qVb9Hc3+rUrxKsHl6by4fd+NzaBFaayT9tVMYT8rpO5jEpFMbw6OVtDlAqEEUtBFWTPuMD5ZE9lmhTC/1Qay5Q==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291174642,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291174642,"lang":2}; TAG START 1477291144861
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;SELECT product.*,trolley.qty AS trolley_qty FROM table_trolley trolley LEFT JOIN table_product product ON product.id=trolley.id_product WHERE trolley.id_user=${id_user};{"id_user":55}
DB:OK;SELECT store.*,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category LEFT JOIN table_store store ON store.id=category.id_store LEFT JOIN table_location_gps location ON location.id=store.id_location WHERE product.id=$1;"3"
[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"2"}]
{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.73263351596,"location_latitude":-6.23586043510775}
[ { "id": 5, "distance": 5000, "price": 5000 }, { "id": 4, "distance": 4000, "price": 4000 }, { "id": 3, "distance": 3000, "price": 3000 }, { "id": 2, "distance": 2000, "price": 2000 }, { "id": 1, "distance": 1000, "price": 1000 }, { "id": 6, "distance": 0, "price": 0 } ]
RESULT 200: {"trolley":[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"2"}],"store":{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.73263351596,"location_latitude":-6.23586043510775},"fee_delivery":[{"id":5,"distance":5000,"price":5000},{"id":4,"distance":4000,"price":4000},{"id":3,"distance":3000,"price":3000},{"id":2,"distance":2000,"price":2000},{"id":1,"distance":1000,"price":1000},{"id":6,"distance":0,"price":0}]}
[0mGET /api/trolley [32m200 [0m16.410 ms - 792[0m
API Cluster worker id: 2
REQUESTING PATH /location/history;GET;1477291275425
CHECKING API TOKEN dmYnFGBzili02FVCVlQ4t+E4AAYfNt+/mwcVkHn18YGTLHeduedfhhhykdtefE6TvyeuG47sP9QKHRTSPN/hiZxcfvI/uGj7r/mEBk6ZRto5nJzFooj2XaY7AluoRILxkyVd1mHHWzZ10lrb5j3JDv0G1cmy7traB/AP55YbLSkwOJWgEGnK6EhuWZrHO1fgzG5RYXlT6+1e38taqIU5/B4EvRoRZjYytCYxvazDsy25KIvj/HFVnlM3FOyinAS/qVb9Hc3+rUrxKsHl6by4fd+NzaBFaayT9tVMYT8rpO5jEpFMbw6OVtDlAqEEUtBFWTPuMD5ZE9lmhTC/1Qay5Q==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291174642,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291174642,"lang":2}; TAG START 1477291275425
TOKEN EXPIRED
PAGE NOT IN EXPIRED TOKEN
RESULT 403.
[0mGET /api/location/history [33m403 [0m12.101 ms - 2[0m
API Cluster worker id: 2
REQUESTING PATH /token/renew;POST;1477291275626
CHECKING API TOKEN dmYnFGBzili02FVCVlQ4t+E4AAYfNt+/mwcVkHn18YGTLHeduedfhhhykdtefE6TvyeuG47sP9QKHRTSPN/hiZxcfvI/uGj7r/mEBk6ZRto5nJzFooj2XaY7AluoRILxkyVd1mHHWzZ10lrb5j3JDv0G1cmy7traB/AP55YbLSkwOJWgEGnK6EhuWZrHO1fgzG5RYXlT6+1e38taqIU5/B4EvRoRZjYytCYxvazDsy25KIvj/HFVnlM3FOyinAS/qVb9Hc3+rUrxKsHl6by4fd+NzaBFaayT9tVMYT8rpO5jEpFMbw6OVtDlAqEEUtBFWTPuMD5ZE9lmhTC/1Qay5Q==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291174642,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291174642,"lang":2}; TAG START 1477291275626
TOKEN EXPIRED
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:POST;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_session
IS_ERR false
NO COOKIES
COOKIES NOT AVAILABLE
DB:OK;SELECT token_session FROM table_user WHERE id=$1;55
TOKEN SESSION 
vpj40c3kUpE7K5AUtGQYGHDkPNd0tzCNobMxBK6cL5tkTAej37qJysA4rAGU4LT1fdGyut6BFcG1H4eh7ZuXvvJcGuiwH2AGujUbL7o6LNPmsqQh95tJQaPf0exNOw/4KAq7492SM3oUsEUYzqNZcw9OaItwNjt/UgfG68YAvoNdqzdujzYGQqf+ZWvAlvptyhQvmgY+ISp2lg8r6SoxQpbBvRhZp5vRixdtK7XiCQUkoCwMcC09UEnUZvOAxlkGdKJDgnZmxnUdncd3PzfFv29ZE2Dfv7g3KURtaLXFUU9cjiLIL99i50/1lZ53SWo3YtggwT03jT+fEKr5HHAxdA==
vpj40c3kUpE7K5AUtGQYGHDkPNd0tzCNobMxBK6cL5tkTAej37qJysA4rAGU4LT1fdGyut6BFcG1H4eh7ZuXvvJcGuiwH2AGujUbL7o6LNPmsqQh95tJQaPf0exNOw/4KAq7492SM3oUsEUYzqNZcw9OaItwNjt/UgfG68YAvoNdqzdujzYGQqf+ZWvAlvptyhQvmgY+ISp2lg8r6SoxQpbBvRhZp5vRixdtK7XiCQUkoCwMcC09UEnUZvOAxlkGdKJDgnZmxnUdncd3PzfFv29ZE2Dfv7g3KURtaLXFUU9cjiLIL99i50/1lZ53SWo3YtggwT03jT+fEKr5HHAxdA==
CREATE TOKEN 1477291275626;30000
DB:OK;UPDATE table_user SET token_session=${token_session}, token_access=${token_access} WHERE id=${id_user} RETURNING token_session,token_access;{"token_access":"fejmLgHewIWrJNyqhkU8Le/Waye7m1ATYWSHzr5jfyLhfdt9GlbkycOSAifxL97i1+ttACSpcFflq+NxyWd8ugx8/gqTf3F32/46oVq9ilAbEZIjrxpHJ4ZtcsN9xFYJxwk6WX15jc7yRPth2vLTPmJFDx3gcYb0EWU8/cYGVrbuWPgr2Uc2jCwUZ6PlzTuPIY+f/PSPXQFsVlaTfHL7SB3Zi6L08ZXKMgbnetGl87j+7SBnrxdRpDRRvZb8W69yr19mcPrbVM8tI0yHazS6EVHc1cH6C3FT874fTi77pdnqwuwN6uuzsNCFXfKVJU7lp+09vLK+xirlEzwfytLKPw==","token_session":"Kf6Wwyzl4vHqhXcZnK2zZSdSRuwtBav77oJ5ihjLoRQ/E+HVtUKgPQExP75oDOSDuCYoDwsoJhRws7pN0VO3AsOBCiIYo5DoaKlZCzYDsJoYq6Km+9U5tyV9abW9pnWRul27d5byz9lh/edg3Ee5dpXIJqwymK5KSCIGJx7yiSFKgzH0CbPI86hfz7enPHA2EiOAqxY209EqIAar6dmsnIh0eBuNlqk8nwsgsW79GLpmSFfJV+7W6pXn6LLRozXsWnyZtj1YR/OEVrl+5h+jiasfBVlbV4GO3o14zb05jkT4hdLR/eLV1JVaemCR+T8OZ9isbFEN+8X3KKZY/cs42w==","id_user":55}
RESULT 200: {"token":{"token_access":"fejmLgHewIWrJNyqhkU8Le/Waye7m1ATYWSHzr5jfyLhfdt9GlbkycOSAifxL97i1+ttACSpcFflq+NxyWd8ugx8/gqTf3F32/46oVq9ilAbEZIjrxpHJ4ZtcsN9xFYJxwk6WX15jc7yRPth2vLTPmJFDx3gcYb0EWU8/cYGVrbuWPgr2Uc2jCwUZ6PlzTuPIY+f/PSPXQFsVlaTfHL7SB3Zi6L08ZXKMgbnetGl87j+7SBnrxdRpDRRvZb8W69yr19mcPrbVM8tI0yHazS6EVHc1cH6C3FT874fTi77pdnqwuwN6uuzsNCFXfKVJU7lp+09vLK+xirlEzwfytLKPw==","token_session":"Kf6Wwyzl4vHqhXcZnK2zZSdSRuwtBav77oJ5ihjLoRQ/E+HVtUKgPQExP75oDOSDuCYoDwsoJhRws7pN0VO3AsOBCiIYo5DoaKlZCzYDsJoYq6Km+9U5tyV9abW9pnWRul27d5byz9lh/edg3Ee5dpXIJqwymK5KSCIGJx7yiSFKgzH0CbPI86hfz7enPHA2EiOAqxY209EqIAar6dmsnIh0eBuNlqk8nwsgsW79GLpmSFfJV+7W6pXn6LLRozXsWnyZtj1YR/OEVrl+5h+jiasfBVlbV4GO3o14zb05jkT4hdLR/eLV1JVaemCR+T8OZ9isbFEN+8X3KKZY/cs42w=="}}
API END token renew /
[0mPOST /api/token/renew [32m200 [0m23.760 ms - 736[0m
API Cluster worker id: 2
REQUESTING PATH /token/update;POST;1477291275745
CHECKING API TOKEN dmYnFGBzili02FVCVlQ4t+E4AAYfNt+/mwcVkHn18YGTLHeduedfhhhykdtefE6TvyeuG47sP9QKHRTSPN/hiZxcfvI/uGj7r/mEBk6ZRto5nJzFooj2XaY7AluoRILxkyVd1mHHWzZ10lrb5j3JDv0G1cmy7traB/AP55YbLSkwOJWgEGnK6EhuWZrHO1fgzG5RYXlT6+1e38taqIU5/B4EvRoRZjYytCYxvazDsy25KIvj/HFVnlM3FOyinAS/qVb9Hc3+rUrxKsHl6by4fd+NzaBFaayT9tVMYT8rpO5jEpFMbw6OVtDlAqEEUtBFWTPuMD5ZE9lmhTC/1Qay5Q==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291174642,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291174642,"lang":2}; TAG START 1477291275745
TOKEN EXPIRED
PAGE NOT IN EXPIRED TOKEN
RESULT 403.
[0mPOST /api/token/update [33m403 [0m3.709 ms - 2[0m
API Cluster worker id: 2
REQUESTING PATH /location/history;GET;1477291275806
CHECKING API TOKEN fejmLgHewIWrJNyqhkU8Le/Waye7m1ATYWSHzr5jfyLhfdt9GlbkycOSAifxL97i1+ttACSpcFflq+NxyWd8ugx8/gqTf3F32/46oVq9ilAbEZIjrxpHJ4ZtcsN9xFYJxwk6WX15jc7yRPth2vLTPmJFDx3gcYb0EWU8/cYGVrbuWPgr2Uc2jCwUZ6PlzTuPIY+f/PSPXQFsVlaTfHL7SB3Zi6L08ZXKMgbnetGl87j+7SBnrxdRpDRRvZb8W69yr19mcPrbVM8tI0yHazS6EVHc1cH6C3FT874fTi77pdnqwuwN6uuzsNCFXfKVJU7lp+09vLK+xirlEzwfytLKPw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291305626,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291305626,"lang":2}; TAG START 1477291275806
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;SELECT location.*, ST_X(location.geom_location::geometry) AS longitude, ST_Y(location.geom_location::geometry) AS latitude FROM table_location_history history LEFT JOIN table_location_gps location ON location.id=history.id_location WHERE history.id_user=${id_user} ORDER BY history.id DESC LIMIT 10 OFFSET 0;{"id_user":55}
RESULT 200: {"location_history":[]}
[0mGET /api/location/history [32m200 [0m9.313 ms - 23[0m
API Cluster worker id: 2
REQUESTING PATH /token/renew;POST;1477291275826
CHECKING API TOKEN fejmLgHewIWrJNyqhkU8Le/Waye7m1ATYWSHzr5jfyLhfdt9GlbkycOSAifxL97i1+ttACSpcFflq+NxyWd8ugx8/gqTf3F32/46oVq9ilAbEZIjrxpHJ4ZtcsN9xFYJxwk6WX15jc7yRPth2vLTPmJFDx3gcYb0EWU8/cYGVrbuWPgr2Uc2jCwUZ6PlzTuPIY+f/PSPXQFsVlaTfHL7SB3Zi6L08ZXKMgbnetGl87j+7SBnrxdRpDRRvZb8W69yr19mcPrbVM8tI0yHazS6EVHc1cH6C3FT874fTi77pdnqwuwN6uuzsNCFXfKVJU7lp+09vLK+xirlEzwfytLKPw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291305626,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291305626,"lang":2}; TAG START 1477291275826
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:POST;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_session
IS_ERR false
NO COOKIES
COOKIES NOT AVAILABLE
DB:OK;SELECT token_session FROM table_user WHERE id=$1;55
TOKEN SESSION 
Kf6Wwyzl4vHqhXcZnK2zZSdSRuwtBav77oJ5ihjLoRQ/E+HVtUKgPQExP75oDOSDuCYoDwsoJhRws7pN0VO3AsOBCiIYo5DoaKlZCzYDsJoYq6Km+9U5tyV9abW9pnWRul27d5byz9lh/edg3Ee5dpXIJqwymK5KSCIGJx7yiSFKgzH0CbPI86hfz7enPHA2EiOAqxY209EqIAar6dmsnIh0eBuNlqk8nwsgsW79GLpmSFfJV+7W6pXn6LLRozXsWnyZtj1YR/OEVrl+5h+jiasfBVlbV4GO3o14zb05jkT4hdLR/eLV1JVaemCR+T8OZ9isbFEN+8X3KKZY/cs42w==
Kf6Wwyzl4vHqhXcZnK2zZSdSRuwtBav77oJ5ihjLoRQ/E+HVtUKgPQExP75oDOSDuCYoDwsoJhRws7pN0VO3AsOBCiIYo5DoaKlZCzYDsJoYq6Km+9U5tyV9abW9pnWRul27d5byz9lh/edg3Ee5dpXIJqwymK5KSCIGJx7yiSFKgzH0CbPI86hfz7enPHA2EiOAqxY209EqIAar6dmsnIh0eBuNlqk8nwsgsW79GLpmSFfJV+7W6pXn6LLRozXsWnyZtj1YR/OEVrl+5h+jiasfBVlbV4GO3o14zb05jkT4hdLR/eLV1JVaemCR+T8OZ9isbFEN+8X3KKZY/cs42w==
CREATE TOKEN 1477291275826;30000
DB:OK;UPDATE table_user SET token_session=${token_session}, token_access=${token_access} WHERE id=${id_user} RETURNING token_session,token_access;{"token_access":"oLcc5zN6H5PVG+HyE8a5zd/0JLek3p1swv9rluqwLW5VzgYjpwLlmyLn4zHdNhnKTBegR0kkRE29N+bA3t/pgrcEb7RdSlYWILHFJgYF5uNeKnQs2zEQ9G5eDc8xclhgtm0Wg0mKeW7fQvPhLOPl24BcYOpHY73l1ukGMXfoO79Y9AsDxLf1Sw0UoXyeXgItCBDG3xYx8Z/m/9CULzoWKLoWyRslcAHGK64dPpbCkAWnOKd0swDTvVZ7fgWh0VjRLwSHwzsvQ35EbxrsS1OwAtZ/AMSRbRPdChM/wgPqXXSoIimh4XObs+RrB2zHK54Xs/nZLTxTHwX6e5RkHwB3Gg==","token_session":"XkJJ5ur5K8xQETpBsShFmoaFX/+HMpOjRh/KIvUbkckLLIebRQwXcb63IcWOATcImkwpOzdsi8jvUCYQz4MZQ/Ql/XhGdaWebr/Yq9Zf0HDkLiK+MNzVtrUmSYH/j1AGfv+uuFyn85YeSwWML0t1rYWXi5uVmGFQ+ULwfGgE9vH0yjWvRojNyZ1aSYSueUh/lFbNAy1/afIKCygXfVgBwUlNJAC3+HKfsqfhyZrolkKwphl880T9AN/zktkHjU2WQ+yrSbGMlHpkSjn3BlQt+iZewJW/4jVGx8xR8ZEUKEJ3kVOR2lwW4uMql0RA7xypUjOU3CWGLHBvW2O0EQXqew==","id_user":55}
RESULT 200: {"token":{"token_access":"oLcc5zN6H5PVG+HyE8a5zd/0JLek3p1swv9rluqwLW5VzgYjpwLlmyLn4zHdNhnKTBegR0kkRE29N+bA3t/pgrcEb7RdSlYWILHFJgYF5uNeKnQs2zEQ9G5eDc8xclhgtm0Wg0mKeW7fQvPhLOPl24BcYOpHY73l1ukGMXfoO79Y9AsDxLf1Sw0UoXyeXgItCBDG3xYx8Z/m/9CULzoWKLoWyRslcAHGK64dPpbCkAWnOKd0swDTvVZ7fgWh0VjRLwSHwzsvQ35EbxrsS1OwAtZ/AMSRbRPdChM/wgPqXXSoIimh4XObs+RrB2zHK54Xs/nZLTxTHwX6e5RkHwB3Gg==","token_session":"XkJJ5ur5K8xQETpBsShFmoaFX/+HMpOjRh/KIvUbkckLLIebRQwXcb63IcWOATcImkwpOzdsi8jvUCYQz4MZQ/Ql/XhGdaWebr/Yq9Zf0HDkLiK+MNzVtrUmSYH/j1AGfv+uuFyn85YeSwWML0t1rYWXi5uVmGFQ+ULwfGgE9vH0yjWvRojNyZ1aSYSueUh/lFbNAy1/afIKCygXfVgBwUlNJAC3+HKfsqfhyZrolkKwphl880T9AN/zktkHjU2WQ+yrSbGMlHpkSjn3BlQt+iZewJW/4jVGx8xR8ZEUKEJ3kVOR2lwW4uMql0RA7xypUjOU3CWGLHBvW2O0EQXqew=="}}
API END token renew /
[0mPOST /api/token/renew [32m200 [0m18.072 ms - 736[0m
API Cluster worker id: 2
REQUESTING PATH /token/update;POST;1477291275985
CHECKING API TOKEN oLcc5zN6H5PVG+HyE8a5zd/0JLek3p1swv9rluqwLW5VzgYjpwLlmyLn4zHdNhnKTBegR0kkRE29N+bA3t/pgrcEb7RdSlYWILHFJgYF5uNeKnQs2zEQ9G5eDc8xclhgtm0Wg0mKeW7fQvPhLOPl24BcYOpHY73l1ukGMXfoO79Y9AsDxLf1Sw0UoXyeXgItCBDG3xYx8Z/m/9CULzoWKLoWyRslcAHGK64dPpbCkAWnOKd0swDTvVZ7fgWh0VjRLwSHwzsvQ35EbxrsS1OwAtZ/AMSRbRPdChM/wgPqXXSoIimh4XObs+RrB2zHK54Xs/nZLTxTHwX6e5RkHwB3Gg==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291305826,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291305826,"lang":2}; TAG START 1477291275985
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_fcm
CHECKING imsi
CHECKING longitude
CHECKING latitude
IS_ERR false
DB:OK;SELECT device.id_location,usr.id_device FROM table_user usr LEFT JOIN table_device device ON device.id=usr.id_device WHERE usr.id=${id_user};{"token_fcm":"-","imsi":"-","longitude":"106.67463395744562","latitude":"-6.299352685094847","id_user":55}
DB:OK;SELECT id_location,(random()/10)-(random()/10)+${longitude} AS random_longitude,(random()/10)-(random()/10)+${latitude} AS random_latitude FROM table_store;{"token_fcm":"-","imsi":"-","longitude":"106.67463395744562","latitude":"-6.299352685094847","id_user":55,"id_location":"162","id_device":"25"}
RESULT 200: {"data":[{"id_location":"10","random_longitude":106.719157028431,"random_latitude":-6.30084453957438},{"id_location":"20","random_longitude":106.722042751918,"random_latitude":-6.3462446617084},{"id_location":"30","random_longitude":106.710214890214,"random_latitude":-6.27115491629861},{"id_location":"40","random_longitude":106.664641886065,"random_latitude":-6.35121587152876},{"id_location":"50","random_longitude":106.694702100847,"random_latitude":-6.34585010480419},{"id_location":"60","random_longitude":106.669395054411,"random_latitude":-6.20932533006467},{"id_location":"70","random_longitude":106.6691428205,"random_latitude":-6.21753806202955},{"id_location":"80","random_longitude":106.679457736947,"random_latitude":-6.29408065873481},{"id_location":"90","random_longitude":106.675169114396,"random_latitude":-6.36577735726073},{"id_location":"100","random_longitude":106.679607666098,"random_latitude":-6.27801600043945}]}
[0mPOST /api/token/update [32m200 [0m16.503 ms - 938[0m
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.719157028431 -6.30084453957438)') WHERE id=${id_location};{"id_location":"10","random_longitude":106.719157028431,"random_latitude":-6.30084453957438}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.722042751918 -6.3462446617084)') WHERE id=${id_location};{"id_location":"20","random_longitude":106.722042751918,"random_latitude":-6.3462446617084}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.679457736947 -6.29408065873481)') WHERE id=${id_location};{"id_location":"80","random_longitude":106.679457736947,"random_latitude":-6.29408065873481}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.679607666098 -6.27801600043945)') WHERE id=${id_location};{"id_location":"100","random_longitude":106.679607666098,"random_latitude":-6.27801600043945}
DB:OK;UPDATE table_device SET token_fcm=${token_fcm}, imsi=${imsi} WHERE id=${id_device};{"token_fcm":"-","imsi":"-","longitude":"106.67463395744562","latitude":"-6.299352685094847","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.67463395744562 -6.299352685094847)') WHERE id=${id_location};{"token_fcm":"-","imsi":"-","longitude":"106.67463395744562","latitude":"-6.299352685094847","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.664641886065 -6.35121587152876)') WHERE id=${id_location};{"id_location":"40","random_longitude":106.664641886065,"random_latitude":-6.35121587152876}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.669395054411 -6.20932533006467)') WHERE id=${id_location};{"id_location":"60","random_longitude":106.669395054411,"random_latitude":-6.20932533006467}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.710214890214 -6.27115491629861)') WHERE id=${id_location};{"id_location":"30","random_longitude":106.710214890214,"random_latitude":-6.27115491629861}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.694702100847 -6.34585010480419)') WHERE id=${id_location};{"id_location":"50","random_longitude":106.694702100847,"random_latitude":-6.34585010480419}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.6691428205 -6.21753806202955)') WHERE id=${id_location};{"id_location":"70","random_longitude":106.6691428205,"random_latitude":-6.21753806202955}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.675169114396 -6.36577735726073)') WHERE id=${id_location};{"id_location":"90","random_longitude":106.675169114396,"random_latitude":-6.36577735726073}
API Cluster worker id: 2
REQUESTING PATH /store/nearby;GET;1477291276108
CHECKING API TOKEN oLcc5zN6H5PVG+HyE8a5zd/0JLek3p1swv9rluqwLW5VzgYjpwLlmyLn4zHdNhnKTBegR0kkRE29N+bA3t/pgrcEb7RdSlYWILHFJgYF5uNeKnQs2zEQ9G5eDc8xclhgtm0Wg0mKeW7fQvPhLOPl24BcYOpHY73l1ukGMXfoO79Y9AsDxLf1Sw0UoXyeXgItCBDG3xYx8Z/m/9CULzoWKLoWyRslcAHGK64dPpbCkAWnOKd0swDTvVZ7fgWh0VjRLwSHwzsvQ35EbxrsS1OwAtZ/AMSRbRPdChM/wgPqXXSoIimh4XObs+RrB2zHK54Xs/nZLTxTHwX6e5RkHwB3Gg==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291305826,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291305826,"lang":2}; TAG START 1477291276108
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING longitude
CHECKING latitude
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT store.*,rating.counted AS rating,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude,ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67463395744562 -6.299352685094847)')) AS distance_db,${distance} AS distance_max_meter 
		FROM table_store grouping
		LEFT JOIN table_store store ON store.id=grouping.id
		LEFT JOIN table_location_gps location ON location.id=store.id_location
		LEFT JOIN (SELECT AVG(rating) AS counted, id_store FROM table_store_rating GROUP BY id_store) rating ON rating.id_store=store.id
		WHERE ST_DWithin(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67463395744562 -6.299352685094847)'), ${distance})
		ORDER BY ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67463395744562 -6.299352685094847)')) ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		;{"longitude":"106.67463395744562","latitude":"-6.299352685094847","distance":"3000","page_go":0,"page_max":null,"id_user":55}
PAGINATION DATA: [{"no":"1","total":"2","id":"8","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 8","address":"Store Address 8","phone":"Store Phone 8","is_delete":false,"id_location":"80","id_schedule":"8","rating":null,"location_longitude":106.679457736947,"location_latitude":-6.29408065873481,"distance_db":790.453038926,"distance_max_meter":"3000","maxno":"2"},{"no":"2","total":"2","id":"10","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 10","address":"Store Address 10","phone":"Store Phone 10","is_delete":false,"id_location":"100","id_schedule":"10","rating":null,"location_longitude":106.679607666098,"location_latitude":-6.27801600043945,"distance_db":2422.907535765,"distance_max_meter":"3000","maxno":"2"}]
HALO {"store_nearby":[{"id":"8","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 8","address":"Store Address 8","phone":"Store Phone 8","is_delete":false,"id_location":"80","id_schedule":"8","rating":null,"location_longitude":106.679457736947,"location_latitude":-6.29408065873481,"distance_db":790.453038926,"distance_max_meter":"3000"},{"id":"10","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 10","address":"Store Address 10","phone":"Store Phone 10","is_delete":false,"id_location":"100","id_schedule":"10","rating":null,"location_longitude":106.679607666098,"location_latitude":-6.27801600043945,"distance_db":2422.907535765,"distance_max_meter":"3000"}],"pagination":{"page_go":"#"}}
ERR:null
DONE:{"status":200,"headers":{"content-type":"application/json; charset=UTF-8","date":"Mon, 24 Oct 2016 06:41:16 GMT","expires":"Tue, 25 Oct 2016 06:41:16 GMT","cache-control":"public, max-age=86400","server":"mafe","x-xss-protection":"1; mode=block","x-frame-options":"SAMEORIGIN","alt-svc":"quic=\":443\"; ma=2592000; v=\"36,35,34\"","accept-ranges":"none","vary":"Accept-Encoding","connection":"close"},"json":{"destination_addresses":["Jl. Anggrek Jingga I Blok Av No.18, Rw. Buntu, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia"],"origin_addresses":["Jl. Boulevard BSD Tim., Lengkong Gudang Tim., Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia","Jalan Kampung Perigi No.137, Lengkong Karya, Serpong Utara, Kota Tangerang Selatan, Banten 15310, Indonesia"],"rows":[{"elements":[{"distance":{"text":"4.8 km","value":4814},"duration":{"text":"11 mins","value":674},"status":"OK"}]},{"elements":[{"distance":{"text":"6.0 km","value":5958},"duration":{"text":"18 mins","value":1078},"status":"OK"}]}],"status":"OK"}}
ELEMENTS:[{"distance":{"text":"4.8 km","value":4814},"duration":{"text":"11 mins","value":674},"status":"OK"}]
RESULT 200: {"store_nearby":[{"id":"8","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 8","address":"Store Address 8","phone":"Store Phone 8","is_delete":false,"id_location":"80","id_schedule":"8","rating":null,"location_longitude":106.679457736947,"location_latitude":-6.29408065873481,"distance_db":790.453038926,"distance_max_meter":"3000","distance_google":4814},{"id":"10","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 10","address":"Store Address 10","phone":"Store Phone 10","is_delete":false,"id_location":"100","id_schedule":"10","rating":null,"location_longitude":106.679607666098,"location_latitude":-6.27801600043945,"distance_db":2422.907535765,"distance_max_meter":"3000","distance_google":5958}],"pagination":{"page_go":"#"}}
[0mGET /api/store/nearby?longitude=106.67463395744562&latitude=-6.299352685094847 [32m200 [0m77.065 ms - 754[0m
API Cluster worker id: 2
REQUESTING PATH /token/update;POST;1477291278061
CHECKING API TOKEN oLcc5zN6H5PVG+HyE8a5zd/0JLek3p1swv9rluqwLW5VzgYjpwLlmyLn4zHdNhnKTBegR0kkRE29N+bA3t/pgrcEb7RdSlYWILHFJgYF5uNeKnQs2zEQ9G5eDc8xclhgtm0Wg0mKeW7fQvPhLOPl24BcYOpHY73l1ukGMXfoO79Y9AsDxLf1Sw0UoXyeXgItCBDG3xYx8Z/m/9CULzoWKLoWyRslcAHGK64dPpbCkAWnOKd0swDTvVZ7fgWh0VjRLwSHwzsvQ35EbxrsS1OwAtZ/AMSRbRPdChM/wgPqXXSoIimh4XObs+RrB2zHK54Xs/nZLTxTHwX6e5RkHwB3Gg==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291305826,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291305826,"lang":2}; TAG START 1477291278061
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_fcm
CHECKING imsi
CHECKING longitude
CHECKING latitude
IS_ERR false
DB:OK;SELECT device.id_location,usr.id_device FROM table_user usr LEFT JOIN table_device device ON device.id=usr.id_device WHERE usr.id=${id_user};{"token_fcm":"-","imsi":"-","longitude":"106.67957525700331","latitude":"-6.317103704625768","id_user":55}
DB:OK;SELECT id_location,(random()/10)-(random()/10)+${longitude} AS random_longitude,(random()/10)-(random()/10)+${latitude} AS random_latitude FROM table_store;{"token_fcm":"-","imsi":"-","longitude":"106.67957525700331","latitude":"-6.317103704625768","id_user":55,"id_location":"162","id_device":"25"}
RESULT 200: {"data":[{"id_location":"10","random_longitude":106.619388847146,"random_latitude":-6.27496483554321},{"id_location":"20","random_longitude":106.606572082499,"random_latitude":-6.29116974342803},{"id_location":"30","random_longitude":106.665270064306,"random_latitude":-6.32290255897867},{"id_location":"40","random_longitude":106.692795746122,"random_latitude":-6.29020302524048},{"id_location":"50","random_longitude":106.681012504036,"random_latitude":-6.32681585923026},{"id_location":"60","random_longitude":106.698115678923,"random_latitude":-6.31422751313264},{"id_location":"70","random_longitude":106.623987306654,"random_latitude":-6.30533863315548},{"id_location":"80","random_longitude":106.679159088014,"random_latitude":-6.32056207880567},{"id_location":"90","random_longitude":106.680592758302,"random_latitude":-6.282960027691},{"id_location":"100","random_longitude":106.731541254511,"random_latitude":-6.28191836774538}]}
[0mPOST /api/token/update [32m200 [0m12.374 ms - 939[0m
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.619388847146 -6.27496483554321)') WHERE id=${id_location};{"id_location":"10","random_longitude":106.619388847146,"random_latitude":-6.27496483554321}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.606572082499 -6.29116974342803)') WHERE id=${id_location};{"id_location":"20","random_longitude":106.606572082499,"random_latitude":-6.29116974342803}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.665270064306 -6.32290255897867)') WHERE id=${id_location};{"id_location":"30","random_longitude":106.665270064306,"random_latitude":-6.32290255897867}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.692795746122 -6.29020302524048)') WHERE id=${id_location};{"id_location":"40","random_longitude":106.692795746122,"random_latitude":-6.29020302524048}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.698115678923 -6.31422751313264)') WHERE id=${id_location};{"id_location":"60","random_longitude":106.698115678923,"random_latitude":-6.31422751313264}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.681012504036 -6.32681585923026)') WHERE id=${id_location};{"id_location":"50","random_longitude":106.681012504036,"random_latitude":-6.32681585923026}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.623987306654 -6.30533863315548)') WHERE id=${id_location};{"id_location":"70","random_longitude":106.623987306654,"random_latitude":-6.30533863315548}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.679159088014 -6.32056207880567)') WHERE id=${id_location};{"id_location":"80","random_longitude":106.679159088014,"random_latitude":-6.32056207880567}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.680592758302 -6.282960027691)') WHERE id=${id_location};{"id_location":"90","random_longitude":106.680592758302,"random_latitude":-6.282960027691}
DB:OK;UPDATE table_device SET token_fcm=${token_fcm}, imsi=${imsi} WHERE id=${id_device};{"token_fcm":"-","imsi":"-","longitude":"106.67957525700331","latitude":"-6.317103704625768","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)') WHERE id=${id_location};{"token_fcm":"-","imsi":"-","longitude":"106.67957525700331","latitude":"-6.317103704625768","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.731541254511 -6.28191836774538)') WHERE id=${id_location};{"id_location":"100","random_longitude":106.731541254511,"random_latitude":-6.28191836774538}
API Cluster worker id: 2
REQUESTING PATH /store/nearby;GET;1477291278126
CHECKING API TOKEN oLcc5zN6H5PVG+HyE8a5zd/0JLek3p1swv9rluqwLW5VzgYjpwLlmyLn4zHdNhnKTBegR0kkRE29N+bA3t/pgrcEb7RdSlYWILHFJgYF5uNeKnQs2zEQ9G5eDc8xclhgtm0Wg0mKeW7fQvPhLOPl24BcYOpHY73l1ukGMXfoO79Y9AsDxLf1Sw0UoXyeXgItCBDG3xYx8Z/m/9CULzoWKLoWyRslcAHGK64dPpbCkAWnOKd0swDTvVZ7fgWh0VjRLwSHwzsvQ35EbxrsS1OwAtZ/AMSRbRPdChM/wgPqXXSoIimh4XObs+RrB2zHK54Xs/nZLTxTHwX6e5RkHwB3Gg==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291305826,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291305826,"lang":2}; TAG START 1477291278126
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING longitude
CHECKING latitude
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT store.*,rating.counted AS rating,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude,ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)')) AS distance_db,${distance} AS distance_max_meter 
		FROM table_store grouping
		LEFT JOIN table_store store ON store.id=grouping.id
		LEFT JOIN table_location_gps location ON location.id=store.id_location
		LEFT JOIN (SELECT AVG(rating) AS counted, id_store FROM table_store_rating GROUP BY id_store) rating ON rating.id_store=store.id
		WHERE ST_DWithin(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)'), ${distance})
		ORDER BY ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)')) ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		;{"longitude":"106.67957525700331","latitude":"-6.317103704625768","distance":"3000","page_go":0,"page_max":null,"id_user":55}
PAGINATION DATA: [{"no":"1","total":"4","id":"8","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 8","address":"Store Address 8","phone":"Store Phone 8","is_delete":false,"id_location":"80","id_schedule":"8","rating":null,"location_longitude":106.679159088014,"location_latitude":-6.32056207880567,"distance_db":385.215906433,"distance_max_meter":"3000","maxno":"4"},{"no":"2","total":"4","id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","rating":null,"location_longitude":106.681012504036,"location_latitude":-6.32681585923026,"distance_db":1085.754477142,"distance_max_meter":"3000","maxno":"4"},{"no":"3","total":"4","id":"3","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 3","address":"Store Address 3","phone":"Store Phone 3","is_delete":false,"id_location":"30","id_schedule":"3","rating":null,"location_longitude":106.665270064306,"location_latitude":-6.32290255897867,"distance_db":1707.806525307,"distance_max_meter":"3000","maxno":"4"},{"no":"4","total":"4","id":"6","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 6","address":"Store Address 6","phone":"Store Phone 6","is_delete":false,"id_location":"60","id_schedule":"6","rating":null,"location_longitude":106.698115678923,"location_latitude":-6.31422751313264,"distance_db":2075.97876698,"distance_max_meter":"3000","maxno":"4"}]
HALO {"store_nearby":[{"id":"8","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 8","address":"Store Address 8","phone":"Store Phone 8","is_delete":false,"id_location":"80","id_schedule":"8","rating":null,"location_longitude":106.679159088014,"location_latitude":-6.32056207880567,"distance_db":385.215906433,"distance_max_meter":"3000"},{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","rating":null,"location_longitude":106.681012504036,"location_latitude":-6.32681585923026,"distance_db":1085.754477142,"distance_max_meter":"3000"},{"id":"3","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 3","address":"Store Address 3","phone":"Store Phone 3","is_delete":false,"id_location":"30","id_schedule":"3","rating":null,"location_longitude":106.665270064306,"location_latitude":-6.32290255897867,"distance_db":1707.806525307,"distance_max_meter":"3000"},{"id":"6","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 6","address":"Store Address 6","phone":"Store Phone 6","is_delete":false,"id_location":"60","id_schedule":"6","rating":null,"location_longitude":106.698115678923,"location_latitude":-6.31422751313264,"distance_db":2075.97876698,"distance_max_meter":"3000"}],"pagination":{"page_go":"#"}}
ERR:null
DONE:{"status":200,"headers":{"content-type":"application/json; charset=UTF-8","date":"Mon, 24 Oct 2016 06:41:18 GMT","expires":"Tue, 25 Oct 2016 06:41:18 GMT","cache-control":"public, max-age=86400","server":"mafe","x-xss-protection":"1; mode=block","x-frame-options":"SAMEORIGIN","alt-svc":"quic=\":443\"; ma=2592000; v=\"36,35,34\"","accept-ranges":"none","vary":"Accept-Encoding","connection":"close"},"json":{"destination_addresses":["Jl. Raya Rawa Buntu No.1, Rw. Buntu, Serpong, Kota Tangerang Selatan, Banten 15318, Indonesia"],"origin_addresses":["Jl. Cicentang, Rw. Buntu, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia","Jl. Cendekia, Ciater, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia","Jl. Nn No.165, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia","Jl. Ciater Raya Blok Rj No.7, Rw. Mekar Jaya, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia"],"rows":[{"elements":[{"distance":{"text":"0.7 km","value":724},"duration":{"text":"3 mins","value":150},"status":"OK"}]},{"elements":[{"distance":{"text":"1.8 km","value":1771},"duration":{"text":"5 mins","value":285},"status":"OK"}]},{"elements":[{"distance":{"text":"4.3 km","value":4252},"duration":{"text":"10 mins","value":594},"status":"OK"}]},{"elements":[{"distance":{"text":"3.3 km","value":3255},"duration":{"text":"9 mins","value":552},"status":"OK"}]}],"status":"OK"}}
ELEMENTS:[{"distance":{"text":"0.7 km","value":724},"duration":{"text":"3 mins","value":150},"status":"OK"}]
RESULT 200: {"store_nearby":[{"id":"8","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 8","address":"Store Address 8","phone":"Store Phone 8","is_delete":false,"id_location":"80","id_schedule":"8","rating":null,"location_longitude":106.679159088014,"location_latitude":-6.32056207880567,"distance_db":385.215906433,"distance_max_meter":"3000","distance_google":724},{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","rating":null,"location_longitude":106.681012504036,"location_latitude":-6.32681585923026,"distance_db":1085.754477142,"distance_max_meter":"3000","distance_google":1771},{"id":"6","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 6","address":"Store Address 6","phone":"Store Phone 6","is_delete":false,"id_location":"60","id_schedule":"6","rating":null,"location_longitude":106.698115678923,"location_latitude":-6.31422751313264,"distance_db":2075.97876698,"distance_max_meter":"3000","distance_google":3255},{"id":"3","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 3","address":"Store Address 3","phone":"Store Phone 3","is_delete":false,"id_location":"30","id_schedule":"3","rating":null,"location_longitude":106.665270064306,"location_latitude":-6.32290255897867,"distance_db":1707.806525307,"distance_max_meter":"3000","distance_google":4252}],"pagination":{"page_go":"#"}}
[0mGET /api/store/nearby?longitude=106.67957525700331&latitude=-6.317103704625768 [32m200 [0m142.807 ms - 1448[0m
API Cluster worker id: 2
REQUESTING PATH /trolley;GET;1477291278603
CHECKING API TOKEN oLcc5zN6H5PVG+HyE8a5zd/0JLek3p1swv9rluqwLW5VzgYjpwLlmyLn4zHdNhnKTBegR0kkRE29N+bA3t/pgrcEb7RdSlYWILHFJgYF5uNeKnQs2zEQ9G5eDc8xclhgtm0Wg0mKeW7fQvPhLOPl24BcYOpHY73l1ukGMXfoO79Y9AsDxLf1Sw0UoXyeXgItCBDG3xYx8Z/m/9CULzoWKLoWyRslcAHGK64dPpbCkAWnOKd0swDTvVZ7fgWh0VjRLwSHwzsvQ35EbxrsS1OwAtZ/AMSRbRPdChM/wgPqXXSoIimh4XObs+RrB2zHK54Xs/nZLTxTHwX6e5RkHwB3Gg==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291305826,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291305826,"lang":2}; TAG START 1477291278603
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;SELECT product.*,trolley.qty AS trolley_qty FROM table_trolley trolley LEFT JOIN table_product product ON product.id=trolley.id_product WHERE trolley.id_user=${id_user};{"id_user":55}
DB:OK;SELECT store.*,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category LEFT JOIN table_store store ON store.id=category.id_store LEFT JOIN table_location_gps location ON location.id=store.id_location WHERE product.id=$1;"3"
[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"2"}]
{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.681012504036,"location_latitude":-6.32681585923026}
[ { "id": 5, "distance": 5000, "price": 5000 }, { "id": 4, "distance": 4000, "price": 4000 }, { "id": 3, "distance": 3000, "price": 3000 }, { "id": 2, "distance": 2000, "price": 2000 }, { "id": 1, "distance": 1000, "price": 1000 }, { "id": 6, "distance": 0, "price": 0 } ]
RESULT 200: {"trolley":[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"2"}],"store":{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.681012504036,"location_latitude":-6.32681585923026},"fee_delivery":[{"id":5,"distance":5000,"price":5000},{"id":4,"distance":4000,"price":4000},{"id":3,"distance":3000,"price":3000},{"id":2,"distance":2000,"price":2000},{"id":1,"distance":1000,"price":1000},{"id":6,"distance":0,"price":0}]}
[0mGET /api/trolley [32m200 [0m13.541 ms - 793[0m
API Cluster worker id: 2
REQUESTING PATH /store/5/product;GET;1477291302841
CHECKING API TOKEN oLcc5zN6H5PVG+HyE8a5zd/0JLek3p1swv9rluqwLW5VzgYjpwLlmyLn4zHdNhnKTBegR0kkRE29N+bA3t/pgrcEb7RdSlYWILHFJgYF5uNeKnQs2zEQ9G5eDc8xclhgtm0Wg0mKeW7fQvPhLOPl24BcYOpHY73l1ukGMXfoO79Y9AsDxLf1Sw0UoXyeXgItCBDG3xYx8Z/m/9CULzoWKLoWyRslcAHGK64dPpbCkAWnOKd0swDTvVZ7fgWh0VjRLwSHwzsvQ35EbxrsS1OwAtZ/AMSRbRPdChM/wgPqXXSoIimh4XObs+RrB2zHK54Xs/nZLTxTHwX6e5RkHwB3Gg==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291305826,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291305826,"lang":2}; TAG START 1477291302841
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
product query 
Full text search 
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT product.*,trolley.qty AS trolley_qty 
		FROM table_product_category category
		LEFT JOIN table_product product ON product.id_category=category.id
		LEFT JOIN (SELECT * FROM table_trolley WHERE id_user=55) trolley ON trolley.id_product=product.id
		WHERE category.id_store=5  
		ORDER BY product.id ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		LIMIT ${page_max} OFFSET 0;{"search":"","page_go":0,"page_max":25,"id_user":55}
PAGINATION DATA: [{"no":"1","total":"10","id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"2","maxno":"10"},{"no":"2","total":"10","id":"20","id_category":"41","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"41","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null,"maxno":"10"},{"no":"3","total":"10","id":"21","id_category":"42","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"42","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null,"maxno":"10"},{"no":"4","total":"10","id":"35","id_category":"43","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"43","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null,"maxno":"10"},{"no":"5","total":"10","id":"43","id_category":"44","name":"Cat Nippon Paint","description":"Cat Nippon Paint","time_create":"2016-10-23T08:04:04.112Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat1.png","price":"44","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null,"maxno":"10"},{"no":"6","total":"10","id":"59","id_category":"45","name":"Cat Catylac","description":"Cat Catylac","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat2.png","price":"45","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null,"maxno":"10"},{"no":"7","total":"10","id":"62","id_category":"46","name":"Sink Elite","description":"Sink Elite","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink1.jpg","price":"46","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null,"maxno":"10"},{"no":"8","total":"10","id":"80","id_category":"47","name":"Sink American Standard","description":"Sink American Standard","time_create":"2016-10-23T08:04:04.114Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink2.jpg","price":"47","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null,"maxno":"10"},{"no":"9","total":"10","id":"88","id_category":"48","name":"Bata Merah","description":"Bata Merah","time_create":"2016-10-23T08:04:04.115Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata1.jpg","price":"48","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null,"maxno":"10"},{"no":"10","total":"10","id":"93","id_category":"49","name":"Bata Ringan","description":"Bata Ringan","time_create":"2016-10-23T08:04:04.116Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata2.jpg","price":"49","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null,"maxno":"10"}]
TERIMA DATA {"products":[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"2"},{"id":"20","id_category":"41","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"41","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null},{"id":"21","id_category":"42","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"42","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"35","id_category":"43","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"43","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"43","id_category":"44","name":"Cat Nippon Paint","description":"Cat Nippon Paint","time_create":"2016-10-23T08:04:04.112Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat1.png","price":"44","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"59","id_category":"45","name":"Cat Catylac","description":"Cat Catylac","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat2.png","price":"45","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"62","id_category":"46","name":"Sink Elite","description":"Sink Elite","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink1.jpg","price":"46","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"80","id_category":"47","name":"Sink American Standard","description":"Sink American Standard","time_create":"2016-10-23T08:04:04.114Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink2.jpg","price":"47","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"88","id_category":"48","name":"Bata Merah","description":"Bata Merah","time_create":"2016-10-23T08:04:04.115Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata1.jpg","price":"48","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null},{"id":"93","id_category":"49","name":"Bata Ringan","description":"Bata Ringan","time_create":"2016-10-23T08:04:04.116Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata2.jpg","price":"49","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null}],"pagination":{"page_go":"#"}}
RESULT 200: {"products":[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"2"},{"id":"20","id_category":"41","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"41","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null},{"id":"21","id_category":"42","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"42","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"35","id_category":"43","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"43","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"43","id_category":"44","name":"Cat Nippon Paint","description":"Cat Nippon Paint","time_create":"2016-10-23T08:04:04.112Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat1.png","price":"44","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"59","id_category":"45","name":"Cat Catylac","description":"Cat Catylac","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat2.png","price":"45","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"62","id_category":"46","name":"Sink Elite","description":"Sink Elite","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink1.jpg","price":"46","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"80","id_category":"47","name":"Sink American Standard","description":"Sink American Standard","time_create":"2016-10-23T08:04:04.114Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink2.jpg","price":"47","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"88","id_category":"48","name":"Bata Merah","description":"Bata Merah","time_create":"2016-10-23T08:04:04.115Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata1.jpg","price":"48","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null},{"id":"93","id_category":"49","name":"Bata Ringan","description":"Bata Ringan","time_create":"2016-10-23T08:04:04.116Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata2.jpg","price":"49","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null}],"pagination":{"page_go":"#"}}
[0mGET /api/store/5/product?search= [32m200 [0m11.866 ms - 2944[0m
API Cluster worker id: 2
REQUESTING PATH /trolley;GET;1477291306560
CHECKING API TOKEN oLcc5zN6H5PVG+HyE8a5zd/0JLek3p1swv9rluqwLW5VzgYjpwLlmyLn4zHdNhnKTBegR0kkRE29N+bA3t/pgrcEb7RdSlYWILHFJgYF5uNeKnQs2zEQ9G5eDc8xclhgtm0Wg0mKeW7fQvPhLOPl24BcYOpHY73l1ukGMXfoO79Y9AsDxLf1Sw0UoXyeXgItCBDG3xYx8Z/m/9CULzoWKLoWyRslcAHGK64dPpbCkAWnOKd0swDTvVZ7fgWh0VjRLwSHwzsvQ35EbxrsS1OwAtZ/AMSRbRPdChM/wgPqXXSoIimh4XObs+RrB2zHK54Xs/nZLTxTHwX6e5RkHwB3Gg==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291305826,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291305826,"lang":2}; TAG START 1477291306560
TOKEN EXPIRED
PAGE NOT IN EXPIRED TOKEN
RESULT 403.
[0mGET /api/trolley [33m403 [0m4.514 ms - 2[0m
API Cluster worker id: 2
REQUESTING PATH /token/renew;POST;1477291306676
CHECKING API TOKEN oLcc5zN6H5PVG+HyE8a5zd/0JLek3p1swv9rluqwLW5VzgYjpwLlmyLn4zHdNhnKTBegR0kkRE29N+bA3t/pgrcEb7RdSlYWILHFJgYF5uNeKnQs2zEQ9G5eDc8xclhgtm0Wg0mKeW7fQvPhLOPl24BcYOpHY73l1ukGMXfoO79Y9AsDxLf1Sw0UoXyeXgItCBDG3xYx8Z/m/9CULzoWKLoWyRslcAHGK64dPpbCkAWnOKd0swDTvVZ7fgWh0VjRLwSHwzsvQ35EbxrsS1OwAtZ/AMSRbRPdChM/wgPqXXSoIimh4XObs+RrB2zHK54Xs/nZLTxTHwX6e5RkHwB3Gg==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291305826,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291305826,"lang":2}; TAG START 1477291306676
TOKEN EXPIRED
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:POST;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_session
IS_ERR false
NO COOKIES
COOKIES NOT AVAILABLE
DB:OK;SELECT token_session FROM table_user WHERE id=$1;55
TOKEN SESSION 
XkJJ5ur5K8xQETpBsShFmoaFX/+HMpOjRh/KIvUbkckLLIebRQwXcb63IcWOATcImkwpOzdsi8jvUCYQz4MZQ/Ql/XhGdaWebr/Yq9Zf0HDkLiK+MNzVtrUmSYH/j1AGfv+uuFyn85YeSwWML0t1rYWXi5uVmGFQ+ULwfGgE9vH0yjWvRojNyZ1aSYSueUh/lFbNAy1/afIKCygXfVgBwUlNJAC3+HKfsqfhyZrolkKwphl880T9AN/zktkHjU2WQ+yrSbGMlHpkSjn3BlQt+iZewJW/4jVGx8xR8ZEUKEJ3kVOR2lwW4uMql0RA7xypUjOU3CWGLHBvW2O0EQXqew==
XkJJ5ur5K8xQETpBsShFmoaFX/+HMpOjRh/KIvUbkckLLIebRQwXcb63IcWOATcImkwpOzdsi8jvUCYQz4MZQ/Ql/XhGdaWebr/Yq9Zf0HDkLiK+MNzVtrUmSYH/j1AGfv+uuFyn85YeSwWML0t1rYWXi5uVmGFQ+ULwfGgE9vH0yjWvRojNyZ1aSYSueUh/lFbNAy1/afIKCygXfVgBwUlNJAC3+HKfsqfhyZrolkKwphl880T9AN/zktkHjU2WQ+yrSbGMlHpkSjn3BlQt+iZewJW/4jVGx8xR8ZEUKEJ3kVOR2lwW4uMql0RA7xypUjOU3CWGLHBvW2O0EQXqew==
CREATE TOKEN 1477291306676;30000
DB:OK;UPDATE table_user SET token_session=${token_session}, token_access=${token_access} WHERE id=${id_user} RETURNING token_session,token_access;{"token_access":"YKlFi4c6qPJiuDQ89D0/K404+M1GNlW7fWAl/MqQO3IlHQToibWMeF0ymVwNtdKfAg6FazKJMZ4U+reb5vHJMwvNZbDJ6/sx9uIMKHkewTqpl2NoGVipd2UBAL97AWlfPt5JuYUMNy7jtQPXlaf7+tIkviYWcn+7N8RCMJ4VcHXzfZqr48Z0fdNN8q6Y5nrpwdlCEbb6129+HxIFqpeKOcUrfHKGZKZJYcjVfUw4QKFAquwrtKI2fYt1fQulbNy3/GfUpBk+EmBPqJE26MNyci/KRP34zrCr+HN3O9+tcHt+33SFAMDw2zutUAkjUVek00c89oUXRYjwQgOySBXPhQ==","token_session":"A5aW+EVh+2G9dQYQUqDnOwdYeQi0ehsxnVTK7sryQtB2CKyd2ci56eXq/97HiPoL1mb2cWgU98sCGsmmFJS7S4S9rFDtl8LrDZRQfwbSIIgQQNZfNIHfvHfhYJZrDmRMwJ6t5msq4QTYnntn8pbmAe5C+uhaznZkTyXipHXpJlfij3vh54h9/zVvedlcSZ9Q4LtHnL9DCcjCIHw4dQJOLz0BLAd//ViryGlAVaa+7EXOobQH+TxrAA7UpdYautySHg+ZtMlxs+wT7goumwSzChIOD1X41ABRbuouChU7cTLhKWTW1rsNRmZ8yjpyyks4SCmStG6IXga75oVeYUA0vg==","id_user":55}
RESULT 200: {"token":{"token_access":"YKlFi4c6qPJiuDQ89D0/K404+M1GNlW7fWAl/MqQO3IlHQToibWMeF0ymVwNtdKfAg6FazKJMZ4U+reb5vHJMwvNZbDJ6/sx9uIMKHkewTqpl2NoGVipd2UBAL97AWlfPt5JuYUMNy7jtQPXlaf7+tIkviYWcn+7N8RCMJ4VcHXzfZqr48Z0fdNN8q6Y5nrpwdlCEbb6129+HxIFqpeKOcUrfHKGZKZJYcjVfUw4QKFAquwrtKI2fYt1fQulbNy3/GfUpBk+EmBPqJE26MNyci/KRP34zrCr+HN3O9+tcHt+33SFAMDw2zutUAkjUVek00c89oUXRYjwQgOySBXPhQ==","token_session":"A5aW+EVh+2G9dQYQUqDnOwdYeQi0ehsxnVTK7sryQtB2CKyd2ci56eXq/97HiPoL1mb2cWgU98sCGsmmFJS7S4S9rFDtl8LrDZRQfwbSIIgQQNZfNIHfvHfhYJZrDmRMwJ6t5msq4QTYnntn8pbmAe5C+uhaznZkTyXipHXpJlfij3vh54h9/zVvedlcSZ9Q4LtHnL9DCcjCIHw4dQJOLz0BLAd//ViryGlAVaa+7EXOobQH+TxrAA7UpdYautySHg+ZtMlxs+wT7goumwSzChIOD1X41ABRbuouChU7cTLhKWTW1rsNRmZ8yjpyyks4SCmStG6IXga75oVeYUA0vg=="}}
API END token renew /
[0mPOST /api/token/renew [32m200 [0m26.121 ms - 736[0m
API Cluster worker id: 2
REQUESTING PATH /trolley;GET;1477291306861
CHECKING API TOKEN YKlFi4c6qPJiuDQ89D0/K404+M1GNlW7fWAl/MqQO3IlHQToibWMeF0ymVwNtdKfAg6FazKJMZ4U+reb5vHJMwvNZbDJ6/sx9uIMKHkewTqpl2NoGVipd2UBAL97AWlfPt5JuYUMNy7jtQPXlaf7+tIkviYWcn+7N8RCMJ4VcHXzfZqr48Z0fdNN8q6Y5nrpwdlCEbb6129+HxIFqpeKOcUrfHKGZKZJYcjVfUw4QKFAquwrtKI2fYt1fQulbNy3/GfUpBk+EmBPqJE26MNyci/KRP34zrCr+HN3O9+tcHt+33SFAMDw2zutUAkjUVek00c89oUXRYjwQgOySBXPhQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291336676,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291336676,"lang":2}; TAG START 1477291306861
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;SELECT product.*,trolley.qty AS trolley_qty FROM table_trolley trolley LEFT JOIN table_product product ON product.id=trolley.id_product WHERE trolley.id_user=${id_user};{"id_user":55}
DB:OK;SELECT store.*,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category LEFT JOIN table_store store ON store.id=category.id_store LEFT JOIN table_location_gps location ON location.id=store.id_location WHERE product.id=$1;"3"
[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"2"}]
{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.681012504036,"location_latitude":-6.32681585923026}
[ { "id": 5, "distance": 5000, "price": 5000 }, { "id": 4, "distance": 4000, "price": 4000 }, { "id": 3, "distance": 3000, "price": 3000 }, { "id": 2, "distance": 2000, "price": 2000 }, { "id": 1, "distance": 1000, "price": 1000 }, { "id": 6, "distance": 0, "price": 0 } ]
RESULT 200: {"trolley":[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"2"}],"store":{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.681012504036,"location_latitude":-6.32681585923026},"fee_delivery":[{"id":5,"distance":5000,"price":5000},{"id":4,"distance":4000,"price":4000},{"id":3,"distance":3000,"price":3000},{"id":2,"distance":2000,"price":2000},{"id":1,"distance":1000,"price":1000},{"id":6,"distance":0,"price":0}]}
[0mGET /api/trolley [32m200 [0m12.672 ms - 793[0m
API Cluster worker id: 2
REQUESTING PATH /trolley;GET;1477291310360
CHECKING API TOKEN YKlFi4c6qPJiuDQ89D0/K404+M1GNlW7fWAl/MqQO3IlHQToibWMeF0ymVwNtdKfAg6FazKJMZ4U+reb5vHJMwvNZbDJ6/sx9uIMKHkewTqpl2NoGVipd2UBAL97AWlfPt5JuYUMNy7jtQPXlaf7+tIkviYWcn+7N8RCMJ4VcHXzfZqr48Z0fdNN8q6Y5nrpwdlCEbb6129+HxIFqpeKOcUrfHKGZKZJYcjVfUw4QKFAquwrtKI2fYt1fQulbNy3/GfUpBk+EmBPqJE26MNyci/KRP34zrCr+HN3O9+tcHt+33SFAMDw2zutUAkjUVek00c89oUXRYjwQgOySBXPhQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291336676,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291336676,"lang":2}; TAG START 1477291310360
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;SELECT product.*,trolley.qty AS trolley_qty FROM table_trolley trolley LEFT JOIN table_product product ON product.id=trolley.id_product WHERE trolley.id_user=${id_user};{"id_user":55}
DB:OK;SELECT store.*,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category LEFT JOIN table_store store ON store.id=category.id_store LEFT JOIN table_location_gps location ON location.id=store.id_location WHERE product.id=$1;"3"
[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"2"}]
{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.681012504036,"location_latitude":-6.32681585923026}
[ { "id": 5, "distance": 5000, "price": 5000 }, { "id": 4, "distance": 4000, "price": 4000 }, { "id": 3, "distance": 3000, "price": 3000 }, { "id": 2, "distance": 2000, "price": 2000 }, { "id": 1, "distance": 1000, "price": 1000 }, { "id": 6, "distance": 0, "price": 0 } ]
RESULT 200: {"trolley":[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"2"}],"store":{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.681012504036,"location_latitude":-6.32681585923026},"fee_delivery":[{"id":5,"distance":5000,"price":5000},{"id":4,"distance":4000,"price":4000},{"id":3,"distance":3000,"price":3000},{"id":2,"distance":2000,"price":2000},{"id":1,"distance":1000,"price":1000},{"id":6,"distance":0,"price":0}]}
[0mGET /api/trolley [32m200 [0m12.127 ms - 793[0m
API Cluster worker id: 2
REQUESTING PATH /store/5/product;GET;1477291312321
CHECKING API TOKEN YKlFi4c6qPJiuDQ89D0/K404+M1GNlW7fWAl/MqQO3IlHQToibWMeF0ymVwNtdKfAg6FazKJMZ4U+reb5vHJMwvNZbDJ6/sx9uIMKHkewTqpl2NoGVipd2UBAL97AWlfPt5JuYUMNy7jtQPXlaf7+tIkviYWcn+7N8RCMJ4VcHXzfZqr48Z0fdNN8q6Y5nrpwdlCEbb6129+HxIFqpeKOcUrfHKGZKZJYcjVfUw4QKFAquwrtKI2fYt1fQulbNy3/GfUpBk+EmBPqJE26MNyci/KRP34zrCr+HN3O9+tcHt+33SFAMDw2zutUAkjUVek00c89oUXRYjwQgOySBXPhQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291336676,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291336676,"lang":2}; TAG START 1477291312321
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
product query 
Full text search 
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT product.*,trolley.qty AS trolley_qty 
		FROM table_product_category category
		LEFT JOIN table_product product ON product.id_category=category.id
		LEFT JOIN (SELECT * FROM table_trolley WHERE id_user=55) trolley ON trolley.id_product=product.id
		WHERE category.id_store=5  
		ORDER BY product.id ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		LIMIT ${page_max} OFFSET 0;{"search":"","page_go":0,"page_max":25,"id_user":55}
PAGINATION DATA: [{"no":"1","total":"10","id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"2","maxno":"10"},{"no":"2","total":"10","id":"20","id_category":"41","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"41","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null,"maxno":"10"},{"no":"3","total":"10","id":"21","id_category":"42","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"42","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null,"maxno":"10"},{"no":"4","total":"10","id":"35","id_category":"43","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"43","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null,"maxno":"10"},{"no":"5","total":"10","id":"43","id_category":"44","name":"Cat Nippon Paint","description":"Cat Nippon Paint","time_create":"2016-10-23T08:04:04.112Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat1.png","price":"44","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null,"maxno":"10"},{"no":"6","total":"10","id":"59","id_category":"45","name":"Cat Catylac","description":"Cat Catylac","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat2.png","price":"45","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null,"maxno":"10"},{"no":"7","total":"10","id":"62","id_category":"46","name":"Sink Elite","description":"Sink Elite","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink1.jpg","price":"46","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null,"maxno":"10"},{"no":"8","total":"10","id":"80","id_category":"47","name":"Sink American Standard","description":"Sink American Standard","time_create":"2016-10-23T08:04:04.114Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink2.jpg","price":"47","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null,"maxno":"10"},{"no":"9","total":"10","id":"88","id_category":"48","name":"Bata Merah","description":"Bata Merah","time_create":"2016-10-23T08:04:04.115Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata1.jpg","price":"48","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null,"maxno":"10"},{"no":"10","total":"10","id":"93","id_category":"49","name":"Bata Ringan","description":"Bata Ringan","time_create":"2016-10-23T08:04:04.116Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata2.jpg","price":"49","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null,"maxno":"10"}]
TERIMA DATA {"products":[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"2"},{"id":"20","id_category":"41","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"41","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null},{"id":"21","id_category":"42","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"42","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"35","id_category":"43","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"43","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"43","id_category":"44","name":"Cat Nippon Paint","description":"Cat Nippon Paint","time_create":"2016-10-23T08:04:04.112Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat1.png","price":"44","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"59","id_category":"45","name":"Cat Catylac","description":"Cat Catylac","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat2.png","price":"45","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"62","id_category":"46","name":"Sink Elite","description":"Sink Elite","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink1.jpg","price":"46","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"80","id_category":"47","name":"Sink American Standard","description":"Sink American Standard","time_create":"2016-10-23T08:04:04.114Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink2.jpg","price":"47","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"88","id_category":"48","name":"Bata Merah","description":"Bata Merah","time_create":"2016-10-23T08:04:04.115Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata1.jpg","price":"48","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null},{"id":"93","id_category":"49","name":"Bata Ringan","description":"Bata Ringan","time_create":"2016-10-23T08:04:04.116Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata2.jpg","price":"49","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null}],"pagination":{"page_go":"#"}}
RESULT 200: {"products":[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"2"},{"id":"20","id_category":"41","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"41","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null},{"id":"21","id_category":"42","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"42","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"35","id_category":"43","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"43","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"43","id_category":"44","name":"Cat Nippon Paint","description":"Cat Nippon Paint","time_create":"2016-10-23T08:04:04.112Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat1.png","price":"44","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"59","id_category":"45","name":"Cat Catylac","description":"Cat Catylac","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat2.png","price":"45","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"62","id_category":"46","name":"Sink Elite","description":"Sink Elite","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink1.jpg","price":"46","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"80","id_category":"47","name":"Sink American Standard","description":"Sink American Standard","time_create":"2016-10-23T08:04:04.114Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink2.jpg","price":"47","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"88","id_category":"48","name":"Bata Merah","description":"Bata Merah","time_create":"2016-10-23T08:04:04.115Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata1.jpg","price":"48","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null},{"id":"93","id_category":"49","name":"Bata Ringan","description":"Bata Ringan","time_create":"2016-10-23T08:04:04.116Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata2.jpg","price":"49","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null}],"pagination":{"page_go":"#"}}
[0mGET /api/store/5/product?search= [32m200 [0m11.095 ms - 2944[0m
API Cluster worker id: 2
REQUESTING PATH /location/history;GET;1477291313340
CHECKING API TOKEN YKlFi4c6qPJiuDQ89D0/K404+M1GNlW7fWAl/MqQO3IlHQToibWMeF0ymVwNtdKfAg6FazKJMZ4U+reb5vHJMwvNZbDJ6/sx9uIMKHkewTqpl2NoGVipd2UBAL97AWlfPt5JuYUMNy7jtQPXlaf7+tIkviYWcn+7N8RCMJ4VcHXzfZqr48Z0fdNN8q6Y5nrpwdlCEbb6129+HxIFqpeKOcUrfHKGZKZJYcjVfUw4QKFAquwrtKI2fYt1fQulbNy3/GfUpBk+EmBPqJE26MNyci/KRP34zrCr+HN3O9+tcHt+33SFAMDw2zutUAkjUVek00c89oUXRYjwQgOySBXPhQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291336676,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291336676,"lang":2}; TAG START 1477291313340
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;SELECT location.*, ST_X(location.geom_location::geometry) AS longitude, ST_Y(location.geom_location::geometry) AS latitude FROM table_location_history history LEFT JOIN table_location_gps location ON location.id=history.id_location WHERE history.id_user=${id_user} ORDER BY history.id DESC LIMIT 10 OFFSET 0;{"id_user":55}
RESULT 200: {"location_history":[]}
[0mGET /api/location/history [32m200 [0m6.486 ms - 23[0m
API Cluster worker id: 2
REQUESTING PATH /token/update;POST;1477291313725
CHECKING API TOKEN YKlFi4c6qPJiuDQ89D0/K404+M1GNlW7fWAl/MqQO3IlHQToibWMeF0ymVwNtdKfAg6FazKJMZ4U+reb5vHJMwvNZbDJ6/sx9uIMKHkewTqpl2NoGVipd2UBAL97AWlfPt5JuYUMNy7jtQPXlaf7+tIkviYWcn+7N8RCMJ4VcHXzfZqr48Z0fdNN8q6Y5nrpwdlCEbb6129+HxIFqpeKOcUrfHKGZKZJYcjVfUw4QKFAquwrtKI2fYt1fQulbNy3/GfUpBk+EmBPqJE26MNyci/KRP34zrCr+HN3O9+tcHt+33SFAMDw2zutUAkjUVek00c89oUXRYjwQgOySBXPhQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291336676,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291336676,"lang":2}; TAG START 1477291313725
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_fcm
CHECKING imsi
CHECKING longitude
CHECKING latitude
IS_ERR false
DB:OK;SELECT device.id_location,usr.id_device FROM table_user usr LEFT JOIN table_device device ON device.id=usr.id_device WHERE usr.id=${id_user};{"token_fcm":"-","imsi":"-","longitude":"106.67463395744562","latitude":"-6.299352685094847","id_user":55}
DB:OK;SELECT id_location,(random()/10)-(random()/10)+${longitude} AS random_longitude,(random()/10)-(random()/10)+${latitude} AS random_latitude FROM table_store;{"token_fcm":"-","imsi":"-","longitude":"106.67463395744562","latitude":"-6.299352685094847","id_user":55,"id_location":"162","id_device":"25"}
RESULT 200: {"data":[{"id_location":"10","random_longitude":106.713133461308,"random_latitude":-6.27353242799923},{"id_location":"20","random_longitude":106.634485859191,"random_latitude":-6.27837849214025},{"id_location":"30","random_longitude":106.702193399193,"random_latitude":-6.30389417196907},{"id_location":"40","random_longitude":106.642805887386,"random_latitude":-6.30532549322866},{"id_location":"50","random_longitude":106.660795365274,"random_latitude":-6.28156972789489},{"id_location":"60","random_longitude":106.609444732498,"random_latitude":-6.32612980651952},{"id_location":"70","random_longitude":106.680816785432,"random_latitude":-6.32422799920946},{"id_location":"80","random_longitude":106.613240957772,"random_latitude":-6.31858073292583},{"id_location":"90","random_longitude":106.721479953779,"random_latitude":-6.30021403558835},{"id_location":"100","random_longitude":106.608212324372,"random_latitude":-6.2992723576846}]}
[0mPOST /api/token/update [32m200 [0m12.083 ms - 940[0m
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.660795365274 -6.28156972789489)') WHERE id=${id_location};{"id_location":"50","random_longitude":106.660795365274,"random_latitude":-6.28156972789489}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.634485859191 -6.27837849214025)') WHERE id=${id_location};{"id_location":"20","random_longitude":106.634485859191,"random_latitude":-6.27837849214025}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.713133461308 -6.27353242799923)') WHERE id=${id_location};{"id_location":"10","random_longitude":106.713133461308,"random_latitude":-6.27353242799923}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.702193399193 -6.30389417196907)') WHERE id=${id_location};{"id_location":"30","random_longitude":106.702193399193,"random_latitude":-6.30389417196907}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.642805887386 -6.30532549322866)') WHERE id=${id_location};{"id_location":"40","random_longitude":106.642805887386,"random_latitude":-6.30532549322866}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.609444732498 -6.32612980651952)') WHERE id=${id_location};{"id_location":"60","random_longitude":106.609444732498,"random_latitude":-6.32612980651952}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.680816785432 -6.32422799920946)') WHERE id=${id_location};{"id_location":"70","random_longitude":106.680816785432,"random_latitude":-6.32422799920946}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.613240957772 -6.31858073292583)') WHERE id=${id_location};{"id_location":"80","random_longitude":106.613240957772,"random_latitude":-6.31858073292583}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.721479953779 -6.30021403558835)') WHERE id=${id_location};{"id_location":"90","random_longitude":106.721479953779,"random_latitude":-6.30021403558835}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.608212324372 -6.2992723576846)') WHERE id=${id_location};{"id_location":"100","random_longitude":106.608212324372,"random_latitude":-6.2992723576846}
DB:OK;UPDATE table_device SET token_fcm=${token_fcm}, imsi=${imsi} WHERE id=${id_device};{"token_fcm":"-","imsi":"-","longitude":"106.67463395744562","latitude":"-6.299352685094847","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.67463395744562 -6.299352685094847)') WHERE id=${id_location};{"token_fcm":"-","imsi":"-","longitude":"106.67463395744562","latitude":"-6.299352685094847","id_user":55,"id_location":"162","id_device":"25"}
API Cluster worker id: 2
REQUESTING PATH /store/nearby;GET;1477291313811
CHECKING API TOKEN YKlFi4c6qPJiuDQ89D0/K404+M1GNlW7fWAl/MqQO3IlHQToibWMeF0ymVwNtdKfAg6FazKJMZ4U+reb5vHJMwvNZbDJ6/sx9uIMKHkewTqpl2NoGVipd2UBAL97AWlfPt5JuYUMNy7jtQPXlaf7+tIkviYWcn+7N8RCMJ4VcHXzfZqr48Z0fdNN8q6Y5nrpwdlCEbb6129+HxIFqpeKOcUrfHKGZKZJYcjVfUw4QKFAquwrtKI2fYt1fQulbNy3/GfUpBk+EmBPqJE26MNyci/KRP34zrCr+HN3O9+tcHt+33SFAMDw2zutUAkjUVek00c89oUXRYjwQgOySBXPhQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291336676,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291336676,"lang":2}; TAG START 1477291313811
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING longitude
CHECKING latitude
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT store.*,rating.counted AS rating,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude,ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67463395744562 -6.299352685094847)')) AS distance_db,${distance} AS distance_max_meter 
		FROM table_store grouping
		LEFT JOIN table_store store ON store.id=grouping.id
		LEFT JOIN table_location_gps location ON location.id=store.id_location
		LEFT JOIN (SELECT AVG(rating) AS counted, id_store FROM table_store_rating GROUP BY id_store) rating ON rating.id_store=store.id
		WHERE ST_DWithin(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67463395744562 -6.299352685094847)'), ${distance})
		ORDER BY ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67463395744562 -6.299352685094847)')) ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		;{"longitude":"106.67463395744562","latitude":"-6.299352685094847","distance":"3000","page_go":0,"page_max":null,"id_user":55}
PAGINATION DATA: [{"no":"1","total":"2","id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","rating":null,"location_longitude":106.660795365274,"location_latitude":-6.28156972789489,"distance_db":2492.442510285,"distance_max_meter":"3000","maxno":"2"},{"no":"2","total":"2","id":"7","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 7","address":"Store Address 7","phone":"Store Phone 7","is_delete":false,"id_location":"70","id_schedule":"7","rating":null,"location_longitude":106.680816785432,"location_latitude":-6.32422799920946,"distance_db":2834.695412634,"distance_max_meter":"3000","maxno":"2"}]
HALO {"store_nearby":[{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","rating":null,"location_longitude":106.660795365274,"location_latitude":-6.28156972789489,"distance_db":2492.442510285,"distance_max_meter":"3000"},{"id":"7","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 7","address":"Store Address 7","phone":"Store Phone 7","is_delete":false,"id_location":"70","id_schedule":"7","rating":null,"location_longitude":106.680816785432,"location_latitude":-6.32422799920946,"distance_db":2834.695412634,"distance_max_meter":"3000"}],"pagination":{"page_go":"#"}}
ERR:null
DONE:{"status":200,"headers":{"content-type":"application/json; charset=UTF-8","date":"Mon, 24 Oct 2016 06:41:53 GMT","expires":"Tue, 25 Oct 2016 06:41:53 GMT","cache-control":"public, max-age=86400","server":"mafe","x-xss-protection":"1; mode=block","x-frame-options":"SAMEORIGIN","alt-svc":"quic=\":443\"; ma=2592000; v=\"36,35,34\"","accept-ranges":"none","vary":"Accept-Encoding","connection":"close"},"json":{"destination_addresses":["Jl. Anggrek Jingga I Blok Av No.18, Rw. Buntu, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia"],"origin_addresses":["Jl. Teras Golf 1 Blok b No.2, Lengkong Wetan, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia","Jl. Caribbean Islands, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia"],"rows":[{"elements":[{"distance":{"text":"6.0 km","value":6050},"duration":{"text":"14 mins","value":847},"status":"OK"}]},{"elements":[{"distance":{"text":"4.9 km","value":4868},"duration":{"text":"13 mins","value":795},"status":"OK"}]}],"status":"OK"}}
ELEMENTS:[{"distance":{"text":"6.0 km","value":6050},"duration":{"text":"14 mins","value":847},"status":"OK"}]
RESULT 200: {"store_nearby":[{"id":"7","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 7","address":"Store Address 7","phone":"Store Phone 7","is_delete":false,"id_location":"70","id_schedule":"7","rating":null,"location_longitude":106.680816785432,"location_latitude":-6.32422799920946,"distance_db":2834.695412634,"distance_max_meter":"3000","distance_google":4868},{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","rating":null,"location_longitude":106.660795365274,"location_latitude":-6.28156972789489,"distance_db":2492.442510285,"distance_max_meter":"3000","distance_google":6050}],"pagination":{"page_go":"#"}}
[0mGET /api/store/nearby?longitude=106.67463395744562&latitude=-6.299352685094847 [32m200 [0m68.173 ms - 749[0m
API Cluster worker id: 2
REQUESTING PATH /token/update;POST;1477291316141
CHECKING API TOKEN YKlFi4c6qPJiuDQ89D0/K404+M1GNlW7fWAl/MqQO3IlHQToibWMeF0ymVwNtdKfAg6FazKJMZ4U+reb5vHJMwvNZbDJ6/sx9uIMKHkewTqpl2NoGVipd2UBAL97AWlfPt5JuYUMNy7jtQPXlaf7+tIkviYWcn+7N8RCMJ4VcHXzfZqr48Z0fdNN8q6Y5nrpwdlCEbb6129+HxIFqpeKOcUrfHKGZKZJYcjVfUw4QKFAquwrtKI2fYt1fQulbNy3/GfUpBk+EmBPqJE26MNyci/KRP34zrCr+HN3O9+tcHt+33SFAMDw2zutUAkjUVek00c89oUXRYjwQgOySBXPhQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291336676,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291336676,"lang":2}; TAG START 1477291316141
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_fcm
CHECKING imsi
CHECKING longitude
CHECKING latitude
IS_ERR false
DB:OK;SELECT device.id_location,usr.id_device FROM table_user usr LEFT JOIN table_device device ON device.id=usr.id_device WHERE usr.id=${id_user};{"token_fcm":"-","imsi":"-","longitude":"106.67957525700331","latitude":"-6.317103704625768","id_user":55}
DB:OK;SELECT id_location,(random()/10)-(random()/10)+${longitude} AS random_longitude,(random()/10)-(random()/10)+${latitude} AS random_latitude FROM table_store;{"token_fcm":"-","imsi":"-","longitude":"106.67957525700331","latitude":"-6.317103704625768","id_user":55,"id_location":"162","id_device":"25"}
RESULT 200: {"data":[{"id_location":"10","random_longitude":106.684856169345,"random_latitude":-6.3071816955712},{"id_location":"20","random_longitude":106.669194992911,"random_latitude":-6.30843965476568},{"id_location":"30","random_longitude":106.718925488973,"random_latitude":-6.31937603200975},{"id_location":"40","random_longitude":106.656601448543,"random_latitude":-6.26776618403572},{"id_location":"50","random_longitude":106.671881899703,"random_latitude":-6.34909590725045},{"id_location":"60","random_longitude":106.730753856525,"random_latitude":-6.37062643189172},{"id_location":"70","random_longitude":106.656635252666,"random_latitude":-6.31744599673155},{"id_location":"80","random_longitude":106.746311208745,"random_latitude":-6.39451535879823},{"id_location":"90","random_longitude":106.650104103051,"random_latitude":-6.34979799962792},{"id_location":"100","random_longitude":106.670144434506,"random_latitude":-6.34726724336113}]}
[0mPOST /api/token/update [32m200 [0m8.707 ms - 940[0m
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.684856169345 -6.3071816955712)') WHERE id=${id_location};{"id_location":"10","random_longitude":106.684856169345,"random_latitude":-6.3071816955712}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.669194992911 -6.30843965476568)') WHERE id=${id_location};{"id_location":"20","random_longitude":106.669194992911,"random_latitude":-6.30843965476568}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.650104103051 -6.34979799962792)') WHERE id=${id_location};{"id_location":"90","random_longitude":106.650104103051,"random_latitude":-6.34979799962792}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)') WHERE id=${id_location};{"token_fcm":"-","imsi":"-","longitude":"106.67957525700331","latitude":"-6.317103704625768","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_device SET token_fcm=${token_fcm}, imsi=${imsi} WHERE id=${id_device};{"token_fcm":"-","imsi":"-","longitude":"106.67957525700331","latitude":"-6.317103704625768","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.656601448543 -6.26776618403572)') WHERE id=${id_location};{"id_location":"40","random_longitude":106.656601448543,"random_latitude":-6.26776618403572}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.746311208745 -6.39451535879823)') WHERE id=${id_location};{"id_location":"80","random_longitude":106.746311208745,"random_latitude":-6.39451535879823}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.670144434506 -6.34726724336113)') WHERE id=${id_location};{"id_location":"100","random_longitude":106.670144434506,"random_latitude":-6.34726724336113}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.730753856525 -6.37062643189172)') WHERE id=${id_location};{"id_location":"60","random_longitude":106.730753856525,"random_latitude":-6.37062643189172}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.718925488973 -6.31937603200975)') WHERE id=${id_location};{"id_location":"30","random_longitude":106.718925488973,"random_latitude":-6.31937603200975}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.656635252666 -6.31744599673155)') WHERE id=${id_location};{"id_location":"70","random_longitude":106.656635252666,"random_latitude":-6.31744599673155}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.671881899703 -6.34909590725045)') WHERE id=${id_location};{"id_location":"50","random_longitude":106.671881899703,"random_latitude":-6.34909590725045}
API Cluster worker id: 2
REQUESTING PATH /store/nearby;GET;1477291316227
CHECKING API TOKEN YKlFi4c6qPJiuDQ89D0/K404+M1GNlW7fWAl/MqQO3IlHQToibWMeF0ymVwNtdKfAg6FazKJMZ4U+reb5vHJMwvNZbDJ6/sx9uIMKHkewTqpl2NoGVipd2UBAL97AWlfPt5JuYUMNy7jtQPXlaf7+tIkviYWcn+7N8RCMJ4VcHXzfZqr48Z0fdNN8q6Y5nrpwdlCEbb6129+HxIFqpeKOcUrfHKGZKZJYcjVfUw4QKFAquwrtKI2fYt1fQulbNy3/GfUpBk+EmBPqJE26MNyci/KRP34zrCr+HN3O9+tcHt+33SFAMDw2zutUAkjUVek00c89oUXRYjwQgOySBXPhQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291336676,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291336676,"lang":2}; TAG START 1477291316227
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING longitude
CHECKING latitude
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT store.*,rating.counted AS rating,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude,ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)')) AS distance_db,${distance} AS distance_max_meter 
		FROM table_store grouping
		LEFT JOIN table_store store ON store.id=grouping.id
		LEFT JOIN table_location_gps location ON location.id=store.id_location
		LEFT JOIN (SELECT AVG(rating) AS counted, id_store FROM table_store_rating GROUP BY id_store) rating ON rating.id_store=store.id
		WHERE ST_DWithin(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)'), ${distance})
		ORDER BY ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67957525700331 -6.317103704625768)')) ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		;{"longitude":"106.67957525700331","latitude":"-6.317103704625768","distance":"3000","page_go":0,"page_max":null,"id_user":55}
PAGINATION DATA: [{"no":"1","total":"3","id":"1","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 1","address":"Store Address 1","phone":"Store Phone 1","is_delete":false,"id_location":"10","id_schedule":"1","rating":null,"location_longitude":106.684856169345,"location_latitude":-6.3071816955712,"distance_db":1243.141907318,"distance_max_meter":"3000","maxno":"3"},{"no":"2","total":"3","id":"2","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 2","address":"Store Address 2","phone":"Store Phone 2","is_delete":false,"id_location":"20","id_schedule":"2","rating":null,"location_longitude":106.669194992911,"location_latitude":-6.30843965476568,"distance_db":1495.737344528,"distance_max_meter":"3000","maxno":"3"},{"no":"3","total":"3","id":"7","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 7","address":"Store Address 7","phone":"Store Phone 7","is_delete":false,"id_location":"70","id_schedule":"7","rating":null,"location_longitude":106.656635252666,"location_latitude":-6.31744599673155,"distance_db":2538.548378985,"distance_max_meter":"3000","maxno":"3"}]
HALO {"store_nearby":[{"id":"1","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 1","address":"Store Address 1","phone":"Store Phone 1","is_delete":false,"id_location":"10","id_schedule":"1","rating":null,"location_longitude":106.684856169345,"location_latitude":-6.3071816955712,"distance_db":1243.141907318,"distance_max_meter":"3000"},{"id":"2","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 2","address":"Store Address 2","phone":"Store Phone 2","is_delete":false,"id_location":"20","id_schedule":"2","rating":null,"location_longitude":106.669194992911,"location_latitude":-6.30843965476568,"distance_db":1495.737344528,"distance_max_meter":"3000"},{"id":"7","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 7","address":"Store Address 7","phone":"Store Phone 7","is_delete":false,"id_location":"70","id_schedule":"7","rating":null,"location_longitude":106.656635252666,"location_latitude":-6.31744599673155,"distance_db":2538.548378985,"distance_max_meter":"3000"}],"pagination":{"page_go":"#"}}
ERR:null
DONE:{"status":200,"headers":{"content-type":"application/json; charset=UTF-8","date":"Mon, 24 Oct 2016 06:41:56 GMT","expires":"Tue, 25 Oct 2016 06:41:56 GMT","cache-control":"public, max-age=86400","server":"mafe","x-xss-protection":"1; mode=block","x-frame-options":"SAMEORIGIN","alt-svc":"quic=\":443\"; ma=2592000; v=\"36,35,34\"","accept-ranges":"none","vary":"Accept-Encoding","connection":"close"},"json":{"destination_addresses":["Jl. Raya Rawa Buntu No.1, Rw. Buntu, Serpong, Kota Tangerang Selatan, Banten 15318, Indonesia"],"origin_addresses":["Jl. Tj. 1 Blok R3 No.2, Rw. Mekar Jaya, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia","Jl. Cilenggang I No.50, Cilenggang, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia","Unnamed Road, Sampora, Cisauk, Tangerang, Banten 15345, Indonesia"],"rows":[{"elements":[{"distance":{"text":"3.1 km","value":3076},"duration":{"text":"8 mins","value":474},"status":"OK"}]},{"elements":[{"distance":{"text":"2.8 km","value":2848},"duration":{"text":"7 mins","value":441},"status":"OK"}]},{"elements":[{"distance":{"text":"7.2 km","value":7210},"duration":{"text":"18 mins","value":1051},"status":"OK"}]}],"status":"OK"}}
ELEMENTS:[{"distance":{"text":"3.1 km","value":3076},"duration":{"text":"8 mins","value":474},"status":"OK"}]
RESULT 200: {"store_nearby":[{"id":"2","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 2","address":"Store Address 2","phone":"Store Phone 2","is_delete":false,"id_location":"20","id_schedule":"2","rating":null,"location_longitude":106.669194992911,"location_latitude":-6.30843965476568,"distance_db":1495.737344528,"distance_max_meter":"3000","distance_google":2848},{"id":"1","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 1","address":"Store Address 1","phone":"Store Phone 1","is_delete":false,"id_location":"10","id_schedule":"1","rating":null,"location_longitude":106.684856169345,"location_latitude":-6.3071816955712,"distance_db":1243.141907318,"distance_max_meter":"3000","distance_google":3076},{"id":"7","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 7","address":"Store Address 7","phone":"Store Phone 7","is_delete":false,"id_location":"70","id_schedule":"7","rating":null,"location_longitude":106.656635252666,"location_latitude":-6.31744599673155,"distance_db":2538.548378985,"distance_max_meter":"3000","distance_google":7210}],"pagination":{"page_go":"#"}}
[0mGET /api/store/nearby?longitude=106.67957525700331&latitude=-6.317103704625768 [32m200 [0m70.963 ms - 1099[0m
API Cluster worker id: 2
REQUESTING PATH /token/update;POST;1477291318303
CHECKING API TOKEN YKlFi4c6qPJiuDQ89D0/K404+M1GNlW7fWAl/MqQO3IlHQToibWMeF0ymVwNtdKfAg6FazKJMZ4U+reb5vHJMwvNZbDJ6/sx9uIMKHkewTqpl2NoGVipd2UBAL97AWlfPt5JuYUMNy7jtQPXlaf7+tIkviYWcn+7N8RCMJ4VcHXzfZqr48Z0fdNN8q6Y5nrpwdlCEbb6129+HxIFqpeKOcUrfHKGZKZJYcjVfUw4QKFAquwrtKI2fYt1fQulbNy3/GfUpBk+EmBPqJE26MNyci/KRP34zrCr+HN3O9+tcHt+33SFAMDw2zutUAkjUVek00c89oUXRYjwQgOySBXPhQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291336676,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291336676,"lang":2}; TAG START 1477291318303
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_fcm
CHECKING imsi
CHECKING longitude
CHECKING latitude
IS_ERR false
DB:OK;SELECT device.id_location,usr.id_device FROM table_user usr LEFT JOIN table_device device ON device.id=usr.id_device WHERE usr.id=${id_user};{"token_fcm":"-","imsi":"-","longitude":"106.67740803211927","latitude":"-6.317741193083459","id_user":55}
DB:OK;SELECT id_location,(random()/10)-(random()/10)+${longitude} AS random_longitude,(random()/10)-(random()/10)+${latitude} AS random_latitude FROM table_store;{"token_fcm":"-","imsi":"-","longitude":"106.67740803211927","latitude":"-6.317741193083459","id_user":55,"id_location":"162","id_device":"25"}
RESULT 200: {"data":[{"id_location":"10","random_longitude":106.685979199689,"random_latitude":-6.36638201225677},{"id_location":"20","random_longitude":106.698173494171,"random_latitude":-6.34884858245158},{"id_location":"30","random_longitude":106.626473636739,"random_latitude":-6.38593775073194},{"id_location":"40","random_longitude":106.703858982306,"random_latitude":-6.28780137325765},{"id_location":"50","random_longitude":106.69105822132,"random_latitude":-6.24764659690798},{"id_location":"60","random_longitude":106.711292074947,"random_latitude":-6.28837749936745},{"id_location":"70","random_longitude":106.634866789682,"random_latitude":-6.33031325579748},{"id_location":"80","random_longitude":106.726023217803,"random_latitude":-6.26556625996844},{"id_location":"90","random_longitude":106.660455137352,"random_latitude":-6.2838117424132},{"id_location":"100","random_longitude":106.6263285188,"random_latitude":-6.30700175596529}]}
[0mPOST /api/token/update [32m200 [0m17.693 ms - 937[0m
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.6263285188 -6.30700175596529)') WHERE id=${id_location};{"id_location":"100","random_longitude":106.6263285188,"random_latitude":-6.30700175596529}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.685979199689 -6.36638201225677)') WHERE id=${id_location};{"id_location":"10","random_longitude":106.685979199689,"random_latitude":-6.36638201225677}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.698173494171 -6.34884858245158)') WHERE id=${id_location};{"id_location":"20","random_longitude":106.698173494171,"random_latitude":-6.34884858245158}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.626473636739 -6.38593775073194)') WHERE id=${id_location};{"id_location":"30","random_longitude":106.626473636739,"random_latitude":-6.38593775073194}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.703858982306 -6.28780137325765)') WHERE id=${id_location};{"id_location":"40","random_longitude":106.703858982306,"random_latitude":-6.28780137325765}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.69105822132 -6.24764659690798)') WHERE id=${id_location};{"id_location":"50","random_longitude":106.69105822132,"random_latitude":-6.24764659690798}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.711292074947 -6.28837749936745)') WHERE id=${id_location};{"id_location":"60","random_longitude":106.711292074947,"random_latitude":-6.28837749936745}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.634866789682 -6.33031325579748)') WHERE id=${id_location};{"id_location":"70","random_longitude":106.634866789682,"random_latitude":-6.33031325579748}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.726023217803 -6.26556625996844)') WHERE id=${id_location};{"id_location":"80","random_longitude":106.726023217803,"random_latitude":-6.26556625996844}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.660455137352 -6.2838117424132)') WHERE id=${id_location};{"id_location":"90","random_longitude":106.660455137352,"random_latitude":-6.2838117424132}
DB:OK;UPDATE table_device SET token_fcm=${token_fcm}, imsi=${imsi} WHERE id=${id_device};{"token_fcm":"-","imsi":"-","longitude":"106.67740803211927","latitude":"-6.317741193083459","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.67740803211927 -6.317741193083459)') WHERE id=${id_location};{"token_fcm":"-","imsi":"-","longitude":"106.67740803211927","latitude":"-6.317741193083459","id_user":55,"id_location":"162","id_device":"25"}
API Cluster worker id: 2
REQUESTING PATH /store/nearby;GET;1477291318404
CHECKING API TOKEN YKlFi4c6qPJiuDQ89D0/K404+M1GNlW7fWAl/MqQO3IlHQToibWMeF0ymVwNtdKfAg6FazKJMZ4U+reb5vHJMwvNZbDJ6/sx9uIMKHkewTqpl2NoGVipd2UBAL97AWlfPt5JuYUMNy7jtQPXlaf7+tIkviYWcn+7N8RCMJ4VcHXzfZqr48Z0fdNN8q6Y5nrpwdlCEbb6129+HxIFqpeKOcUrfHKGZKZJYcjVfUw4QKFAquwrtKI2fYt1fQulbNy3/GfUpBk+EmBPqJE26MNyci/KRP34zrCr+HN3O9+tcHt+33SFAMDw2zutUAkjUVek00c89oUXRYjwQgOySBXPhQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291336676,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291336676,"lang":2}; TAG START 1477291318404
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING longitude
CHECKING latitude
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT store.*,rating.counted AS rating,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude,ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67740803211927 -6.317741193083459)')) AS distance_db,${distance} AS distance_max_meter 
		FROM table_store grouping
		LEFT JOIN table_store store ON store.id=grouping.id
		LEFT JOIN table_location_gps location ON location.id=store.id_location
		LEFT JOIN (SELECT AVG(rating) AS counted, id_store FROM table_store_rating GROUP BY id_store) rating ON rating.id_store=store.id
		WHERE ST_DWithin(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67740803211927 -6.317741193083459)'), ${distance})
		ORDER BY ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67740803211927 -6.317741193083459)')) ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		;{"longitude":"106.67740803211927","latitude":"-6.317741193083459","distance":"3000","page_go":0,"page_max":null,"id_user":55}
PAGINATION DATA: []
RESULT 200: {"store_nearby":[],"pagination":{"page_go":"#"}}
[0mGET /api/store/nearby?longitude=106.67740803211927&latitude=-6.317741193083459 [32m200 [0m13.090 ms - 48[0m
API Cluster worker id: 2
REQUESTING PATH /token/update;POST;1477291319584
CHECKING API TOKEN YKlFi4c6qPJiuDQ89D0/K404+M1GNlW7fWAl/MqQO3IlHQToibWMeF0ymVwNtdKfAg6FazKJMZ4U+reb5vHJMwvNZbDJ6/sx9uIMKHkewTqpl2NoGVipd2UBAL97AWlfPt5JuYUMNy7jtQPXlaf7+tIkviYWcn+7N8RCMJ4VcHXzfZqr48Z0fdNN8q6Y5nrpwdlCEbb6129+HxIFqpeKOcUrfHKGZKZJYcjVfUw4QKFAquwrtKI2fYt1fQulbNy3/GfUpBk+EmBPqJE26MNyci/KRP34zrCr+HN3O9+tcHt+33SFAMDw2zutUAkjUVek00c89oUXRYjwQgOySBXPhQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291336676,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291336676,"lang":2}; TAG START 1477291319584
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_fcm
CHECKING imsi
CHECKING longitude
CHECKING latitude
IS_ERR false
DB:OK;SELECT device.id_location,usr.id_device FROM table_user usr LEFT JOIN table_device device ON device.id=usr.id_device WHERE usr.id=${id_user};{"token_fcm":"-","imsi":"-","longitude":"106.67858149856329","latitude":"-6.316120644566011","id_user":55}
DB:OK;SELECT id_location,(random()/10)-(random()/10)+${longitude} AS random_longitude,(random()/10)-(random()/10)+${latitude} AS random_latitude FROM table_store;{"token_fcm":"-","imsi":"-","longitude":"106.67858149856329","latitude":"-6.316120644566011","id_user":55,"id_location":"162","id_device":"25"}
RESULT 200: {"data":[{"id_location":"10","random_longitude":106.698796175374,"random_latitude":-6.29981878525611},{"id_location":"20","random_longitude":106.687904278561,"random_latitude":-6.30607733516988},{"id_location":"30","random_longitude":106.692415060615,"random_latitude":-6.3865583953451},{"id_location":"40","random_longitude":106.70213520159,"random_latitude":-6.30405681980808},{"id_location":"50","random_longitude":106.684573600302,"random_latitude":-6.27140853577327},{"id_location":"60","random_longitude":106.690627419576,"random_latitude":-6.32071247510646},{"id_location":"70","random_longitude":106.669004421914,"random_latitude":-6.3094744256701},{"id_location":"80","random_longitude":106.64409213583,"random_latitude":-6.34248694051091},{"id_location":"90","random_longitude":106.668970231246,"random_latitude":-6.27980445828323},{"id_location":"100","random_longitude":106.664012708701,"random_latitude":-6.32637078235891}]}
[0mPOST /api/token/update [32m200 [0m11.931 ms - 937[0m
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.698796175374 -6.29981878525611)') WHERE id=${id_location};{"id_location":"10","random_longitude":106.698796175374,"random_latitude":-6.29981878525611}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.687904278561 -6.30607733516988)') WHERE id=${id_location};{"id_location":"20","random_longitude":106.687904278561,"random_latitude":-6.30607733516988}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.692415060615 -6.3865583953451)') WHERE id=${id_location};{"id_location":"30","random_longitude":106.692415060615,"random_latitude":-6.3865583953451}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.690627419576 -6.32071247510646)') WHERE id=${id_location};{"id_location":"60","random_longitude":106.690627419576,"random_latitude":-6.32071247510646}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.669004421914 -6.3094744256701)') WHERE id=${id_location};{"id_location":"70","random_longitude":106.669004421914,"random_latitude":-6.3094744256701}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.70213520159 -6.30405681980808)') WHERE id=${id_location};{"id_location":"40","random_longitude":106.70213520159,"random_latitude":-6.30405681980808}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.684573600302 -6.27140853577327)') WHERE id=${id_location};{"id_location":"50","random_longitude":106.684573600302,"random_latitude":-6.27140853577327}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.64409213583 -6.34248694051091)') WHERE id=${id_location};{"id_location":"80","random_longitude":106.64409213583,"random_latitude":-6.34248694051091}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.668970231246 -6.27980445828323)') WHERE id=${id_location};{"id_location":"90","random_longitude":106.668970231246,"random_latitude":-6.27980445828323}
DB:OK;UPDATE table_device SET token_fcm=${token_fcm}, imsi=${imsi} WHERE id=${id_device};{"token_fcm":"-","imsi":"-","longitude":"106.67858149856329","latitude":"-6.316120644566011","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.67858149856329 -6.316120644566011)') WHERE id=${id_location};{"token_fcm":"-","imsi":"-","longitude":"106.67858149856329","latitude":"-6.316120644566011","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.664012708701 -6.32637078235891)') WHERE id=${id_location};{"id_location":"100","random_longitude":106.664012708701,"random_latitude":-6.32637078235891}
API Cluster worker id: 2
REQUESTING PATH /store/nearby;GET;1477291319661
CHECKING API TOKEN YKlFi4c6qPJiuDQ89D0/K404+M1GNlW7fWAl/MqQO3IlHQToibWMeF0ymVwNtdKfAg6FazKJMZ4U+reb5vHJMwvNZbDJ6/sx9uIMKHkewTqpl2NoGVipd2UBAL97AWlfPt5JuYUMNy7jtQPXlaf7+tIkviYWcn+7N8RCMJ4VcHXzfZqr48Z0fdNN8q6Y5nrpwdlCEbb6129+HxIFqpeKOcUrfHKGZKZJYcjVfUw4QKFAquwrtKI2fYt1fQulbNy3/GfUpBk+EmBPqJE26MNyci/KRP34zrCr+HN3O9+tcHt+33SFAMDw2zutUAkjUVek00c89oUXRYjwQgOySBXPhQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291336676,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291336676,"lang":2}; TAG START 1477291319661
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING longitude
CHECKING latitude
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT store.*,rating.counted AS rating,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude,ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67858149856329 -6.316120644566011)')) AS distance_db,${distance} AS distance_max_meter 
		FROM table_store grouping
		LEFT JOIN table_store store ON store.id=grouping.id
		LEFT JOIN table_location_gps location ON location.id=store.id_location
		LEFT JOIN (SELECT AVG(rating) AS counted, id_store FROM table_store_rating GROUP BY id_store) rating ON rating.id_store=store.id
		WHERE ST_DWithin(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67858149856329 -6.316120644566011)'), ${distance})
		ORDER BY ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67858149856329 -6.316120644566011)')) ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		;{"longitude":"106.67858149856329","latitude":"-6.316120644566011","distance":"3000","page_go":0,"page_max":null,"id_user":55}
PAGINATION DATA: [{"no":"1","total":"6","id":"7","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 7","address":"Store Address 7","phone":"Store Phone 7","is_delete":false,"id_location":"70","id_schedule":"7","rating":null,"location_longitude":106.669004421914,"location_latitude":-6.3094744256701,"distance_db":1289.636055684,"distance_max_meter":"3000","maxno":"6"},{"no":"2","total":"6","id":"6","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 6","address":"Store Address 6","phone":"Store Phone 6","is_delete":false,"id_location":"60","id_schedule":"6","rating":null,"location_longitude":106.690627419576,"location_latitude":-6.32071247510646,"distance_db":1426.310579752,"distance_max_meter":"3000","maxno":"6"},{"no":"3","total":"6","id":"2","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 2","address":"Store Address 2","phone":"Store Phone 2","is_delete":false,"id_location":"20","id_schedule":"2","rating":null,"location_longitude":106.687904278561,"location_latitude":-6.30607733516988,"distance_db":1515.81486959,"distance_max_meter":"3000","maxno":"6"},{"no":"4","total":"6","id":"10","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 10","address":"Store Address 10","phone":"Store Phone 10","is_delete":false,"id_location":"100","id_schedule":"10","rating":null,"location_longitude":106.664012708701,"location_latitude":-6.32637078235891,"distance_db":1970.644928531,"distance_max_meter":"3000","maxno":"6"},{"no":"5","total":"6","id":"1","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 1","address":"Store Address 1","phone":"Store Phone 1","is_delete":false,"id_location":"10","id_schedule":"1","rating":null,"location_longitude":106.698796175374,"location_latitude":-6.29981878525611,"distance_db":2872.821144639,"distance_max_meter":"3000","maxno":"6"},{"no":"6","total":"6","id":"4","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 4","address":"Store Address 4","phone":"Store Phone 4","is_delete":false,"id_location":"40","id_schedule":"4","rating":null,"location_longitude":106.70213520159,"location_latitude":-6.30405681980808,"distance_db":2927.825772658,"distance_max_meter":"3000","maxno":"6"}]
HALO {"store_nearby":[{"id":"7","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 7","address":"Store Address 7","phone":"Store Phone 7","is_delete":false,"id_location":"70","id_schedule":"7","rating":null,"location_longitude":106.669004421914,"location_latitude":-6.3094744256701,"distance_db":1289.636055684,"distance_max_meter":"3000"},{"id":"6","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 6","address":"Store Address 6","phone":"Store Phone 6","is_delete":false,"id_location":"60","id_schedule":"6","rating":null,"location_longitude":106.690627419576,"location_latitude":-6.32071247510646,"distance_db":1426.310579752,"distance_max_meter":"3000"},{"id":"2","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 2","address":"Store Address 2","phone":"Store Phone 2","is_delete":false,"id_location":"20","id_schedule":"2","rating":null,"location_longitude":106.687904278561,"location_latitude":-6.30607733516988,"distance_db":1515.81486959,"distance_max_meter":"3000"},{"id":"10","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 10","address":"Store Address 10","phone":"Store Phone 10","is_delete":false,"id_location":"100","id_schedule":"10","rating":null,"location_longitude":106.664012708701,"location_latitude":-6.32637078235891,"distance_db":1970.644928531,"distance_max_meter":"3000"},{"id":"1","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 1","address":"Store Address 1","phone":"Store Phone 1","is_delete":false,"id_location":"10","id_schedule":"1","rating":null,"location_longitude":106.698796175374,"location_latitude":-6.29981878525611,"distance_db":2872.821144639,"distance_max_meter":"3000"},{"id":"4","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 4","address":"Store Address 4","phone":"Store Phone 4","is_delete":false,"id_location":"40","id_schedule":"4","rating":null,"location_longitude":106.70213520159,"location_latitude":-6.30405681980808,"distance_db":2927.825772658,"distance_max_meter":"3000"}],"pagination":{"page_go":"#"}}
ERR:null
DONE:{"status":200,"headers":{"content-type":"application/json; charset=UTF-8","date":"Mon, 24 Oct 2016 06:41:59 GMT","expires":"Tue, 25 Oct 2016 06:41:59 GMT","cache-control":"public, max-age=86400","server":"mafe","x-xss-protection":"1; mode=block","x-frame-options":"SAMEORIGIN","alt-svc":"quic=\":443\"; ma=2592000; v=\"36,35,34\"","accept-ranges":"none","vary":"Accept-Encoding","connection":"close"},"json":{"destination_addresses":["Jl. Raya Rawa Buntu No.1, Rw. Buntu, Serpong, Kota Tangerang Selatan, Banten 15318, Indonesia"],"origin_addresses":["Jl. Cilenggang I Blok L3 No.9, Cilenggang, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia","Jl. Nn No.54, Ciater, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia","Jl. Lkr. Tim. No.32, Rw. Mekar Jaya, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia","Jl. Kademangan Blok Cendana 3 No.75, Serpong, Kota Tangerang Selatan, Banten 15314, Indonesia","Jl. Jombang Rw. Lele No.64, Jombang, Ciputat, Kota Tangerang Selatan, Banten 15414, Indonesia","Jl. Jalur Pipa Gas No.28, Serua, Ciputat, Kota Tangerang Selatan, Banten 15414, Indonesia"],"rows":[{"elements":[{"distance":{"text":"2.8 km","value":2836},"duration":{"text":"7 mins","value":402},"status":"OK"}]},{"elements":[{"distance":{"text":"4.7 km","value":4696},"duration":{"text":"12 mins","value":741},"status":"OK"}]},{"elements":[{"distance":{"text":"3.3 km","value":3335},"duration":{"text":"8 mins","value":488},"status":"OK"}]},{"elements":[{"distance":{"text":"6.0 km","value":6023},"duration":{"text":"17 mins","value":1029},"status":"OK"}]},{"elements":[{"distance":{"text":"7.2 km","value":7215},"duration":{"text":"19 mins","value":1139},"status":"OK"}]},{"elements":[{"distance":{"text":"7.6 km","value":7636},"duration":{"text":"20 mins","value":1202},"status":"OK"}]}],"status":"OK"}}
ELEMENTS:[{"distance":{"text":"2.8 km","value":2836},"duration":{"text":"7 mins","value":402},"status":"OK"}]
RESULT 200: {"store_nearby":[{"id":"7","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 7","address":"Store Address 7","phone":"Store Phone 7","is_delete":false,"id_location":"70","id_schedule":"7","rating":null,"location_longitude":106.669004421914,"location_latitude":-6.3094744256701,"distance_db":1289.636055684,"distance_max_meter":"3000","distance_google":2836},{"id":"2","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 2","address":"Store Address 2","phone":"Store Phone 2","is_delete":false,"id_location":"20","id_schedule":"2","rating":null,"location_longitude":106.687904278561,"location_latitude":-6.30607733516988,"distance_db":1515.81486959,"distance_max_meter":"3000","distance_google":3335},{"id":"6","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 6","address":"Store Address 6","phone":"Store Phone 6","is_delete":false,"id_location":"60","id_schedule":"6","rating":null,"location_longitude":106.690627419576,"location_latitude":-6.32071247510646,"distance_db":1426.310579752,"distance_max_meter":"3000","distance_google":4696},{"id":"10","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 10","address":"Store Address 10","phone":"Store Phone 10","is_delete":false,"id_location":"100","id_schedule":"10","rating":null,"location_longitude":106.664012708701,"location_latitude":-6.32637078235891,"distance_db":1970.644928531,"distance_max_meter":"3000","distance_google":6023},{"id":"1","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 1","address":"Store Address 1","phone":"Store Phone 1","is_delete":false,"id_location":"10","id_schedule":"1","rating":null,"location_longitude":106.698796175374,"location_latitude":-6.29981878525611,"distance_db":2872.821144639,"distance_max_meter":"3000","distance_google":7215},{"id":"4","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 4","address":"Store Address 4","phone":"Store Phone 4","is_delete":false,"id_location":"40","id_schedule":"4","rating":null,"location_longitude":106.70213520159,"location_latitude":-6.30405681980808,"distance_db":2927.825772658,"distance_max_meter":"3000","distance_google":7636}],"pagination":{"page_go":"#"}}
[0mGET /api/store/nearby?longitude=106.67858149856329&latitude=-6.316120644566011 [32m200 [0m81.930 ms - 2156[0m
API Cluster worker id: 2
REQUESTING PATH /token/update;POST;1477291320391
CHECKING API TOKEN YKlFi4c6qPJiuDQ89D0/K404+M1GNlW7fWAl/MqQO3IlHQToibWMeF0ymVwNtdKfAg6FazKJMZ4U+reb5vHJMwvNZbDJ6/sx9uIMKHkewTqpl2NoGVipd2UBAL97AWlfPt5JuYUMNy7jtQPXlaf7+tIkviYWcn+7N8RCMJ4VcHXzfZqr48Z0fdNN8q6Y5nrpwdlCEbb6129+HxIFqpeKOcUrfHKGZKZJYcjVfUw4QKFAquwrtKI2fYt1fQulbNy3/GfUpBk+EmBPqJE26MNyci/KRP34zrCr+HN3O9+tcHt+33SFAMDw2zutUAkjUVek00c89oUXRYjwQgOySBXPhQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291336676,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291336676,"lang":2}; TAG START 1477291320391
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_fcm
CHECKING imsi
CHECKING longitude
CHECKING latitude
IS_ERR false
DB:OK;SELECT device.id_location,usr.id_device FROM table_user usr LEFT JOIN table_device device ON device.id=usr.id_device WHERE usr.id=${id_user};{"token_fcm":"-","imsi":"-","longitude":"106.67900059372187","latitude":"-6.315207563380563","id_user":55}
DB:OK;SELECT id_location,(random()/10)-(random()/10)+${longitude} AS random_longitude,(random()/10)-(random()/10)+${latitude} AS random_latitude FROM table_store;{"token_fcm":"-","imsi":"-","longitude":"106.67900059372187","latitude":"-6.315207563380563","id_user":55,"id_location":"162","id_device":"25"}
RESULT 200: {"data":[{"id_location":"10","random_longitude":106.716486556176,"random_latitude":-6.28803059951667},{"id_location":"20","random_longitude":106.661708184332,"random_latitude":-6.29172118691992},{"id_location":"30","random_longitude":106.658008912578,"random_latitude":-6.37117721540187},{"id_location":"40","random_longitude":106.676465480169,"random_latitude":-6.2909833045144},{"id_location":"50","random_longitude":106.703115170682,"random_latitude":-6.22218972094622},{"id_location":"60","random_longitude":106.73913046564,"random_latitude":-6.36180964800794},{"id_location":"70","random_longitude":106.630776030384,"random_latitude":-6.2939139447574},{"id_location":"80","random_longitude":106.684044033336,"random_latitude":-6.33280008206409},{"id_location":"90","random_longitude":106.709108824469,"random_latitude":-6.30581100964252},{"id_location":"100","random_longitude":106.726563749276,"random_latitude":-6.23738201641742}]}
[0mPOST /api/token/update [32m200 [0m10.273 ms - 938[0m
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.726563749276 -6.23738201641742)') WHERE id=${id_location};{"id_location":"100","random_longitude":106.726563749276,"random_latitude":-6.23738201641742}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.716486556176 -6.28803059951667)') WHERE id=${id_location};{"id_location":"10","random_longitude":106.716486556176,"random_latitude":-6.28803059951667}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.658008912578 -6.37117721540187)') WHERE id=${id_location};{"id_location":"30","random_longitude":106.658008912578,"random_latitude":-6.37117721540187}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.661708184332 -6.29172118691992)') WHERE id=${id_location};{"id_location":"20","random_longitude":106.661708184332,"random_latitude":-6.29172118691992}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.703115170682 -6.22218972094622)') WHERE id=${id_location};{"id_location":"50","random_longitude":106.703115170682,"random_latitude":-6.22218972094622}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.676465480169 -6.2909833045144)') WHERE id=${id_location};{"id_location":"40","random_longitude":106.676465480169,"random_latitude":-6.2909833045144}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.73913046564 -6.36180964800794)') WHERE id=${id_location};{"id_location":"60","random_longitude":106.73913046564,"random_latitude":-6.36180964800794}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.630776030384 -6.2939139447574)') WHERE id=${id_location};{"id_location":"70","random_longitude":106.630776030384,"random_latitude":-6.2939139447574}
DB:OK;UPDATE table_device SET token_fcm=${token_fcm}, imsi=${imsi} WHERE id=${id_device};{"token_fcm":"-","imsi":"-","longitude":"106.67900059372187","latitude":"-6.315207563380563","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.67900059372187 -6.315207563380563)') WHERE id=${id_location};{"token_fcm":"-","imsi":"-","longitude":"106.67900059372187","latitude":"-6.315207563380563","id_user":55,"id_location":"162","id_device":"25"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.709108824469 -6.30581100964252)') WHERE id=${id_location};{"id_location":"90","random_longitude":106.709108824469,"random_latitude":-6.30581100964252}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.684044033336 -6.33280008206409)') WHERE id=${id_location};{"id_location":"80","random_longitude":106.684044033336,"random_latitude":-6.33280008206409}
API Cluster worker id: 2
REQUESTING PATH /store/nearby;GET;1477291320466
CHECKING API TOKEN YKlFi4c6qPJiuDQ89D0/K404+M1GNlW7fWAl/MqQO3IlHQToibWMeF0ymVwNtdKfAg6FazKJMZ4U+reb5vHJMwvNZbDJ6/sx9uIMKHkewTqpl2NoGVipd2UBAL97AWlfPt5JuYUMNy7jtQPXlaf7+tIkviYWcn+7N8RCMJ4VcHXzfZqr48Z0fdNN8q6Y5nrpwdlCEbb6129+HxIFqpeKOcUrfHKGZKZJYcjVfUw4QKFAquwrtKI2fYt1fQulbNy3/GfUpBk+EmBPqJE26MNyci/KRP34zrCr+HN3O9+tcHt+33SFAMDw2zutUAkjUVek00c89oUXRYjwQgOySBXPhQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291336676,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291336676,"lang":2}; TAG START 1477291320466
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING longitude
CHECKING latitude
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT store.*,rating.counted AS rating,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude,ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67900059372187 -6.315207563380563)')) AS distance_db,${distance} AS distance_max_meter 
		FROM table_store grouping
		LEFT JOIN table_store store ON store.id=grouping.id
		LEFT JOIN table_location_gps location ON location.id=store.id_location
		LEFT JOIN (SELECT AVG(rating) AS counted, id_store FROM table_store_rating GROUP BY id_store) rating ON rating.id_store=store.id
		WHERE ST_DWithin(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67900059372187 -6.315207563380563)'), ${distance})
		ORDER BY ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.67900059372187 -6.315207563380563)')) ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		;{"longitude":"106.67900059372187","latitude":"-6.315207563380563","distance":"3000","page_go":0,"page_max":null,"id_user":55}
PAGINATION DATA: [{"no":"1","total":"2","id":"8","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 8","address":"Store Address 8","phone":"Store Phone 8","is_delete":false,"id_location":"80","id_schedule":"8","rating":null,"location_longitude":106.684044033336,"location_latitude":-6.33280008206409,"distance_db":2023.96752683,"distance_max_meter":"3000","maxno":"2"},{"no":"2","total":"2","id":"4","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 4","address":"Store Address 4","phone":"Store Phone 4","is_delete":false,"id_location":"40","id_schedule":"4","rating":null,"location_longitude":106.676465480169,"location_latitude":-6.2909833045144,"distance_db":2693.550587917,"distance_max_meter":"3000","maxno":"2"}]
HALO {"store_nearby":[{"id":"8","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 8","address":"Store Address 8","phone":"Store Phone 8","is_delete":false,"id_location":"80","id_schedule":"8","rating":null,"location_longitude":106.684044033336,"location_latitude":-6.33280008206409,"distance_db":2023.96752683,"distance_max_meter":"3000"},{"id":"4","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 4","address":"Store Address 4","phone":"Store Phone 4","is_delete":false,"id_location":"40","id_schedule":"4","rating":null,"location_longitude":106.676465480169,"location_latitude":-6.2909833045144,"distance_db":2693.550587917,"distance_max_meter":"3000"}],"pagination":{"page_go":"#"}}
ERR:null
DONE:{"status":200,"headers":{"content-type":"application/json; charset=UTF-8","date":"Mon, 24 Oct 2016 06:42:00 GMT","expires":"Tue, 25 Oct 2016 06:42:00 GMT","cache-control":"public, max-age=86400","server":"mafe","x-xss-protection":"1; mode=block","x-frame-options":"SAMEORIGIN","alt-svc":"quic=\":443\"; ma=2592000; v=\"36,35,34\"","accept-ranges":"none","vary":"Accept-Encoding","connection":"close"},"json":{"destination_addresses":["Jalan Nn No.26, Rw. Buntu, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia"],"origin_addresses":["Jl. Setapak No.39, Setu, Kota Tangerang Selatan, Banten 15314, Indonesia","Jl. Teratai, Lengkong Gudang, Serpong, Kota Tangerang Selatan, Banten 15310, Indonesia"],"rows":[{"elements":[{"distance":{"text":"2.5 km","value":2459},"duration":{"text":"8 mins","value":465},"status":"OK"}]},{"elements":[{"distance":{"text":"5.2 km","value":5170},"duration":{"text":"13 mins","value":757},"status":"OK"}]}],"status":"OK"}}
ELEMENTS:[{"distance":{"text":"2.5 km","value":2459},"duration":{"text":"8 mins","value":465},"status":"OK"}]
RESULT 200: {"store_nearby":[{"id":"8","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 8","address":"Store Address 8","phone":"Store Phone 8","is_delete":false,"id_location":"80","id_schedule":"8","rating":null,"location_longitude":106.684044033336,"location_latitude":-6.33280008206409,"distance_db":2023.96752683,"distance_max_meter":"3000","distance_google":2459},{"id":"4","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 4","address":"Store Address 4","phone":"Store Phone 4","is_delete":false,"id_location":"40","id_schedule":"4","rating":null,"location_longitude":106.676465480169,"location_latitude":-6.2909833045144,"distance_db":2693.550587917,"distance_max_meter":"3000","distance_google":5170}],"pagination":{"page_go":"#"}}
[0mGET /api/store/nearby?longitude=106.67900059372187&latitude=-6.315207563380563 [32m200 [0m108.179 ms - 747[0m
API Cluster worker id: 2
REQUESTING PATH /user/register/dummy;POST;1477292182713
CHECKING API TOKEN 
CHECKING API ROLE
ERR API {}
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING language
CHECKING longitude
CHECKING latitude
CHECKING imei
CHECKING model
CHECKING os
IS_ERR false
DB:OK;INSERT INTO table_location_gps (name,description,geom_location) VALUES ('Dummy registration',${username},ST_GeographyFromText('SRID=4326;POINT(106.8233226 -6.2238219)')) RETURNING id;{"imsi":null,"imei":"867634027231628","username":"potentialbuyer14772921827153IVGQ","password":"potentialbuyer14772921827153IVGQ","mode":"buyer","language":"en","longitude":"106.8233226","latitude":"-6.2238219","model":"Mi 4i","os":"21","id_role":"3","id_language":"2"}
DB:OK;INSERT INTO table_device (imei,imsi,model,os,id_location) VALUES (${imei},${imsi},${model},${os},${id_location}) RETURNING id;{"imsi":null,"imei":"867634027231628","username":"potentialbuyer14772921827153IVGQ","password":"potentialbuyer14772921827153IVGQ","mode":"buyer","language":"en","longitude":"106.8233226","latitude":"-6.2238219","model":"Mi 4i","os":"21","id_role":"3","id_language":"2","id_location":"169"}
DB:OK;INSERT INTO table_user (username,password,id_role,id_language,id_device) VALUES (${username},MD5(${password}),${id_role},${id_language},${id_device}) RETURNING *;{"imsi":null,"imei":"867634027231628","username":"potentialbuyer14772921827153IVGQ","password":"potentialbuyer14772921827153IVGQ","mode":"buyer","language":"en","longitude":"106.8233226","latitude":"-6.2238219","model":"Mi 4i","os":"21","id_role":"3","id_language":"2","id_location":"169","id_device":"26"}
DB:OK;
		SELECT usr.*,NOW() AS time_update, 
		store.id AS store_id,store.name AS store_name,store.address AS store_address,store.phone AS store_phone,
		rekening.id AS rekening_id,rekening.name_bank AS rekening_name,rekening.name_owner AS rekening_owner,rekening.no_rekening AS rekening_number,
		ST_X(location.geom_location::geometry) AS store_longitude,ST_Y(location.geom_location::geometry) AS store_latitude,
		schedule.time_open AS store_time_open,schedule.time_close AS store_time_close, schedule.sun AS store_sun, schedule.mon AS store_mon, schedule.tue AS store_tue, schedule.wed AS store_wed, schedule.thu AS store_thu,schedule.fri AS store_fri, schedule.sat AS store_sat
		FROM table_user usr 
		LEFT JOIN table_store store ON store.id=usr.id_store
		LEFT JOIN table_location_gps location ON location.id=store.id_location
		LEFT JOIN table_rekening rekening ON rekening.id=usr.id_rekening
		LEFT JOIN table_schedule schedule ON schedule.id=store.id_schedule
		WHERE usr.username=${username};{"imsi":null,"imei":"867634027231628","username":"potentialbuyer14772921827153IVGQ","password":"potentialbuyer14772921827153IVGQ","mode":"buyer","language":"en","longitude":"106.8233226","latitude":"-6.2238219","model":"Mi 4i","os":"21","id_role":"3","id_language":"2","id_location":"169","id_device":"26"}
CREATE TOKEN 1477292182713;30000
READY
DB:OK;UPDATE table_user SET token_access=${token_access}, token_session=${token_session}, time_update=NOW(),is_login=TRUE WHERE id=${id};{"imsi":null,"imei":"867634027231628","username":"potentialbuyer14772921827153IVGQ","password":"potentialbuyer14772921827153IVGQ","mode":"buyer","language":"en","longitude":"106.8233226","latitude":"-6.2238219","model":"Mi 4i","os":"21","id_role":"3","id_language":"2","id_location":"169","id_device":"26","token_access":"Bj9vf+Q/PgsCXq+pBk3FcLhE5sUNmCLVl3cCJeHnUBmcBBDVltjleEbjgdQn8L0eLDctxcJOMwwqVELZTtX0qi7UyeO1UATYcl6kaghoPktn5SRVt7g+Xt0gzaM03dcyX9RRu79UplNlaQLBwfEvu/Juuzn5OkE660AiRO47QQ7ATmOFr3Lpx/2AW9pLH1GB01BR2dXzJHOvg2328s8iTsudIoCm+ht+6TVcPCroLYUcvs7R4latXBw9NvpKvbnex8Lky7UOumwjGSmqCtXF4+Lsyhz9sJI61N4EmmBB5CIlWQ4nEIZoJ9Ci99gxifukfJocFPplgv7oglJtUDbvxw==","token_session":"t9EplZaruQNeFGHF73h8yNVk1J/DXHw+W1iA2RH3OOsspyKcASRlaNwGJWBuM4juqHCQuEK2IsyniDeuVYNlntXM70oasFh7gD3IM5rO1iz7o4bFntH8CKpLsk2cB8ZtlnTO1GWAaAM5kPTroWdufOLxwJ1XJuyVJ6daXFo9CQDc4Ikguwa30aptFAfhrjoHE2ZUBQ+i+m+pJdRWHiuBHCmT+IEzUgzC57nRLcDgoYWgj4STnvpQozMoEB6Bc8pI6nHwRuja/fwWh9LB7wbsceg3Mv+NVjY2h75UOd7MiZ8wBUa/ji8BCr8ubpQ0mzb7KHHhIDlAa3tixFC/iLjlFQ==","id":"56"}
TOKEN UPDATED
DB:OK;SELECT * FROM table_fee_delivery ORDER BY distance DESC;undefined
RESULT 200: {"login":{"id":"56","username":"potentialbuyer14772921827153IVGQ","token_access":"Bj9vf+Q/PgsCXq+pBk3FcLhE5sUNmCLVl3cCJeHnUBmcBBDVltjleEbjgdQn8L0eLDctxcJOMwwqVELZTtX0qi7UyeO1UATYcl6kaghoPktn5SRVt7g+Xt0gzaM03dcyX9RRu79UplNlaQLBwfEvu/Juuzn5OkE660AiRO47QQ7ATmOFr3Lpx/2AW9pLH1GB01BR2dXzJHOvg2328s8iTsudIoCm+ht+6TVcPCroLYUcvs7R4latXBw9NvpKvbnex8Lky7UOumwjGSmqCtXF4+Lsyhz9sJI61N4EmmBB5CIlWQ4nEIZoJ9Ci99gxifukfJocFPplgv7oglJtUDbvxw==","token_session":"t9EplZaruQNeFGHF73h8yNVk1J/DXHw+W1iA2RH3OOsspyKcASRlaNwGJWBuM4juqHCQuEK2IsyniDeuVYNlntXM70oasFh7gD3IM5rO1iz7o4bFntH8CKpLsk2cB8ZtlnTO1GWAaAM5kPTroWdufOLxwJ1XJuyVJ6daXFo9CQDc4Ikguwa30aptFAfhrjoHE2ZUBQ+i+m+pJdRWHiuBHCmT+IEzUgzC57nRLcDgoYWgj4STnvpQozMoEB6Bc8pI6nHwRuja/fwWh9LB7wbsceg3Mv+NVjY2h75UOd7MiZ8wBUa/ji8BCr8ubpQ0mzb7KHHhIDlAa3tixFC/iLjlFQ==","time_create":"2016-10-24T06:56:22.740Z","time_update":"2016-10-24T06:56:22.746Z","avatar":null,"is_active":true,"name":null,"phone":null,"is_delete":false,"id_device":"26","saldo":"0","address":null,"role":"buyer","language":"en","rekening":{"id":null,"name":null,"owner":null,"number":null}},"settings":{"money_max_cashout":"10000000","is_discount_shipment":"TRUE","page_pagination":"25","key_googlemaps":"AIzaSyDnL8pHV_HPAmrSgzFuQm__trcIZ3atIqI","timer_auto_complete":"3","distance_max":"3000","language":"en","fee_delivery":[{"id":"5","distance":"5000","price":"5000"},{"id":"4","distance":"4000","price":"4000"},{"id":"3","distance":"3000","price":"3000"},{"id":"2","distance":"2000","price":"2000"},{"id":"1","distance":"1000","price":"1000"},{"id":"6","distance":"0","price":"0"}],"worker_special":"[1]","is_maintenance":"FALSE","time_max_delivery":"3","token_access_expire":"30000","money_max_topup":"10000000"}}
[0mPOST /api/user/register/dummy [32m200 [0m53.709 ms - 1711[0m
API Cluster worker id: 2
REQUESTING PATH /string/tos;GET;1477292183167
CHECKING API TOKEN Bj9vf+Q/PgsCXq+pBk3FcLhE5sUNmCLVl3cCJeHnUBmcBBDVltjleEbjgdQn8L0eLDctxcJOMwwqVELZTtX0qi7UyeO1UATYcl6kaghoPktn5SRVt7g+Xt0gzaM03dcyX9RRu79UplNlaQLBwfEvu/Juuzn5OkE660AiRO47QQ7ATmOFr3Lpx/2AW9pLH1GB01BR2dXzJHOvg2328s8iTsudIoCm+ht+6TVcPCroLYUcvs7R4latXBw9NvpKvbnex8Lky7UOumwjGSmqCtXF4+Lsyhz9sJI61N4EmmBB5CIlWQ4nEIZoJ9Ci99gxifukfJocFPplgv7oglJtUDbvxw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":56,"role":3,"exp":1477292212713,"lang":2}
TOKEN ACCESS {"id":56,"role":3,"exp":1477292212713,"lang":2}; TAG START 1477292183167
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
DB:OK;SELECT tos.* FROM table_string_tos tos LEFT JOIN (SELECT MAX(id) AS id FROM table_string_tos) maxtos ON maxtos.id=tos.id WHERE maxtos.id IS NOT NULL;undefined
RESULT 200: {"tos":{"id":"1","id_user":null,"content":"<b>Terms and condition</b>.<br>Ini adalah terms and condition yang belum lengkap. Keterangan masih sampai di sini. Silahkan dilanjutkan testing nya.<br>&#9658; &nbsp Ini adalah terms and condition yang belum lengkap. Keterangan masih sampai di sini. Silahkan dilanjutkan testing nya.<br>&#9658; &nbsp Ini adalah terms and condition yang belum lengkap. Keterangan masih sampai di sini. Silahkan dilanjutkan testing nya.<br>&#9658; &nbsp Ini adalah terms and condition yang belum lengkap. Keterangan masih sampai di sini. Silahkan dilanjutkan testing nya.<br>&#9658; &nbsp Ini adalah terms and condition yang belum lengkap. Keterangan masih sampai di sini. Silahkan dilanjutkan testing nya.<br>&#9658; &nbsp Ini adalah terms and condition yang belum lengkap. Keterangan masih sampai di sini. Silahkan dilanjutkan testing nya.<br>&#9658; &nbsp Ini adalah terms and condition yang belum lengkap. Keterangan masih sampai di sini. Silahkan dilanjutkan testing nya.<br>&#9658; &nbsp Ini adalah terms and condition yang belum lengkap. Keterangan masih sampai di sini. Silahkan dilanjutkan testing nya.<br>&#9658; &nbsp Ini adalah terms and condition yang belum lengkap. Keterangan masih sampai di sini. Silahkan dilanjutkan testing nya.<br>&#9658; &nbsp Ini adalah terms and condition yang belum lengkap. Keterangan masih sampai di sini. Silahkan dilanjutkan testing nya.<br>&#9658; &nbsp Ini adalah terms and condition yang belum lengkap. Keterangan masih sampai di sini. Silahkan dilanjutkan testing nya.<br>&#9658; &nbsp Ini adalah terms and condition yang belum lengkap. Keterangan masih sampai di sini. Silahkan dilanjutkan testing nya.<br>&#9658; &nbsp Ini adalah terms and condition yang belum lengkap. Keterangan masih sampai di sini. Silahkan dilanjutkan testing nya.<br>&#9658; &nbsp Ini adalah terms and condition yang belum lengkap. Keterangan masih sampai di sini. Silahkan dilanjutkan testing nya.<br>","time_create":"2016-10-23T08:03:59.538Z"}}
[0mGET /api/string/tos [32m200 [0m9.439 ms - 1994[0m
API Cluster worker id: 2
REQUESTING PATH /home/ads;GET;1477292184302
CHECKING API TOKEN Bj9vf+Q/PgsCXq+pBk3FcLhE5sUNmCLVl3cCJeHnUBmcBBDVltjleEbjgdQn8L0eLDctxcJOMwwqVELZTtX0qi7UyeO1UATYcl6kaghoPktn5SRVt7g+Xt0gzaM03dcyX9RRu79UplNlaQLBwfEvu/Juuzn5OkE660AiRO47QQ7ATmOFr3Lpx/2AW9pLH1GB01BR2dXzJHOvg2328s8iTsudIoCm+ht+6TVcPCroLYUcvs7R4latXBw9NvpKvbnex8Lky7UOumwjGSmqCtXF4+Lsyhz9sJI61N4EmmBB5CIlWQ4nEIZoJ9Ci99gxifukfJocFPplgv7oglJtUDbvxw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":56,"role":3,"exp":1477292212713,"lang":2}
TOKEN ACCESS {"id":56,"role":3,"exp":1477292212713,"lang":2}; TAG START 1477292184302
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
DB:OK;SELECT * FROM table_ads WHERE is_active=TRUE ORDER BY id ASC;undefined
RESULT 200: {"home_ads":[{"id":"1","id_user":null,"time_create":"2016-10-23T08:04:04.099Z","ads":[{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"}],"is_active":true},{"id":"2","id_user":null,"time_create":"2016-10-23T08:04:04.100Z","ads":[{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"}],"is_active":true},{"id":"3","id_user":null,"time_create":"2016-10-23T08:04:04.101Z","ads":[{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"}],"is_active":true}]}
[0mGET /api/home/ads [32m200 [0m14.370 ms - 3170[0m
[0mGET /images/slide3.jpg [32m200 [0m2.149 ms - 20354[0m
[0mGET /images/slide1.jpg [32m200 [0m1.562 ms - 145554[0m
[0mGET /images/slide2.jpg [32m200 [0m2.059 ms - 93324[0m
API Cluster worker id: 2
REQUESTING PATH /token/update;POST;1477292191073
CHECKING API TOKEN Bj9vf+Q/PgsCXq+pBk3FcLhE5sUNmCLVl3cCJeHnUBmcBBDVltjleEbjgdQn8L0eLDctxcJOMwwqVELZTtX0qi7UyeO1UATYcl6kaghoPktn5SRVt7g+Xt0gzaM03dcyX9RRu79UplNlaQLBwfEvu/Juuzn5OkE660AiRO47QQ7ATmOFr3Lpx/2AW9pLH1GB01BR2dXzJHOvg2328s8iTsudIoCm+ht+6TVcPCroLYUcvs7R4latXBw9NvpKvbnex8Lky7UOumwjGSmqCtXF4+Lsyhz9sJI61N4EmmBB5CIlWQ4nEIZoJ9Ci99gxifukfJocFPplgv7oglJtUDbvxw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":56,"role":3,"exp":1477292212713,"lang":2}
TOKEN ACCESS {"id":56,"role":3,"exp":1477292212713,"lang":2}; TAG START 1477292191073
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_fcm
CHECKING imsi
CHECKING longitude
CHECKING latitude
IS_ERR false
DB:OK;SELECT device.id_location,usr.id_device FROM table_user usr LEFT JOIN table_device device ON device.id=usr.id_device WHERE usr.id=${id_user};{"token_fcm":"-","imsi":"-","longitude":"106.82332254946233","latitude":"-6.2238220242516205","id_user":56}
DB:OK;SELECT id_location,(random()/10)-(random()/10)+${longitude} AS random_longitude,(random()/10)-(random()/10)+${latitude} AS random_latitude FROM table_store;{"token_fcm":"-","imsi":"-","longitude":"106.82332254946233","latitude":"-6.2238220242516205","id_user":56,"id_location":"169","id_device":"26"}
RESULT 200: {"data":[{"id_location":"10","random_longitude":106.838718541106,"random_latitude":-6.19809689733322},{"id_location":"20","random_longitude":106.805355732888,"random_latitude":-6.20279636580619},{"id_location":"30","random_longitude":106.849173291493,"random_latitude":-6.21986962912726},{"id_location":"40","random_longitude":106.864084766433,"random_latitude":-6.17493684419553},{"id_location":"50","random_longitude":106.811120949546,"random_latitude":-6.2351555415162},{"id_location":"60","random_longitude":106.836586319283,"random_latitude":-6.22638263299252},{"id_location":"70","random_longitude":106.885871201847,"random_latitude":-6.24778930593404},{"id_location":"80","random_longitude":106.810048894398,"random_latitude":-6.26357098563696},{"id_location":"90","random_longitude":106.814673559694,"random_latitude":-6.22334113784256},{"id_location":"100","random_longitude":106.824065186176,"random_latitude":-6.28764730619388}]}
[0mPOST /api/token/update [32m200 [0m14.279 ms - 940[0m
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.838718541106 -6.19809689733322)') WHERE id=${id_location};{"id_location":"10","random_longitude":106.838718541106,"random_latitude":-6.19809689733322}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.849173291493 -6.21986962912726)') WHERE id=${id_location};{"id_location":"30","random_longitude":106.849173291493,"random_latitude":-6.21986962912726}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.805355732888 -6.20279636580619)') WHERE id=${id_location};{"id_location":"20","random_longitude":106.805355732888,"random_latitude":-6.20279636580619}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.864084766433 -6.17493684419553)') WHERE id=${id_location};{"id_location":"40","random_longitude":106.864084766433,"random_latitude":-6.17493684419553}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.811120949546 -6.2351555415162)') WHERE id=${id_location};{"id_location":"50","random_longitude":106.811120949546,"random_latitude":-6.2351555415162}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.836586319283 -6.22638263299252)') WHERE id=${id_location};{"id_location":"60","random_longitude":106.836586319283,"random_latitude":-6.22638263299252}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.885871201847 -6.24778930593404)') WHERE id=${id_location};{"id_location":"70","random_longitude":106.885871201847,"random_latitude":-6.24778930593404}
DB:OK;UPDATE table_device SET token_fcm=${token_fcm}, imsi=${imsi} WHERE id=${id_device};{"token_fcm":"-","imsi":"-","longitude":"106.82332254946233","latitude":"-6.2238220242516205","id_user":56,"id_location":"169","id_device":"26"}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.824065186176 -6.28764730619388)') WHERE id=${id_location};{"id_location":"100","random_longitude":106.824065186176,"random_latitude":-6.28764730619388}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.810048894398 -6.26357098563696)') WHERE id=${id_location};{"id_location":"80","random_longitude":106.810048894398,"random_latitude":-6.26357098563696}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.814673559694 -6.22334113784256)') WHERE id=${id_location};{"id_location":"90","random_longitude":106.814673559694,"random_latitude":-6.22334113784256}
DB:OK;UPDATE table_location_gps SET geom_location=ST_GeographyFromText('SRID=4326;POINT(106.82332254946233 -6.2238220242516205)') WHERE id=${id_location};{"token_fcm":"-","imsi":"-","longitude":"106.82332254946233","latitude":"-6.2238220242516205","id_user":56,"id_location":"169","id_device":"26"}
API Cluster worker id: 2
REQUESTING PATH /store/nearby;GET;1477292191199
CHECKING API TOKEN Bj9vf+Q/PgsCXq+pBk3FcLhE5sUNmCLVl3cCJeHnUBmcBBDVltjleEbjgdQn8L0eLDctxcJOMwwqVELZTtX0qi7UyeO1UATYcl6kaghoPktn5SRVt7g+Xt0gzaM03dcyX9RRu79UplNlaQLBwfEvu/Juuzn5OkE660AiRO47QQ7ATmOFr3Lpx/2AW9pLH1GB01BR2dXzJHOvg2328s8iTsudIoCm+ht+6TVcPCroLYUcvs7R4latXBw9NvpKvbnex8Lky7UOumwjGSmqCtXF4+Lsyhz9sJI61N4EmmBB5CIlWQ4nEIZoJ9Ci99gxifukfJocFPplgv7oglJtUDbvxw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":56,"role":3,"exp":1477292212713,"lang":2}
TOKEN ACCESS {"id":56,"role":3,"exp":1477292212713,"lang":2}; TAG START 1477292191199
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING longitude
CHECKING latitude
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT store.*,rating.counted AS rating,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude,ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.82332254946233 -6.2238220242516205)')) AS distance_db,${distance} AS distance_max_meter 
		FROM table_store grouping
		LEFT JOIN table_store store ON store.id=grouping.id
		LEFT JOIN table_location_gps location ON location.id=store.id_location
		LEFT JOIN (SELECT AVG(rating) AS counted, id_store FROM table_store_rating GROUP BY id_store) rating ON rating.id_store=store.id
		WHERE ST_DWithin(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.82332254946233 -6.2238220242516205)'), ${distance})
		ORDER BY ST_Distance(location.geom_location, ST_GeographyFromText('SRID=4326;POINT(106.82332254946233 -6.2238220242516205)')) ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		;{"longitude":"106.82332254946233","latitude":"-6.2238220242516205","distance":"3000","page_go":0,"page_max":null,"id_user":56}
PAGINATION DATA: [{"no":"1","total":"4","id":"9","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 9","address":"Store Address 9","phone":"Store Phone 9","is_delete":false,"id_location":"90","id_schedule":"9","rating":null,"location_longitude":106.814673559694,"location_latitude":-6.22334113784256,"distance_db":958.64065117,"distance_max_meter":"3000","maxno":"4"},{"no":"2","total":"4","id":"6","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 6","address":"Store Address 6","phone":"Store Phone 6","is_delete":false,"id_location":"60","id_schedule":"6","rating":null,"location_longitude":106.836586319283,"location_latitude":-6.22638263299252,"distance_db":1494.931857858,"distance_max_meter":"3000","maxno":"4"},{"no":"3","total":"4","id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","rating":null,"location_longitude":106.811120949546,"location_latitude":-6.2351555415162,"distance_db":1842.336621643,"distance_max_meter":"3000","maxno":"4"},{"no":"4","total":"4","id":"3","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 3","address":"Store Address 3","phone":"Store Phone 3","is_delete":false,"id_location":"30","id_schedule":"3","rating":null,"location_longitude":106.849173291493,"location_latitude":-6.21986962912726,"distance_db":2894.050068062,"distance_max_meter":"3000","maxno":"4"}]
HALO {"store_nearby":[{"id":"9","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 9","address":"Store Address 9","phone":"Store Phone 9","is_delete":false,"id_location":"90","id_schedule":"9","rating":null,"location_longitude":106.814673559694,"location_latitude":-6.22334113784256,"distance_db":958.64065117,"distance_max_meter":"3000"},{"id":"6","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 6","address":"Store Address 6","phone":"Store Phone 6","is_delete":false,"id_location":"60","id_schedule":"6","rating":null,"location_longitude":106.836586319283,"location_latitude":-6.22638263299252,"distance_db":1494.931857858,"distance_max_meter":"3000"},{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","rating":null,"location_longitude":106.811120949546,"location_latitude":-6.2351555415162,"distance_db":1842.336621643,"distance_max_meter":"3000"},{"id":"3","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 3","address":"Store Address 3","phone":"Store Phone 3","is_delete":false,"id_location":"30","id_schedule":"3","rating":null,"location_longitude":106.849173291493,"location_latitude":-6.21986962912726,"distance_db":2894.050068062,"distance_max_meter":"3000"}],"pagination":{"page_go":"#"}}
ERR:null
DONE:{"status":200,"headers":{"content-type":"application/json; charset=UTF-8","date":"Mon, 24 Oct 2016 06:56:31 GMT","expires":"Tue, 25 Oct 2016 06:56:31 GMT","cache-control":"public, max-age=86400","server":"mafe","x-xss-protection":"1; mode=block","x-frame-options":"SAMEORIGIN","alt-svc":"quic=\":443\"; ma=2592000; v=\"36,35,34\"","accept-ranges":"none","vary":"Accept-Encoding","connection":"close"},"json":{"destination_addresses":["Jl. Prof. DR. Satrio No.5, Karet Kuningan, Kecamatan Setiabudi, Kota Jakarta Selatan, Daerah Khusus Ibukota Jakarta 12940, Indonesia"],"origin_addresses":["Jl. Jend. Gatot Subroto No.217, Senayan, Kby. Baru, Kota Jakarta Selatan, Daerah Khusus Ibukota Jakarta 12190, Indonesia","Jl. N No.78, Menteng Dalam, Tebet, Kota Jakarta Selatan, Daerah Khusus Ibukota Jakarta 12870, Indonesia","Jl. Cibeber II No.4, Rw. Bar., Kby. Baru, Kota Jakarta Selatan, Daerah Khusus Ibukota Jakarta 12180, Indonesia","Jl. Manggis I No.3, Manggarai Sel., Tebet, Kota Jakarta Selatan, Daerah Khusus Ibukota Jakarta 12860, Indonesia"],"rows":[{"elements":[{"distance":{"text":"4.9 km","value":4900},"duration":{"text":"12 mins","value":702},"status":"OK"}]},{"elements":[{"distance":{"text":"1.5 km","value":1513},"duration":{"text":"4 mins","value":216},"status":"OK"}]},{"elements":[{"distance":{"text":"7.8 km","value":7770},"duration":{"text":"20 mins","value":1178},"status":"OK"}]},{"elements":[{"distance":{"text":"4.8 km","value":4806},"duration":{"text":"13 mins","value":767},"status":"OK"}]}],"status":"OK"}}
ELEMENTS:[{"distance":{"text":"4.9 km","value":4900},"duration":{"text":"12 mins","value":702},"status":"OK"}]
RESULT 200: {"store_nearby":[{"id":"6","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 6","address":"Store Address 6","phone":"Store Phone 6","is_delete":false,"id_location":"60","id_schedule":"6","rating":null,"location_longitude":106.836586319283,"location_latitude":-6.22638263299252,"distance_db":1494.931857858,"distance_max_meter":"3000","distance_google":1513},{"id":"3","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 3","address":"Store Address 3","phone":"Store Phone 3","is_delete":false,"id_location":"30","id_schedule":"3","rating":null,"location_longitude":106.849173291493,"location_latitude":-6.21986962912726,"distance_db":2894.050068062,"distance_max_meter":"3000","distance_google":4806},{"id":"9","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 9","address":"Store Address 9","phone":"Store Phone 9","is_delete":false,"id_location":"90","id_schedule":"9","rating":null,"location_longitude":106.814673559694,"location_latitude":-6.22334113784256,"distance_db":958.64065117,"distance_max_meter":"3000","distance_google":4900},{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","rating":null,"location_longitude":106.811120949546,"location_latitude":-6.2351555415162,"distance_db":1842.336621643,"distance_max_meter":"3000","distance_google":7770}],"pagination":{"page_go":"#"}}
[0mGET /api/store/nearby?longitude=106.82332254946233&latitude=-6.2238220242516205 [32m200 [0m96.705 ms - 1448[0m
API Cluster worker id: 2
REQUESTING PATH /location;PUT;1477292197887
CHECKING API TOKEN Bj9vf+Q/PgsCXq+pBk3FcLhE5sUNmCLVl3cCJeHnUBmcBBDVltjleEbjgdQn8L0eLDctxcJOMwwqVELZTtX0qi7UyeO1UATYcl6kaghoPktn5SRVt7g+Xt0gzaM03dcyX9RRu79UplNlaQLBwfEvu/Juuzn5OkE660AiRO47QQ7ATmOFr3Lpx/2AW9pLH1GB01BR2dXzJHOvg2328s8iTsudIoCm+ht+6TVcPCroLYUcvs7R4latXBw9NvpKvbnex8Lky7UOumwjGSmqCtXF4+Lsyhz9sJI61N4EmmBB5CIlWQ4nEIZoJ9Ci99gxifukfJocFPplgv7oglJtUDbvxw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":56,"role":3,"exp":1477292212713,"lang":2}
TOKEN ACCESS {"id":56,"role":3,"exp":1477292212713,"lang":2}; TAG START 1477292197887
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;PUT
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING address
CHECKING longitude
CHECKING latitude
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;INSERT INTO table_location_gps (name,id_user,geom_location) VALUES (${address},${id_user},ST_GeographyFromText('SRID=4326;POINT(106.82332254946233 -6.2238220242516205)')) RETURNING id;{"address":"Jalan Professor Doktor Satrio No.1, Setiabudi, Special Capital Region of Jakarta, Indonesia, 12940","latitude":"-6.2238220242516205","longitude":"106.82332254946233","id_user":56}
RESULT 200: {"location":{"id":"170"}}
[0mPUT /api/location?address=Jalan%20Professor%20Doktor%20Satrio%20No.1,%20Setiabudi,%20Special%20Capital%20Region%20of%20Jakarta,%20Indonesia,%2012940&latitude=-6.2238220242516205&longitude=106.82332254946233 [32m200 [0m24.538 ms - 25[0m
API Cluster worker id: 2
REQUESTING PATH /store/9/product;GET;1477292204012
CHECKING API TOKEN Bj9vf+Q/PgsCXq+pBk3FcLhE5sUNmCLVl3cCJeHnUBmcBBDVltjleEbjgdQn8L0eLDctxcJOMwwqVELZTtX0qi7UyeO1UATYcl6kaghoPktn5SRVt7g+Xt0gzaM03dcyX9RRu79UplNlaQLBwfEvu/Juuzn5OkE660AiRO47QQ7ATmOFr3Lpx/2AW9pLH1GB01BR2dXzJHOvg2328s8iTsudIoCm+ht+6TVcPCroLYUcvs7R4latXBw9NvpKvbnex8Lky7UOumwjGSmqCtXF4+Lsyhz9sJI61N4EmmBB5CIlWQ4nEIZoJ9Ci99gxifukfJocFPplgv7oglJtUDbvxw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":56,"role":3,"exp":1477292212713,"lang":2}
TOKEN ACCESS {"id":56,"role":3,"exp":1477292212713,"lang":2}; TAG START 1477292204012
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
product query 
Full text search 
DB:OK;
		SELECT raw.*, MAX(raw.no) OVER() AS maxno
		FROM 
		(
			SELECT row_number() OVER() AS no, count(*) OVER() AS total, raw.*
			FROM (
		SELECT product.*,trolley.qty AS trolley_qty 
		FROM table_product_category category
		LEFT JOIN table_product product ON product.id_category=category.id
		LEFT JOIN (SELECT * FROM table_trolley WHERE id_user=56) trolley ON trolley.id_product=product.id
		WHERE category.id_store=9  
		ORDER BY product.id ASC) raw
		) raw 
		WHERE raw.no > ${page_go}  
		LIMIT ${page_max} OFFSET 0;{"search":"","page_go":0,"page_max":25,"id_user":56}
PAGINATION DATA: [{"no":"1","total":"10","id":"7","id_category":"90","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"90","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null,"maxno":"10"},{"no":"2","total":"10","id":"13","id_category":"81","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"81","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null,"maxno":"10"},{"no":"3","total":"10","id":"24","id_category":"82","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"82","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null,"maxno":"10"},{"no":"4","total":"10","id":"39","id_category":"83","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"83","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null,"maxno":"10"},{"no":"5","total":"10","id":"48","id_category":"84","name":"Cat Nippon Paint","description":"Cat Nippon Paint","time_create":"2016-10-23T08:04:04.112Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat1.png","price":"84","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null,"maxno":"10"},{"no":"6","total":"10","id":"60","id_category":"85","name":"Cat Catylac","description":"Cat Catylac","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat2.png","price":"85","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null,"maxno":"10"},{"no":"7","total":"10","id":"68","id_category":"86","name":"Sink Elite","description":"Sink Elite","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink1.jpg","price":"86","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null,"maxno":"10"},{"no":"8","total":"10","id":"76","id_category":"87","name":"Sink American Standard","description":"Sink American Standard","time_create":"2016-10-23T08:04:04.114Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink2.jpg","price":"87","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null,"maxno":"10"},{"no":"9","total":"10","id":"87","id_category":"88","name":"Bata Merah","description":"Bata Merah","time_create":"2016-10-23T08:04:04.115Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata1.jpg","price":"88","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null,"maxno":"10"},{"no":"10","total":"10","id":"99","id_category":"89","name":"Bata Ringan","description":"Bata Ringan","time_create":"2016-10-23T08:04:04.116Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata2.jpg","price":"89","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null,"maxno":"10"}]
TERIMA DATA {"products":[{"id":"7","id_category":"90","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"90","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null},{"id":"13","id_category":"81","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"81","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null},{"id":"24","id_category":"82","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"82","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"39","id_category":"83","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"83","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"48","id_category":"84","name":"Cat Nippon Paint","description":"Cat Nippon Paint","time_create":"2016-10-23T08:04:04.112Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat1.png","price":"84","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"60","id_category":"85","name":"Cat Catylac","description":"Cat Catylac","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat2.png","price":"85","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"68","id_category":"86","name":"Sink Elite","description":"Sink Elite","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink1.jpg","price":"86","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"76","id_category":"87","name":"Sink American Standard","description":"Sink American Standard","time_create":"2016-10-23T08:04:04.114Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink2.jpg","price":"87","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"87","id_category":"88","name":"Bata Merah","description":"Bata Merah","time_create":"2016-10-23T08:04:04.115Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata1.jpg","price":"88","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null},{"id":"99","id_category":"89","name":"Bata Ringan","description":"Bata Ringan","time_create":"2016-10-23T08:04:04.116Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata2.jpg","price":"89","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null}],"pagination":{"page_go":"#"}}
RESULT 200: {"products":[{"id":"7","id_category":"90","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"90","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null},{"id":"13","id_category":"81","name":"Semen Gresik","description":"Semen Gresik","time_create":"2016-10-23T08:04:04.109Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen2.jpg","price":"81","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":null},{"id":"24","id_category":"82","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"82","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"39","id_category":"83","name":"Genteng Kanmuri","description":"Genteng Kanmuri","time_create":"2016-10-23T08:04:04.111Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng2.jpg","price":"83","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":null},{"id":"48","id_category":"84","name":"Cat Nippon Paint","description":"Cat Nippon Paint","time_create":"2016-10-23T08:04:04.112Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat1.png","price":"84","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"60","id_category":"85","name":"Cat Catylac","description":"Cat Catylac","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/cat2.png","price":"85","unit":"kaleng","packaging":"1 kaleng isi 5 liter","dimension":"25cm x 15cm","trolley_qty":null},{"id":"68","id_category":"86","name":"Sink Elite","description":"Sink Elite","time_create":"2016-10-23T08:04:04.113Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink1.jpg","price":"86","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"76","id_category":"87","name":"Sink American Standard","description":"Sink American Standard","time_create":"2016-10-23T08:04:04.114Z","is_delete":false,"avatar":"http://appku.id:3009/images/sink2.jpg","price":"87","unit":"unit","packaging":"1 unit","dimension":"2m x 1m","trolley_qty":null},{"id":"87","id_category":"88","name":"Bata Merah","description":"Bata Merah","time_create":"2016-10-23T08:04:04.115Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata1.jpg","price":"88","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null},{"id":"99","id_category":"89","name":"Bata Ringan","description":"Bata Ringan","time_create":"2016-10-23T08:04:04.116Z","is_delete":false,"avatar":"http://appku.id:3009/images/bata2.jpg","price":"89","unit":"truk","packaging":"1 truk isi 300","dimension":"10cm x 5cm","trolley_qty":null}],"pagination":{"page_go":"#"}}
[0mGET /api/store/9/product?search= [32m200 [0m19.107 ms - 2945[0m
[0mGET /images/semen1.png [32m200 [0m4.178 ms - 42042[0m
[0mGET /images/semen2.jpg [32m200 [0m5.569 ms - 22636[0m
[0mGET /images/genteng2.jpg [32m200 [0m4.782 ms - 18920[0m
[0mGET /images/genteng01.jpg [32m200 [0m6.308 ms - 87506[0m
API Cluster worker id: 2
REQUESTING PATH /trolley/24;PUT;1477292206018
CHECKING API TOKEN Bj9vf+Q/PgsCXq+pBk3FcLhE5sUNmCLVl3cCJeHnUBmcBBDVltjleEbjgdQn8L0eLDctxcJOMwwqVELZTtX0qi7UyeO1UATYcl6kaghoPktn5SRVt7g+Xt0gzaM03dcyX9RRu79UplNlaQLBwfEvu/Juuzn5OkE660AiRO47QQ7ATmOFr3Lpx/2AW9pLH1GB01BR2dXzJHOvg2328s8iTsudIoCm+ht+6TVcPCroLYUcvs7R4latXBw9NvpKvbnex8Lky7UOumwjGSmqCtXF4+Lsyhz9sJI61N4EmmBB5CIlWQ4nEIZoJ9Ci99gxifukfJocFPplgv7oglJtUDbvxw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":56,"role":3,"exp":1477292212713,"lang":2}
TOKEN ACCESS {"id":56,"role":3,"exp":1477292212713,"lang":2}; TAG START 1477292206018
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;PUT
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:FAIL;
		SELECT 
		trolley.id 
		FROM table_trolley trolley
		LEFT JOIN table_product product ON product.id=trolley.id_product
		LEFT JOIN table_product_category category ON category.id=product.id_category
		LEFT JOIN (SELECT category.id_store FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category WHERE product.id=${id_product}) wtadd ON wtadd.id_store!=category.id_store
		WHERE trolley.id_user=${id_user} AND wtadd.id_store IS NOT NULL;{"id_product":"24","id_user":56};{"name":"QueryResultError","stack":"QueryResultError: 0\n    at QueryResultError.Error (native)\n    at new QueryResultError (/root/development/xapps/xapps/node_modules/pg-promise/lib/errors/queryResult.js:121:22)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/lib/query.js:176:41)\n    at Query.handleReadyForQuery (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/query.js:106:10)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/client.js:163:19)\n    at emitOne (events.js:95:20)\n    at emit (events.js:182:7)\n    at Socket.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/connection.js:109:12)\n    at emitOne (events.js:90:13)\n    at Socket.emit (events.js:182:7)","message":"No data returned from the query.","code":0,"result":{"command":"SELECT","rowCount":0,"oid":null,"rows":[],"fields":[{"name":"id","tableID":20828,"columnID":1,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"}],"_parsers":[null],"rowAsArray":false,"duration":4},"query":"\n\t\tSELECT \n\t\ttrolley.id \n\t\tFROM table_trolley trolley\n\t\tLEFT JOIN table_product product ON product.id=trolley.id_product\n\t\tLEFT JOIN table_product_category category ON category.id=product.id_category\n\t\tLEFT JOIN (SELECT category.id_store FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category WHERE product.id='24') wtadd ON wtadd.id_store!=category.id_store\n\t\tWHERE trolley.id_user=56 AND wtadd.id_store IS NOT NULL","received":0}
DB:FAIL;UPDATE table_trolley SET qty=qty+1 WHERE id_product=${id_product} AND id_user=${id_user} RETURNING *;{"id_product":"24","id_user":56};{"name":"QueryResultError","stack":"QueryResultError: 0\n    at QueryResultError.Error (native)\n    at new QueryResultError (/root/development/xapps/xapps/node_modules/pg-promise/lib/errors/queryResult.js:121:22)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/lib/query.js:176:41)\n    at Query.handleReadyForQuery (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/query.js:106:10)\n    at null.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/client.js:163:19)\n    at emitOne (events.js:95:20)\n    at emit (events.js:182:7)\n    at Socket.<anonymous> (/root/development/xapps/xapps/node_modules/pg-promise/node_modules/pg/lib/connection.js:109:12)\n    at emitOne (events.js:90:13)\n    at Socket.emit (events.js:182:7)","message":"No data returned from the query.","code":0,"result":{"command":"UPDATE","rowCount":0,"oid":null,"rows":[],"fields":[{"name":"id","tableID":20828,"columnID":1,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"},{"name":"id_user","tableID":20828,"columnID":2,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"},{"name":"id_product","tableID":20828,"columnID":3,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"},{"name":"qty","tableID":20828,"columnID":4,"dataTypeID":20,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"},{"name":"time_create","tableID":20828,"columnID":5,"dataTypeID":1114,"dataTypeSize":8,"dataTypeModifier":-1,"format":"text"}],"_parsers":[null,null,null,null,null],"rowAsArray":false,"duration":1},"query":"UPDATE table_trolley SET qty=qty+1 WHERE id_product='24' AND id_user=56 RETURNING *","received":0}
DB:OK;INSERT INTO table_trolley (id_product,id_user,qty) VALUES (${id_product},${id_user},1) RETURNING *;{"id_product":"24","id_user":56}
RESULT 200: {"trolley":{"id":"124","id_user":"56","id_product":"24","qty":"1","time_create":"2016-10-24T06:56:46.032Z"}}
[0mPUT /api/trolley/24 [32m200 [0m19.690 ms - 108[0m
[0mGET /images/cat1.png [32m200 [0m1.429 ms - 236513[0m
API Cluster worker id: 2
REQUESTING PATH /trolley;GET;1477292207278
CHECKING API TOKEN Bj9vf+Q/PgsCXq+pBk3FcLhE5sUNmCLVl3cCJeHnUBmcBBDVltjleEbjgdQn8L0eLDctxcJOMwwqVELZTtX0qi7UyeO1UATYcl6kaghoPktn5SRVt7g+Xt0gzaM03dcyX9RRu79UplNlaQLBwfEvu/Juuzn5OkE660AiRO47QQ7ATmOFr3Lpx/2AW9pLH1GB01BR2dXzJHOvg2328s8iTsudIoCm+ht+6TVcPCroLYUcvs7R4latXBw9NvpKvbnex8Lky7UOumwjGSmqCtXF4+Lsyhz9sJI61N4EmmBB5CIlWQ4nEIZoJ9Ci99gxifukfJocFPplgv7oglJtUDbvxw==
CHECKING API ROLE
TOKEN_ACCESS:{"id":56,"role":3,"exp":1477292212713,"lang":2}
TOKEN ACCESS {"id":56,"role":3,"exp":1477292212713,"lang":2}; TAG START 1477292207278
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;SELECT product.*,trolley.qty AS trolley_qty FROM table_trolley trolley LEFT JOIN table_product product ON product.id=trolley.id_product WHERE trolley.id_user=${id_user};{"id_user":56}
DB:OK;SELECT store.*,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category LEFT JOIN table_store store ON store.id=category.id_store LEFT JOIN table_location_gps location ON location.id=store.id_location WHERE product.id=$1;"24"
[{"id":"24","id_category":"82","name":"Genteng Asoka","description":"Genteng Asoka","time_create":"2016-10-23T08:04:04.110Z","is_delete":false,"avatar":"http://appku.id:3009/images/genteng01.jpg","price":"82","unit":"koli","packaging":"1 koli isi 100","dimension":"20cm x 10cm","trolley_qty":"1"}]
{"id":"9","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 9","address":"Store Address 9","phone":"Store Phone 9","is_delete":false,"id_location":"90","id_schedule":"9","location_longitude":106.814673559694,"location_latitude":-6.22334113784256}
[ { id: '5', distance: '5000', price: '5000' },
  { id: '4', distance: '4000', price: '4000' },
  { id: '3', distance: '3000', price: '3000' },
  { id: '2', distance: '2000', price: '2000' },
  { id: '1', distance: '1000', price: '1000' },
  { id: '6', distance: '0', price: '0' } ]
DB:FAIL;SELECT store.*,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category LEFT JOIN table_store store ON store.id=category.id_store LEFT JOIN table_location_gps location ON location.id=store.id_location WHERE product.id=$1;"24";{}
RESULT 422: {"id":"Tidak dapat mengambil data troli","en":"Unable query trolley","cn":"n/a"}
LANGUAGE: {"money_max_cashout":"10000000","is_discount_shipment":"TRUE","page_pagination":"25","key_googlemaps":"AIzaSyDnL8pHV_HPAmrSgzFuQm__trcIZ3atIqI","timer_auto_complete":"3","distance_max":"3000","language":"en","fee_delivery":[{"id":"5","distance":"5000","price":"5000"},{"id":"4","distance":"4000","price":"4000"},{"id":"3","distance":"3000","price":"3000"},{"id":"2","distance":"2000","price":"2000"},{"id":"1","distance":"1000","price":"1000"},{"id":"6","distance":"0","price":"0"}],"worker_special":"[1]","is_maintenance":"FALSE","time_max_delivery":"3","token_access_expire":"30000","money_max_topup":"10000000"}
[0mGET /api/trolley [33m422 [0m37.639 ms - 45[0m
API Cluster worker id: 2
REQUESTING PATH /home/ads;GET;1477292278087
CHECKING API TOKEN YKlFi4c6qPJiuDQ89D0/K404+M1GNlW7fWAl/MqQO3IlHQToibWMeF0ymVwNtdKfAg6FazKJMZ4U+reb5vHJMwvNZbDJ6/sx9uIMKHkewTqpl2NoGVipd2UBAL97AWlfPt5JuYUMNy7jtQPXlaf7+tIkviYWcn+7N8RCMJ4VcHXzfZqr48Z0fdNN8q6Y5nrpwdlCEbb6129+HxIFqpeKOcUrfHKGZKZJYcjVfUw4QKFAquwrtKI2fYt1fQulbNy3/GfUpBk+EmBPqJE26MNyci/KRP34zrCr+HN3O9+tcHt+33SFAMDw2zutUAkjUVek00c89oUXRYjwQgOySBXPhQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291336676,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291336676,"lang":2}; TAG START 1477292278087
TOKEN EXPIRED
PAGE NOT IN EXPIRED TOKEN
RESULT 403.
[0mGET /api/home/ads [33m403 [0m4.014 ms - 2[0m
API Cluster worker id: 2
REQUESTING PATH /token/renew;POST;1477292278227
CHECKING API TOKEN YKlFi4c6qPJiuDQ89D0/K404+M1GNlW7fWAl/MqQO3IlHQToibWMeF0ymVwNtdKfAg6FazKJMZ4U+reb5vHJMwvNZbDJ6/sx9uIMKHkewTqpl2NoGVipd2UBAL97AWlfPt5JuYUMNy7jtQPXlaf7+tIkviYWcn+7N8RCMJ4VcHXzfZqr48Z0fdNN8q6Y5nrpwdlCEbb6129+HxIFqpeKOcUrfHKGZKZJYcjVfUw4QKFAquwrtKI2fYt1fQulbNy3/GfUpBk+EmBPqJE26MNyci/KRP34zrCr+HN3O9+tcHt+33SFAMDw2zutUAkjUVek00c89oUXRYjwQgOySBXPhQ==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477291336676,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477291336676,"lang":2}; TAG START 1477292278227
TOKEN EXPIRED
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:POST;POST
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
CHECKING token_session
IS_ERR false
NO COOKIES
COOKIES NOT AVAILABLE
DB:OK;SELECT token_session FROM table_user WHERE id=$1;55
TOKEN SESSION 
A5aW+EVh+2G9dQYQUqDnOwdYeQi0ehsxnVTK7sryQtB2CKyd2ci56eXq/97HiPoL1mb2cWgU98sCGsmmFJS7S4S9rFDtl8LrDZRQfwbSIIgQQNZfNIHfvHfhYJZrDmRMwJ6t5msq4QTYnntn8pbmAe5C+uhaznZkTyXipHXpJlfij3vh54h9/zVvedlcSZ9Q4LtHnL9DCcjCIHw4dQJOLz0BLAd//ViryGlAVaa+7EXOobQH+TxrAA7UpdYautySHg+ZtMlxs+wT7goumwSzChIOD1X41ABRbuouChU7cTLhKWTW1rsNRmZ8yjpyyks4SCmStG6IXga75oVeYUA0vg==
A5aW+EVh+2G9dQYQUqDnOwdYeQi0ehsxnVTK7sryQtB2CKyd2ci56eXq/97HiPoL1mb2cWgU98sCGsmmFJS7S4S9rFDtl8LrDZRQfwbSIIgQQNZfNIHfvHfhYJZrDmRMwJ6t5msq4QTYnntn8pbmAe5C+uhaznZkTyXipHXpJlfij3vh54h9/zVvedlcSZ9Q4LtHnL9DCcjCIHw4dQJOLz0BLAd//ViryGlAVaa+7EXOobQH+TxrAA7UpdYautySHg+ZtMlxs+wT7goumwSzChIOD1X41ABRbuouChU7cTLhKWTW1rsNRmZ8yjpyyks4SCmStG6IXga75oVeYUA0vg==
CREATE TOKEN 1477292278227;30000
DB:OK;UPDATE table_user SET token_session=${token_session}, token_access=${token_access} WHERE id=${id_user} RETURNING token_session,token_access;{"token_access":"V+ivsRHOzd3UVpjyUdGQp1iVNIZ6sjNrhFHyKPzlFBB3Ozau0cqYOCfAaykI8TqgesWY5yOguSMYuPwmMIkrYovS5BkxlLcrmRetfpbM4ItbjpYHhauO2U/UFm3LyrQHTxvicdiPv4bocRbzFdpfkYiSf/RKnlzdkAoSM/UWHNjSNGCRafmISvuJsi2hamRlufsMQusMxQK2XJDG4zwCQZlJtFboH9F1hhV8NLNggCP4RhPzrjOVTyZECYtw9zjyuy2767nhtMjURh0e1DQD4W7HeFlSz782lD9AXeZcNvzYc69gXkIbcTV7atzJTW9MnoD1o8R4Vdi7ZmZxMZ22eg==","token_session":"lLqhZnVu2bMVyoXpBbnUErQVXddb0xEHsn2F3l9ouIvPst9JfeKvIFk4h+r8ws237HEXMax04q0Mf21/CW1VhGPNR8gCcUcaOFgo0xijFICGbeSCXouSYI3xKx6Qh9qiJGZnmrIBqLOoGrgS2gjl1i7v8dR02dkI8tdUUpCYl064jvN10D1xGC1NDuIxPlKEmMpn46c2l56KxzeNZfTaR6HwgBbU9ooNUwLH3pCm85IR9sTTY55R0oxvHCMPSDY+9oSyl7rxxIb284Lp8bklIXjAQRK5Xhgro5TgaTCzKNudW/YrlXTsU718Erg8GaJ+KVT96vbS0UZF/lYw77VHNA==","id_user":55}
RESULT 200: {"token":{"token_access":"V+ivsRHOzd3UVpjyUdGQp1iVNIZ6sjNrhFHyKPzlFBB3Ozau0cqYOCfAaykI8TqgesWY5yOguSMYuPwmMIkrYovS5BkxlLcrmRetfpbM4ItbjpYHhauO2U/UFm3LyrQHTxvicdiPv4bocRbzFdpfkYiSf/RKnlzdkAoSM/UWHNjSNGCRafmISvuJsi2hamRlufsMQusMxQK2XJDG4zwCQZlJtFboH9F1hhV8NLNggCP4RhPzrjOVTyZECYtw9zjyuy2767nhtMjURh0e1DQD4W7HeFlSz782lD9AXeZcNvzYc69gXkIbcTV7atzJTW9MnoD1o8R4Vdi7ZmZxMZ22eg==","token_session":"lLqhZnVu2bMVyoXpBbnUErQVXddb0xEHsn2F3l9ouIvPst9JfeKvIFk4h+r8ws237HEXMax04q0Mf21/CW1VhGPNR8gCcUcaOFgo0xijFICGbeSCXouSYI3xKx6Qh9qiJGZnmrIBqLOoGrgS2gjl1i7v8dR02dkI8tdUUpCYl064jvN10D1xGC1NDuIxPlKEmMpn46c2l56KxzeNZfTaR6HwgBbU9ooNUwLH3pCm85IR9sTTY55R0oxvHCMPSDY+9oSyl7rxxIb284Lp8bklIXjAQRK5Xhgro5TgaTCzKNudW/YrlXTsU718Erg8GaJ+KVT96vbS0UZF/lYw77VHNA=="}}
API END token renew /
[0mPOST /api/token/renew [32m200 [0m20.947 ms - 736[0m
API Cluster worker id: 2
REQUESTING PATH /home/ads;GET;1477292278435
CHECKING API TOKEN V+ivsRHOzd3UVpjyUdGQp1iVNIZ6sjNrhFHyKPzlFBB3Ozau0cqYOCfAaykI8TqgesWY5yOguSMYuPwmMIkrYovS5BkxlLcrmRetfpbM4ItbjpYHhauO2U/UFm3LyrQHTxvicdiPv4bocRbzFdpfkYiSf/RKnlzdkAoSM/UWHNjSNGCRafmISvuJsi2hamRlufsMQusMxQK2XJDG4zwCQZlJtFboH9F1hhV8NLNggCP4RhPzrjOVTyZECYtw9zjyuy2767nhtMjURh0e1DQD4W7HeFlSz782lD9AXeZcNvzYc69gXkIbcTV7atzJTW9MnoD1o8R4Vdi7ZmZxMZ22eg==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477292308227,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477292308227,"lang":2}; TAG START 1477292278435
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
DB:OK;SELECT * FROM table_ads WHERE is_active=TRUE ORDER BY id ASC;undefined
RESULT 200: {"home_ads":[{"id":"1","id_user":null,"time_create":"2016-10-23T08:04:04.099Z","ads":[{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide1.jpg"}],"is_active":true},{"id":"2","id_user":null,"time_create":"2016-10-23T08:04:04.100Z","ads":[{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide2.jpg"}],"is_active":true},{"id":"3","id_user":null,"time_create":"2016-10-23T08:04:04.101Z","ads":[{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"},{"site":"http://detik.com","text":"Dummy ADS","image":"http://appku.id:3009/images/slide3.jpg"}],"is_active":true}]}
[0mGET /api/home/ads [32m200 [0m11.074 ms - 3170[0m
API Cluster worker id: 2
REQUESTING PATH /trolley;GET;1477292279946
CHECKING API TOKEN V+ivsRHOzd3UVpjyUdGQp1iVNIZ6sjNrhFHyKPzlFBB3Ozau0cqYOCfAaykI8TqgesWY5yOguSMYuPwmMIkrYovS5BkxlLcrmRetfpbM4ItbjpYHhauO2U/UFm3LyrQHTxvicdiPv4bocRbzFdpfkYiSf/RKnlzdkAoSM/UWHNjSNGCRafmISvuJsi2hamRlufsMQusMxQK2XJDG4zwCQZlJtFboH9F1hhV8NLNggCP4RhPzrjOVTyZECYtw9zjyuy2767nhtMjURh0e1DQD4W7HeFlSz782lD9AXeZcNvzYc69gXkIbcTV7atzJTW9MnoD1o8R4Vdi7ZmZxMZ22eg==
CHECKING API ROLE
TOKEN_ACCESS:{"id":55,"role":3,"exp":1477292308227,"lang":2}
TOKEN ACCESS {"id":55,"role":3,"exp":1477292308227,"lang":2}; TAG START 1477292279946
TOKEN NOT EXPIRED OR TOKEN EXPIRED GRANTED:undefined;GET
Cluster worker id CMS: 2
Cluster worker id ROUTER: 2
IS_ERR false
CHECKING ROLE buyer; for User buyer
DB:OK;SELECT product.*,trolley.qty AS trolley_qty FROM table_trolley trolley LEFT JOIN table_product product ON product.id=trolley.id_product WHERE trolley.id_user=${id_user};{"id_user":55}
DB:OK;SELECT store.*,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category LEFT JOIN table_store store ON store.id=category.id_store LEFT JOIN table_location_gps location ON location.id=store.id_location WHERE product.id=$1;"3"
[{"id":"3","id_category":"50","name":"Semen Holcim","description":"Semen Holcim","time_create":"2016-10-23T08:04:04.108Z","is_delete":false,"avatar":"http://appku.id:3009/images/semen1.png","price":"50","unit":"sak","packaging":"1 sak","dimension":"1m x 1m","trolley_qty":"2"}]
{"id":"5","time_create":"2016-10-23T08:04:04.083Z","name":"Store Name 5","address":"Store Address 5","phone":"Store Phone 5","is_delete":false,"id_location":"50","id_schedule":"5","location_longitude":106.811120949546,"location_latitude":-6.2351555415162}
[ { id: '5', distance: '5000', price: '5000' },
  { id: '4', distance: '4000', price: '4000' },
  { id: '3', distance: '3000', price: '3000' },
  { id: '2', distance: '2000', price: '2000' },
  { id: '1', distance: '1000', price: '1000' },
  { id: '6', distance: '0', price: '0' } ]
DB:FAIL;SELECT store.*,ST_X(location.geom_location::geometry) AS location_longitude,ST_Y(location.geom_location::geometry) AS location_latitude FROM table_product product LEFT JOIN table_product_category category ON category.id=product.id_category LEFT JOIN table_store store ON store.id=category.id_store LEFT JOIN table_location_gps location ON location.id=store.id_location WHERE product.id=$1;"3";{}
RESULT 422: {"id":"Tidak dapat mengambil data troli","en":"Unable query trolley","cn":"n/a"}
LANGUAGE: {"money_max_cashout":"10000000","is_discount_shipment":"TRUE","page_pagination":"25","key_googlemaps":"AIzaSyDnL8pHV_HPAmrSgzFuQm__trcIZ3atIqI","timer_auto_complete":"3","distance_max":"3000","language":"en","fee_delivery":[{"id":"5","distance":"5000","price":"5000"},{"id":"4","distance":"4000","price":"4000"},{"id":"3","distance":"3000","price":"3000"},{"id":"2","distance":"2000","price":"2000"},{"id":"1","distance":"1000","price":"1000"},{"id":"6","distance":"0","price":"0"}],"worker_special":"[1]","is_maintenance":"FALSE","time_max_delivery":"3","token_access_expire":"30000","money_max_topup":"10000000"}
[0mGET /api/trolley [33m422 [0m21.743 ms - 45[0m
